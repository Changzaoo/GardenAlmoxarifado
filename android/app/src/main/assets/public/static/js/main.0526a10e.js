/*! For license information please see main.0526a10e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:o.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=b.prototype=new y;x.constructor=b,p(x,v.prototype),x.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,N={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,i={},s=null,o=null;if(null!=t)for(a in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,a)&&!E.hasOwnProperty(a)&&(i[a]=t[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:n,type:e,key:s,ref:o,props:i,_owner:N.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,a,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===i?"."+C(l,0):i,w(s)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),I(s,t,a,"",function(e){return e})):null!=s&&(k(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,a+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(o=e[c],c);l+=I(o,t,a,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=I(o=o.value,t,a,u=i+C(o,c++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],a=0;return I(e,r,"","",function(e){return t.call(n,e,a++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function O(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=a,t.Profiler=s,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.act=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=p({},e.props),i=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:n,type:e.type,key:i,ref:s,props:a,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=O,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<i(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,s=a>>>1;r<s;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<a&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<a&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)a(u);else{if(!(t.startTime<=e))break;a(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,D(_);else{var t=r(u);null!==t&&P(w,t.startTime-e)}}function _(e,n){p=!1,g&&(g=!1,y(k),k=-1),m=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var o=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&a(c),x(n)}else a(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&P(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,E=!1,S=null,k=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function j(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?N():(E=!1,S=null)}}else E=!1}if("function"===typeof b)N=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=j,N=function(){R.postMessage(null)}}else N=function(){v(j,0)};function D(e){S=e,E||(E=!0,N())}function P(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,i){var s=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?s+i:s:i=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>s?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,P(w,i-s))):(e.sortIndex=o,n(c,e),p||m||(p=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,a,i,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!d.call(m,e)||!d.call(f,e)&&(h.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var L,M=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),s=a.length-1,o=i.length-1;1<=s&&0<=o&&a[s]!==i[o];)o--;for(;1<=s&&0<=o;s--,o--)if(a[s]!==i[o]){if(1!==s||1!==o)do{if(s--,0>--o||a[s]!==i[o]){var l="\n"+a[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function B(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){J(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,Ne=null,Ee=null;function Se(e){if(e=wa(e)){if("function"!==typeof _e)throw Error(i(280));var t=e.stateNode;t&&(t=Na(t),_e(e.stateNode,e.type,t))}}function ke(e){Ne?Ee?Ee.push(e):Ee=[e]:Ne=e}function Te(){if(Ne){var e=Ne,t=Ee;if(Ee=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==Ne||null!==Ee)&&(Ie(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Na(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(ue){De=!1}function Oe(e,t,n,r,a,i,s,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,a,i,s,o,l){Le=!1,Me=null,Oe.apply(Ve,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Be(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(qe(e)!==e)throw Error(i(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var s=a.alternate;if(null===s){if(null!==(r=a.return)){n=r;continue}break}if(a.child===s.child){for(s=a.child;s;){if(s===n)return He(a),e;if(s===r)return He(a),t;s=s.sibling}throw Error(i(188))}if(n.return!==r.return)n=a,r=s;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,r=s;break}if(l===r){o=!0,r=a,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=a;break}if(l===r){o=!0,r=s,n=a;break}l=l.sibling}if(!o)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,Qe=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Je=a.unstable_now,$e=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,it=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,s=268435455&n;if(0!==s){var o=s&~a;0!==o?r=dt(o):0!==(i&=s)&&(r=dt(i))}else 0!==(s=n&~a)?r=dt(s):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(i=t&-t)||16===a&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-st(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,Nt,Et,St,kt=!1,Tt=[],Ct=null,It=null,At=null,Rt=new Map,Dt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Mt(e,t,n,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==t&&(null!==(t=wa(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Ft(e){var t=xa(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Be(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wa(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){kt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==It&&Ut(It)&&(It=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(Vt),Dt.forEach(Vt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return qt(t,e)}if(0<Tt.length){qt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==It&&qt(It,e),null!==At&&qt(At,e),Rt.forEach(t),Dt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Pt.shift()}var Ht=x.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var a=bt,i=Ht.transition;Ht.transition=null;try{bt=1,Qt(e,t,n,r)}finally{bt=a,Ht.transition=i}}function Gt(e,t,n,r){var a=bt,i=Ht.transition;Ht.transition=null;try{bt=4,Qt(e,t,n,r)}finally{bt=a,Ht.transition=i}}function Qt(e,t,n,r){if(Wt){var a=Yt(e,t,n,r);if(null===a)Kr(e,t,r,Xt,n),Lt(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,a),!0;case"dragenter":return It=Mt(It,e,t,n,r,a),!0;case"mouseover":return At=Mt(At,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Rt.set(i,Mt(Rt.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Dt.set(i,Mt(Dt.get(i)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==a;){var i=wa(a);if(null!==i&&wt(i),null===(i=Yt(e,t,n,r))&&Kr(e,t,r,Xt,n),i===a)break;a=i}null!==a&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=xa(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Be(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,en=null;function tn(){if(en)return en;var e,t,n=Zt,r=n.length,a="value"in $t?$t.value:$t.textContent,i=a.length;for(e=0;e<r&&n[e]===a[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===a[i-t];t++);return en=a.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function an(){return!1}function sn(e){function t(t,n,r,a,i){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(a):a[s]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rn:an,this.isPropagationStopped=an,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var on,ln,cn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=sn(dn),fn=M({},dn,{view:0,detail:0}),mn=sn(fn),pn=M({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,ln=e.screenY-cn.screenY):ln=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),gn=sn(pn),vn=sn(M({},pn,{dataTransfer:0})),yn=sn(M({},fn,{relatedTarget:0})),bn=sn(M({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=M({},dn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(xn),_n=sn(M({},dn,{data:0})),Nn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return kn}var Cn=M({},fn,{key:function(e){if(e.key){var t=Nn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Cn),jn=sn(M({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(M({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Rn=sn(M({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=M({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Dn),On=[9,13,27,32],Ln=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Fn=u&&"TextEvent"in window&&!Mn,Un=u&&(!Ln||Mn&&8<Mn&&11>=Mn),Vn=String.fromCharCode(32),zn=!1;function qn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Gn(e,t,n,r){ke(r),0<(t=Qr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Qn=null,Xn=null;function Yn(e){Vr(e,0)}function Jn(e){if(G(_a(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(u){var er;if(u){var tr="oninput"in document;if(!tr){var nr=document.createElement("div");nr.setAttribute("oninput","return;"),tr="function"===typeof nr.oninput}er=tr}else er=!1;Zn=er&&(!document.documentMode||9<document.documentMode)}function rr(){Qn&&(Qn.detachEvent("onpropertychange",ar),Xn=Qn=null)}function ar(e){if("value"===e.propertyName&&Jn(Xn)){var t=[];Gn(t,Xn,e,we(e)),Ae(Yn,t)}}function ir(e,t,n){"focusin"===e?(rr(),Xn=n,(Qn=t).attachEvent("onpropertychange",ar)):"focusout"===e&&rr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Xn)}function or(e,t){if("click"===e)return Jn(t)}function lr(e,t){if("input"===e||"change"===e)return Jn(t)}var cr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(cr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!d.call(t,a)||!cr(e[a],t[a]))return!1}return!0}function dr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=dr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=dr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function gr(e){var t=mr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=hr(n,i);var s=hr(n,r);a&&s&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=u&&"documentMode"in document&&11>=document.documentMode,yr=null,br=null,xr=null,wr=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&ur(xr,r)||(xr=r,0<(r=Qr(br,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function Nr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:Nr("Animation","AnimationEnd"),animationiteration:Nr("Animation","AnimationIteration"),animationstart:Nr("Animation","AnimationStart"),transitionend:Nr("Transition","TransitionEnd")},Sr={},kr={};function Tr(e){if(Sr[e])return Sr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Sr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var Cr=Tr("animationend"),Ir=Tr("animationiteration"),jr=Tr("animationstart"),Ar=Tr("transitionend"),Rr=new Map,Dr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Rr.set(e,t),l(t,[e])}for(var Or=0;Or<Dr.length;Or++){var Lr=Dr[Or];Pr(Lr.toLowerCase(),"on"+(Lr[0].toUpperCase()+Lr.slice(1)))}Pr(Cr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(jr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,s,o,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&a.isPropagationStopped())break e;Ur(a,o,c),i=l}else for(s=0;s<r.length;s++){if(l=(o=r[s]).instance,c=o.currentTarget,o=o.listener,l!==i&&a.isPropagationStopped())break e;Ur(a,o,c),i=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function zr(e,t){var n=t[va];void 0===n&&(n=t[va]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Br]){e[Br]=!0,s.forEach(function(t){"selectionchange"!==t&&(Fr.has(t)||qr(t,!1,e),qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,qr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Jt(t)){case 1:var a=Kt;break;case 4:a=Gt;break;default:a=Qt}n=a.bind(null,t,n,e),a=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,a){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var o=r.stateNode.containerInfo;if(o===a||8===o.nodeType&&o.parentNode===a)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;s=s.return}for(;null!==o;){if(null===(s=xa(o)))return;if(5===(l=s.tag)||6===l){r=i=s;continue e}o=o.parentNode}}r=r.return}Ae(function(){var r=i,a=we(n),s=[];e:{var o=Rr.get(e);if(void 0!==o){var l=hn,c=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=yn;break;case"focusout":c="blur",l=yn;break;case"beforeblur":case"afterblur":l=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=gn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Cr:case Ir:case jr:l=bn;break;case Ar:l=Rn;break;case"scroll":l=mn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=jn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==o?o+"Capture":null:o;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==h&&(null!=(p=Re(m,h))&&u.push(Gr(m,p,f)))),d)break;m=m.return}0<u.length&&(o=new l(o,c,null,n,a),s.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!xa(c)&&!c[ga])&&(l||o)&&(o=a.window===a?a:(o=a.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?xa(c):null)&&(c!==(d=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=gn,p="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=jn,p="onPointerLeave",h="onPointerEnter",m="pointer"),d=null==l?o:_a(l),f=null==c?o:_a(c),(o=new u(p,m+"leave",l,n,a)).target=d,o.relatedTarget=f,p=null,xa(a)===r&&((u=new u(h,m+"enter",c,n,a)).target=f,u.relatedTarget=d,p=u),d=p,l&&c)e:{for(h=c,m=0,f=u=l;f;f=Xr(f))m++;for(f=0,p=h;p;p=Xr(p))f++;for(;0<m-f;)u=Xr(u),m--;for(;0<f-m;)h=Xr(h),f--;for(;m--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xr(u),h=Xr(h)}u=null}else u=null;null!==l&&Yr(s,o,l,u,!1),null!==c&&null!==d&&Yr(s,d,c,u,!0)}if("select"===(l=(o=r?_a(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=$n;else if(Kn(o))if(Zn)g=lr;else{g=sr;var v=ir}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=or);switch(g&&(g=g(e,r))?Gn(s,g,n,a):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?_a(r):window,e){case"focusin":(Kn(v)||"true"===v.contentEditable)&&(yr=v,br=r,xr=null);break;case"focusout":xr=br=yr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,_r(s,n,a);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(s,n,a)}var y;if(Ln)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Hn?qn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Hn&&(y=tn()):(Zt="value"in($t=a)?$t.value:$t.textContent,Hn=!0)),0<(v=Qr(r,b)).length&&(b=new _n(b,e,null,n,a),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Bn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Ln&&qn(e,t)?(e=tn(),en=Zt=$t=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Qr(r,"onBeforeInput")).length&&(a=new _n("onBeforeInput","beforeinput",null,n,a),s.push({event:a,listeners:r}),a.data=y))}Vr(s,t)})}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Qr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Re(e,n))&&r.unshift(Gr(e,i,a)),null!=(i=Re(e,t))&&r.push(Gr(e,i,a))),e=e.return}return r}function Xr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,a){for(var i=t._reactName,s=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,a?null!=(l=Re(n,i))&&s.unshift(Gr(n,l,o)):a||null!=(l=Re(n,i))&&s.push(Gr(n,l,o))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Jr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace($r,"")}function ea(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function ta(){}var na=null,ra=null;function aa(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ia="function"===typeof setTimeout?setTimeout:void 0,sa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,la="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(ca)}:ia;function ca(e){setTimeout(function(){throw e})}function ua(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Bt(t)}function da(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ha(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),ma="__reactFiber$"+fa,pa="__reactProps$"+fa,ga="__reactContainer$"+fa,va="__reactEvents$"+fa,ya="__reactListeners$"+fa,ba="__reactHandles$"+fa;function xa(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ga]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ha(e);null!==e;){if(n=e[ma])return n;e=ha(e)}return t}n=(e=n).parentNode}return null}function wa(e){return!(e=e[ma]||e[ga])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _a(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Na(e){return e[pa]||null}var Ea=[],Sa=-1;function ka(e){return{current:e}}function Ta(e){0>Sa||(e.current=Ea[Sa],Ea[Sa]=null,Sa--)}function Ca(e,t){Sa++,Ea[Sa]=e.current,e.current=t}var Ia={},ja=ka(Ia),Aa=ka(!1),Ra=Ia;function Da(e,t){var n=e.type.contextTypes;if(!n)return Ia;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in n)i[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oa(){Ta(Aa),Ta(ja)}function La(e,t,n){if(ja.current!==Ia)throw Error(i(168));Ca(ja,t),Ca(Aa,n)}function Ma(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(i(108,B(e)||"Unknown",a));return M({},n,r)}function Fa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ia,Ra=ja.current,Ca(ja,e),Ca(Aa,Aa.current),!0}function Ua(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ma(e,t,Ra),r.__reactInternalMemoizedMergedChildContext=e,Ta(Aa),Ta(ja),Ca(ja,e)):Ta(Aa),Ca(Aa,n)}var Va=null,za=!1,qa=!1;function Ba(e){null===Va?Va=[e]:Va.push(e)}function Ha(){if(!qa&&null!==Va){qa=!0;var e=0,t=bt;try{var n=Va;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Va=null,za=!1}catch(a){throw null!==Va&&(Va=Va.slice(e+1)),Ge(Ze,Ha),a}finally{bt=t,qa=!1}}return null}var Wa=[],Ka=0,Ga=null,Qa=0,Xa=[],Ya=0,Ja=null,$a=1,Za="";function ei(e,t){Wa[Ka++]=Qa,Wa[Ka++]=Ga,Ga=e,Qa=t}function ti(e,t,n){Xa[Ya++]=$a,Xa[Ya++]=Za,Xa[Ya++]=Ja,Ja=e;var r=$a;e=Za;var a=32-st(r)-1;r&=~(1<<a),n+=1;var i=32-st(t)+a;if(30<i){var s=a-a%5;i=(r&(1<<s)-1).toString(32),r>>=s,a-=s,$a=1<<32-st(t)+a|n<<a|r,Za=i+e}else $a=1<<i|n<<a|r,Za=e}function ni(e){null!==e.return&&(ei(e,1),ti(e,1,0))}function ri(e){for(;e===Ga;)Ga=Wa[--Ka],Wa[Ka]=null,Qa=Wa[--Ka],Wa[Ka]=null;for(;e===Ja;)Ja=Xa[--Ya],Xa[Ya]=null,Za=Xa[--Ya],Xa[Ya]=null,$a=Xa[--Ya],Xa[Ya]=null}var ai=null,ii=null,si=!1,oi=null;function li(e,t){var n=Dc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ai=e,ii=da(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ai=e,ii=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ja?{id:$a,overflow:Za}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Dc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ai=e,ii=null,!0);default:return!1}}function ui(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function di(e){if(si){var t=ii;if(t){var n=t;if(!ci(e,t)){if(ui(e))throw Error(i(418));t=da(n.nextSibling);var r=ai;t&&ci(e,t)?li(r,n):(e.flags=-4097&e.flags|2,si=!1,ai=e)}}else{if(ui(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ai=e}}}function hi(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ai=e}function fi(e){if(e!==ai)return!1;if(!si)return hi(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!aa(e.type,e.memoizedProps)),t&&(t=ii)){if(ui(e))throw mi(),Error(i(418));for(;t;)li(e,t),t=da(t.nextSibling)}if(hi(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ii=da(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ii=null}}else ii=ai?da(e.stateNode.nextSibling):null;return!0}function mi(){for(var e=ii;e;)e=da(e.nextSibling)}function pi(){ii=ai=null,si=!1}function gi(e){null===oi?oi=[e]:oi.push(e)}var vi=x.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var a=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=a.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function bi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&xi(i)===t.type)?((r=a(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,i)).return=e,t):((t=a(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||O(t))return(t=Mc(t,e.mode,n,null)).return=e,t;bi(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case _:return n.key===a?u(e,t,n,r):null;case R:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||O(n))return null!==a?null:d(e,t,n,r,null);bi(e,n)}return null}function m(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,a);case R:return m(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||O(r))return d(t,e=e.get(n)||null,r,a,null);bi(t,r)}return null}function p(a,i,o,l){for(var c=null,u=null,d=i,p=i=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var v=f(a,d,o[p],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(a,d),i=s(v,i,p),null===u?c=v:u.sibling=v,u=v,d=g}if(p===o.length)return n(a,d),si&&ei(a,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(a,o[p],l))&&(i=s(d,i,p),null===u?c=d:u.sibling=d,u=d);return si&&ei(a,p),c}for(d=r(a,d);p<o.length;p++)null!==(g=m(d,a,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),i=s(g,i,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(a,e)}),si&&ei(a,p),c}function g(a,o,l,c){var u=O(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,p=o,g=o=0,v=null,y=l.next();null!==p&&!y.done;g++,y=l.next()){p.index>g?(v=p,p=null):v=p.sibling;var b=f(a,p,y.value,c);if(null===b){null===p&&(p=v);break}e&&p&&null===b.alternate&&t(a,p),o=s(b,o,g),null===d?u=b:d.sibling=b,d=b,p=v}if(y.done)return n(a,p),si&&ei(a,g),u;if(null===p){for(;!y.done;g++,y=l.next())null!==(y=h(a,y.value,c))&&(o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return si&&ei(a,g),u}for(p=r(a,p);!y.done;g++,y=l.next())null!==(y=m(p,a,g,y.value,c))&&(e&&null!==y.alternate&&p.delete(null===y.key?g:y.key),o=s(y,o,g),null===d?u=y:d.sibling=y,d=y);return e&&p.forEach(function(e){return t(a,e)}),si&&ei(a,g),u}return function e(r,i,s,l){if("object"===typeof s&&null!==s&&s.type===N&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:e:{for(var c=s.key,u=i;null!==u;){if(u.key===c){if((c=s.type)===N){if(7===u.tag){n(r,u.sibling),(i=a(u,s.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&xi(c)===u.type){n(r,u.sibling),(i=a(u,s.props)).ref=yi(r,u,s),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===N?((i=Mc(s.props.children,r.mode,l,s.key)).return=r,r=i):((l=Lc(s.type,s.key,s.props,null,r.mode,l)).ref=yi(r,i,s),l.return=r,r=l)}return o(r);case _:e:{for(u=s.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===s.containerInfo&&i.stateNode.implementation===s.implementation){n(r,i.sibling),(i=a(i,s.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Vc(s,r.mode,l)).return=r,r=i}return o(r);case R:return e(r,i,(u=s._init)(s._payload),l)}if(te(s))return p(r,i,s,l);if(O(s))return g(r,i,s,l);bi(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==i&&6===i.tag?(n(r,i.sibling),(i=a(i,s)).return=r,r=i):(n(r,i),(i=Uc(s,r.mode,l)).return=r,r=i),o(r)):n(r,i)}}var _i=wi(!0),Ni=wi(!1),Ei=ka(null),Si=null,ki=null,Ti=null;function Ci(){Ti=ki=Si=null}function Ii(e){var t=Ei.current;Ta(Ei),e._currentValue=t}function ji(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ai(e,t){Si=e,Ti=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wo=!0),e.firstContext=null)}function Ri(e){var t=e._currentValue;if(Ti!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Si)throw Error(i(308));ki=e,Si.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Di=null;function Pi(e){null===Di?Di=[e]:Di.push(e)}function Oi(e,t,n,r){var a=t.interleaved;return null===a?(n.next=n,Pi(t)):(n.next=a.next,a.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Fi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ui(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&jl)){var a=r.pending;return null===a?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Li(e,n)}return null===(a=r.interleaved)?(t.next=t,Pi(r)):(t.next=a.next,a.next=t),r.interleaved=t,Li(e,n)}function qi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Bi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?a=i=s:i=i.next=s,n=n.next}while(null!==n);null===i?a=i=t:i=i.next=t}else a=i=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hi(e,t,n,r){var a=e.updateQueue;Mi=!1;var i=a.firstBaseUpdate,s=a.lastBaseUpdate,o=a.shared.pending;if(null!==o){a.shared.pending=null;var l=o,c=l.next;l.next=null,null===s?i=c:s.next=c,s=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(s=0,u=c=l=null,o=i;;){var h=o.lane,f=o.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,p=o;switch(h=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=p.payload)?m.call(f,d,h):m)||void 0===h)break e;d=M({},d,h);break e;case 2:Mi=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=a.effects)?a.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(o=o.next)){if(null===(o=a.shared.pending))break;o=(h=o).next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(t=a.shared.interleaved)){a=t;do{s|=a.lane,a=a.next}while(a!==t)}else null===i&&(a.shared.lanes=0);Fl|=s,e.lanes=s,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Ki={},Gi=ka(Ki),Qi=ka(Ki),Xi=ka(Ki);function Yi(e){if(e===Ki)throw Error(i(174));return e}function Ji(e,t){switch(Ca(Xi,t),Ca(Qi,e),Ca(Gi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ta(Gi),Ca(Gi,t)}function $i(){Ta(Gi),Ta(Qi),Ta(Xi)}function Zi(e){Yi(Xi.current);var t=Yi(Gi.current),n=le(t,e.type);t!==n&&(Ca(Qi,e),Ca(Gi,n))}function es(e){Qi.current===e&&(Ta(Gi),Ta(Qi))}var ts=ka(0);function ns(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function as(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var is=x.ReactCurrentDispatcher,ss=x.ReactCurrentBatchConfig,os=0,ls=null,cs=null,us=null,ds=!1,hs=!1,fs=0,ms=0;function ps(){throw Error(i(321))}function gs(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!cr(e[n],t[n]))return!1;return!0}function vs(e,t,n,r,a,s){if(os=s,ls=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?eo:to,e=n(r,a),hs){s=0;do{if(hs=!1,fs=0,25<=s)throw Error(i(301));s+=1,us=cs=null,t.updateQueue=null,is.current=no,e=n(r,a)}while(hs)}if(is.current=Zs,t=null!==cs&&null!==cs.next,os=0,us=cs=ls=null,ds=!1,t)throw Error(i(300));return e}function ys(){var e=0!==fs;return fs=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?ls.memoizedState=us=e:us=us.next=e,us}function xs(){if(null===cs){var e=ls.alternate;e=null!==e?e.memoizedState:null}else e=cs.next;var t=null===us?ls.memoizedState:us.next;if(null!==t)us=t,cs=e;else{if(null===e)throw Error(i(310));e={memoizedState:(cs=e).memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},null===us?ls.memoizedState=us=e:us=us.next=e}return us}function ws(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=xs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=cs,a=r.baseQueue,s=n.pending;if(null!==s){if(null!==a){var o=a.next;a.next=s.next,s.next=o}r.baseQueue=a=s,n.pending=null}if(null!==a){s=a.next,r=r.baseState;var l=o=null,c=null,u=s;do{var d=u.lane;if((os&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,ls.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==s);null===c?o=r:c.next=l,cr(r,t.memoizedState)||(wo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{s=a.lane,ls.lanes|=s,Fl|=s,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ns(e){var t=xs(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,s=t.memoizedState;if(null!==a){n.pending=null;var o=a=a.next;do{s=e(s,o.action),o=o.next}while(o!==a);cr(s,t.memoizedState)||(wo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Es(){}function Ss(e,t){var n=ls,r=xs(),a=t(),s=!cr(r.memoizedState,a);if(s&&(r.memoizedState=a,wo=!0),r=r.queue,Ms(Cs.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Rs(9,Ts.bind(null,n,r,a,t),void 0,null),null===Al)throw Error(i(349));0!==(30&os)||ks(n,t,a)}return a}function ks(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ls.updateQueue)?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ts(e,t,n,r){t.value=n,t.getSnapshot=r,Is(t)&&js(e)}function Cs(e,t,n){return n(function(){Is(t)&&js(e)})}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!cr(e,n)}catch(r){return!0}}function js(e){var t=Li(e,1);null!==t&&ac(t,e,1,-1)}function As(e){var t=bs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:e},t.queue=e,e=e.dispatch=Xs.bind(null,ls,e),[t.memoizedState,e]}function Rs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ls.updateQueue)?(t={lastEffect:null,stores:null},ls.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ds(){return xs().memoizedState}function Ps(e,t,n,r){var a=bs();ls.flags|=e,a.memoizedState=Rs(1|t,n,void 0,void 0===r?null:r)}function Os(e,t,n,r){var a=xs();r=void 0===r?null:r;var i=void 0;if(null!==cs){var s=cs.memoizedState;if(i=s.destroy,null!==r&&gs(r,s.deps))return void(a.memoizedState=Rs(t,n,i,r))}ls.flags|=e,a.memoizedState=Rs(1|t,n,i,r)}function Ls(e,t){return Ps(8390656,8,e,t)}function Ms(e,t){return Os(2048,8,e,t)}function Fs(e,t){return Os(4,2,e,t)}function Us(e,t){return Os(4,4,e,t)}function Vs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Os(4,4,Vs.bind(null,t,e),n)}function qs(){}function Bs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Hs(e,t){var n=xs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&gs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ws(e,t,n){return 0===(21&os)?(e.baseState&&(e.baseState=!1,wo=!0),e.memoizedState=n):(cr(n,t)||(n=pt(),ls.lanes|=n,Fl|=n,e.baseState=!0),t)}function Ks(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ss.transition;ss.transition={};try{e(!1),t()}finally{bt=n,ss.transition=r}}function Gs(){return xs().memoizedState}function Qs(e,t,n){var r=rc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ys(e))Js(t,n);else if(null!==(n=Oi(e,t,n,r))){ac(n,e,r,nc()),$s(n,t,r)}}function Xs(e,t,n){var r=rc(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ys(e))Js(t,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=i(s,n);if(a.hasEagerState=!0,a.eagerState=o,cr(o,s)){var l=t.interleaved;return null===l?(a.next=a,Pi(t)):(a.next=l.next,l.next=a),void(t.interleaved=a)}}catch(c){}null!==(n=Oi(e,t,a,r))&&(ac(n,e,r,a=nc()),$s(n,t,r))}}function Ys(e){var t=e.alternate;return e===ls||null!==t&&t===ls}function Js(e,t){hs=ds=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function $s(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Zs={readContext:Ri,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},eo={readContext:Ri,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ri,useEffect:Ls,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ps(4194308,4,Vs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ps(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ps(4,2,e,t)},useMemo:function(e,t){var n=bs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=bs();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qs.bind(null,ls,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:As,useDebugValue:qs,useDeferredValue:function(e){return bs().memoizedState=e},useTransition:function(){var e=As(!1),t=e[0];return e=Ks.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ls,a=bs();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Al)throw Error(i(349));0!==(30&os)||ks(r,t,n)}a.memoizedState=n;var s={value:n,getSnapshot:t};return a.queue=s,Ls(Cs.bind(null,r,s,e),[e]),r.flags|=2048,Rs(9,Ts.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=bs(),t=Al.identifierPrefix;if(si){var n=Za;t=":"+t+"R"+(n=($a&~(1<<32-st($a)-1)).toString(32)+n),0<(n=fs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ms++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},to={readContext:Ri,useCallback:Bs,useContext:Ri,useEffect:Ms,useImperativeHandle:zs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:Hs,useReducer:_s,useRef:Ds,useState:function(){return _s(ws)},useDebugValue:qs,useDeferredValue:function(e){return Ws(xs(),cs.memoizedState,e)},useTransition:function(){return[_s(ws)[0],xs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ss,useId:Gs,unstable_isNewReconciler:!1},no={readContext:Ri,useCallback:Bs,useContext:Ri,useEffect:Ms,useImperativeHandle:zs,useInsertionEffect:Fs,useLayoutEffect:Us,useMemo:Hs,useReducer:Ns,useRef:Ds,useState:function(){return Ns(ws)},useDebugValue:qs,useDeferredValue:function(e){var t=xs();return null===cs?t.memoizedState=e:Ws(t,cs.memoizedState,e)},useTransition:function(){return[Ns(ws)[0],xs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Ss,useId:Gs,unstable_isNewReconciler:!1};function ro(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ao(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),i=Vi(r,a);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,a))&&(ac(t,e,a,r),qi(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=nc(),a=rc(e),i=Vi(r,a);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,a))&&(ac(t,e,a,r),qi(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=nc(),r=rc(e),a=Vi(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),null!==(t=zi(e,a,r))&&(ac(t,e,r,n),qi(t,e,r))}};function so(e,t,n,r,a,i,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,s):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(a,i))}function oo(e,t,n){var r=!1,a=Ia,i=t.contextType;return"object"===typeof i&&null!==i?i=Ri(i):(a=Pa(t)?Ra:ja.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Da(e,a):Ia),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function lo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function co(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Fi(e);var i=t.contextType;"object"===typeof i&&null!==i?a.context=Ri(i):(i=Pa(t)?Ra:ja.current,a.context=Da(e,i)),a.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ao(e,t,i,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&io.enqueueReplaceState(a,a.state,null),Hi(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function uo(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var a=n}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:a,digest:null}}function ho(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function fo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Vi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Kl||(Kl=!0,Gl=r),fo(0,t)},n}function go(e,t,n){(n=Vi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){fo(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){fo(0,t),"function"!==typeof r&&(null===Ql?Ql=new Set([this]):Ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new mo;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function bo(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var xo=x.ReactCurrentOwner,wo=!1;function _o(e,t,n,r){t.child=null===e?Ni(t,null,n,r):_i(t,e.child,n,r)}function No(e,t,n,r,a){n=n.render;var i=t.ref;return Ai(t,a),r=vs(e,t,n,r,i,a),n=ys(),null===e||wo?(si&&n&&ni(t),t.flags|=1,_o(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function Eo(e,t,n,r,a){if(null===e){var i=n.type;return"function"!==typeof i||Pc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,So(e,t,i,r,a))}if(i=e.child,0===(e.lanes&a)){var s=i.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(s,r)&&e.ref===t.ref)return Ko(e,t,a)}return t.flags|=1,(e=Oc(i,r)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,r,a){if(null!==e){var i=e.memoizedProps;if(ur(i,r)&&e.ref===t.ref){if(wo=!1,t.pendingProps=r=i,0===(e.lanes&a))return t.lanes=e.lanes,Ko(e,t,a);0!==(131072&e.flags)&&(wo=!0)}}return Co(e,t,n,r,a)}function ko(e,t,n){var r=t.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ca(Ol,Pl),Pl|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ca(Ol,Pl),Pl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ca(Ol,Pl),Pl|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ca(Ol,Pl),Pl|=r;return _o(e,t,a,n),t.child}function To(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,r,a){var i=Pa(n)?Ra:ja.current;return i=Da(t,i),Ai(t,a),n=vs(e,t,n,r,i,a),r=ys(),null===e||wo?(si&&r&&ni(t),t.flags|=1,_o(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ko(e,t,a))}function Io(e,t,n,r,a){if(Pa(n)){var i=!0;Fa(t)}else i=!1;if(Ai(t,a),null===t.stateNode)Wo(e,t),oo(t,n,r),co(t,n,r,a),r=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ri(c):c=Da(t,c=Pa(n)?Ra:ja.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==r||l!==c)&&lo(t,s,r,c),Mi=!1;var h=t.memoizedState;s.state=h,Hi(t,r,s,a),l=t.memoizedState,o!==r||h!==l||Aa.current||Mi?("function"===typeof u&&(ao(t,n,u,r),l=t.memoizedState),(o=Mi||so(t,n,o,r,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,Ui(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:ro(t.type,o),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ri(l):l=Da(t,l=Pa(n)?Ra:ja.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==d||h!==l)&&lo(t,s,r,l),Mi=!1,h=t.memoizedState,s.state=h,Hi(t,r,s,a);var m=t.memoizedState;o!==d||h!==m||Aa.current||Mi?("function"===typeof f&&(ao(t,n,f,r),m=t.memoizedState),(c=Mi||so(t,n,c,r,h,m,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,m,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),s.props=r,s.state=m,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return jo(e,t,n,r,i,a)}function jo(e,t,n,r,a,i){To(e,t);var s=0!==(128&t.flags);if(!r&&!s)return a&&Ua(t,n,!1),Ko(e,t,i);r=t.stateNode,xo.current=t;var o=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=_i(t,e.child,null,i),t.child=_i(t,null,o,i)):_o(e,t,o,i),t.memoizedState=r.state,a&&Ua(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?La(0,t.pendingContext,t.pendingContext!==t.context):t.context&&La(0,t.context,!1),Ji(e,t.containerInfo)}function Ro(e,t,n,r,a){return pi(),gi(a),t.flags|=256,_o(e,t,n,r),t.child}var Do,Po,Oo,Lo,Mo={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uo(e,t,n){var r,a=t.pendingProps,s=ts.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ca(ts,1&s),null===e)return di(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=a.children,e=a.fallback,o?(a=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&a)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Fc(l,a,0,null),e=Mc(e,a,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(n),t.memoizedState=Mo,e):Vo(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,a,s,o){if(n)return 256&t.flags?(t.flags&=-257,zo(e,t,o,r=ho(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,a=t.mode,r=Fc({mode:"visible",children:r.children},a,0,null),(s=Mc(s,a,o,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&_i(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=Mo,s);if(0===(1&t.mode))return zo(e,t,o,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zo(e,t,o,r=ho(s=Error(i(419)),r,void 0))}if(l=0!==(o&e.childLanes),wo||l){if(null!==(r=Al)){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|o))?0:a)&&a!==s.retryLane&&(s.retryLane=a,Li(e,a),ac(r,e,a,-1))}return vc(),zo(e,t,o,r=ho(Error(i(421))))}return"$?"===a.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),a._reactRetry=t,null):(e=s.treeContext,ii=da(a.nextSibling),ai=t,si=!0,oi=null,null!==e&&(Xa[Ya++]=$a,Xa[Ya++]=Za,Xa[Ya++]=Ja,$a=e.id,Za=e.overflow,Ja=t),t=Vo(t,r.children),t.flags|=4096,t)}(e,t,l,a,r,s,n);if(o){o=a.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&t.child!==s?((a=t.child).childLanes=0,a.pendingProps=c,t.deletions=null):(a=Oc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?o=Oc(r,o):(o=Mc(o,l,n,null)).flags|=2,o.return=t,a.return=t,a.sibling=o,t.child=a,a=o,o=t.child,l=null===(l=e.child.memoizedState)?Fo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Mo,a}return e=(o=e.child).sibling,a=Oc(o,{mode:"visible",children:a.children}),0===(1&t.mode)&&(a.lanes=n),a.return=t,a.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=a,t.memoizedState=null,a}function Vo(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zo(e,t,n,r){return null!==r&&gi(r),_i(t,e.child,null,n),(e=Vo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function qo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ji(e.return,t,n)}function Bo(e,t,n,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function Ho(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(_o(e,t,r.children,n),0!==(2&(r=ts.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&qo(e,n,t);else if(19===e.tag)qo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ca(ts,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ns(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Bo(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ns(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Bo(t,!0,n,null,i);break;case"together":Bo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ko(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xo(e,t,n){var r=t.pendingProps;switch(ri(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:case 17:return Pa(t.type)&&Oa(),Qo(t),null;case 3:return r=t.stateNode,$i(),Ta(Aa),Ta(ja),as(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oi&&(lc(oi),oi=null))),Po(e,t),Qo(t),null;case 5:es(t);var a=Yi(Xi.current);if(n=t.type,null!==e&&null!=t.stateNode)Oo(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Qo(t),null}if(e=Yi(Gi.current),fi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ma]=t,r[pa]=s,e=0!==(1&t.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Mr.length;a++)zr(Mr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":Y(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":ae(r,s),zr("invalid",r)}for(var l in ye(n,s),a=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&ea(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&ea(r.textContent,c,e),a=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":K(r),Z(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=ta)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[ma]=t,e[pa]=r,Do(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Mr.length;a++)zr(Mr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":Y(e,r),a=X(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(s in ye(n,a),c=a)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=u&&"onScroll"===s&&zr("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=ta)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Xi.current),Yi(Gi.current),fi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ma]=t,(s=r.nodeValue!==n)&&null!==(e=ai))switch(e.tag){case 3:ea(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&ea(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ma]=t,t.stateNode=r}return Qo(t),null;case 13:if(Ta(ts),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ii&&0!==(1&t.mode)&&0===(128&t.flags))mi(),pi(),t.flags|=98560,s=!1;else if(s=fi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(i(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(i(317));s[ma]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qo(t),s=!1}else null!==oi&&(lc(oi),oi=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ts.current)?0===Ll&&(Ll=3):vc())),null!==t.updateQueue&&(t.flags|=4),Qo(t),null);case 4:return $i(),Po(e,t),null===e&&Hr(t.stateNode.containerInfo),Qo(t),null;case 10:return Ii(t.type._context),Qo(t),null;case 19:if(Ta(ts),null===(s=t.memoizedState))return Qo(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Go(s,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ns(e))){for(t.flags|=128,Go(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ca(ts,1&ts.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Hl&&(t.flags|=128,r=!0,Go(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ns(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!si)return Qo(t),null}else 2*Je()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Go(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=ts.current,Ca(ts,r?1&n|2:1&n),t):(Qo(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Pl)&&(Qo(t),6&t.subtreeFlags&&(t.flags|=8192)):Qo(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Yo(e,t){switch(ri(t),t.tag){case 1:return Pa(t.type)&&Oa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $i(),Ta(Aa),Ta(ja),as(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return es(t),null;case 13:if(Ta(ts),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ta(ts),null;case 4:return $i(),null;case 10:return Ii(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Do=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Po=function(){},Oo=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Yi(Gi.current);var i,s=null;switch(n){case"input":a=X(e,a),r=X(e,r),s=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),s=[];break;case"textarea":a=re(e,a),r=re(e,r),s=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=ta)}for(u in ye(n,r),n=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Lo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Jo=!1,$o=!1,Zo="function"===typeof WeakSet?WeakSet:Set,el=null;function tl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function nl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var rl=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&nl(t,n,i)}a=a.next}while(a!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[pa],delete t[va],delete t[ya],delete t[ba])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ll(e){return 5===e.tag||3===e.tag||4===e.tag}function cl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ll(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ta));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function dl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(dl(e,t,n),e=e.sibling;null!==e;)dl(e,t,n),e=e.sibling}var hl=null,fl=!1;function ml(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(at,n)}catch(o){}switch(n.tag){case 5:$o||tl(n,t);case 6:var r=hl,a=fl;hl=null,ml(e,t,n),fl=a,null!==(hl=r)&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(fl?(e=hl,n=n.stateNode,8===e.nodeType?ua(e.parentNode,n):1===e.nodeType&&ua(e,n),Bt(e)):ua(hl,n.stateNode));break;case 4:r=hl,a=fl,hl=n.stateNode.containerInfo,fl=!0,ml(e,t,n),hl=r,fl=a;break;case 0:case 11:case 14:case 15:if(!$o&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,s=i.destroy;i=i.tag,void 0!==s&&(0!==(2&i)||0!==(4&i))&&nl(n,t,s),a=a.next}while(a!==r)}ml(e,t,n);break;case 1:if(!$o&&(tl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}ml(e,t,n);break;case 21:ml(e,t,n);break;case 22:1&n.mode?($o=(r=$o)||null!==n.memoizedState,ml(e,t,n),$o=r):ml(e,t,n);break;default:ml(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zo),t.forEach(function(t){var r=jc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var s=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,fl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===hl)throw Error(i(160));pl(s,o,a),hl=null,fl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){kc(a,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),bl(e),4&r){try{al(3,e,e.return),il(3,e)}catch(g){kc(e,e.return,g)}try{al(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return);break;case 5:if(vl(t,e),bl(e),512&r&&null!==n&&tl(n,n.return),32&e.flags){var a=e.stateNode;try{he(a,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var s=e.memoizedProps,o=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(a,s),be(l,o);var u=be(l,s);for(o=0;o<c.length;o+=2){var d=c[o],h=c[o+1];"style"===d?ge(a,h):"dangerouslySetInnerHTML"===d?de(a,h):"children"===d?he(a,h):b(a,d,h,u)}switch(l){case"input":$(a,s);break;case"textarea":ie(a,s);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!s.multiple;var m=s.value;null!=m?ne(a,!!s.multiple,m,!1):f!==!!s.multiple&&(null!=s.defaultValue?ne(a,!!s.multiple,s.defaultValue,!0):ne(a,!!s.multiple,s.multiple?[]:"",!1))}a[pa]=s}catch(g){kc(e,e.return,g)}}break;case 6:if(vl(t,e),bl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,s=e.memoizedProps;try{a.nodeValue=s}catch(g){kc(e,e.return,g)}}break;case 3:if(vl(t,e),bl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:vl(t,e),bl(e);break;case 13:vl(t,e),bl(e),8192&(a=e.child).flags&&(s=null!==a.memoizedState,a.stateNode.isHidden=s,!s||null!==a.alternate&&null!==a.alternate.memoizedState||(Bl=Je())),4&r&&gl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?($o=(u=$o)||d,vl(t,e),$o=u):vl(t,e),bl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(el=e,d=e.child;null!==d;){for(h=el=d;null!==el;){switch(m=(f=el).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:tl(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(null!==f.memoizedState){Nl(h);continue}}null!==m?(m.return=f,el=m):Nl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{a=h.stateNode,u?"function"===typeof(s=a.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=pe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vl(t,e),bl(e),4&r&&gl(e);case 21:}}function bl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ll(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(he(a,""),r.flags&=-33),dl(e,cl(e),a);break;case 3:case 4:var s=r.stateNode.containerInfo;ul(e,cl(e),s);break;default:throw Error(i(161))}}catch(un){kc(e,e.return,un)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function xl(e,t,n){el=e,wl(e,t,n)}function wl(e,t,n){for(var r=0!==(1&e.mode);null!==el;){var a=el,i=a.child;if(22===a.tag&&r){var s=null!==a.memoizedState||Jo;if(!s){var o=a.alternate,l=null!==o&&null!==o.memoizedState||$o;o=Jo;var c=$o;if(Jo=s,($o=l)&&!c)for(el=a;null!==el;)l=(s=el).child,22===s.tag&&null!==s.memoizedState?El(a):null!==l?(l.return=s,el=l):El(a);for(;null!==i;)el=i,wl(i,t,n),i=i.sibling;el=a,Jo=o,$o=c}_l(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,el=i):_l(e)}}function _l(e){for(;null!==el;){var t=el;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$o||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$o)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ro(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wi(t,s,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}$o||512&t.flags&&sl(t)}catch(f){kc(t,t.return,f)}}if(t===e){el=null;break}if(null!==(n=t.sibling)){n.return=t.return,el=n;break}el=t.return}}function Nl(e){for(;null!==el;){var t=el;if(t===e){el=null;break}var n=t.sibling;if(null!==n){n.return=t.return,el=n;break}el=t.return}}function El(e){for(;null!==el;){var t=el;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(un){kc(t,n,un)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(un){kc(t,a,un)}}var i=t.return;try{sl(t)}catch(un){kc(t,i,un)}break;case 5:var s=t.return;try{sl(t)}catch(un){kc(t,s,un)}}}catch(un){kc(t,t.return,un)}if(t===e){el=null;break}var o=t.sibling;if(null!==o){o.return=t.return,el=o;break}el=t.return}}var Sl,kl=Math.ceil,Tl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Il=x.ReactCurrentBatchConfig,jl=0,Al=null,Rl=null,Dl=0,Pl=0,Ol=ka(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,zl=null,ql=null,Bl=0,Hl=1/0,Wl=null,Kl=!1,Gl=null,Ql=null,Xl=!1,Yl=null,Jl=0,$l=0,Zl=null,ec=-1,tc=0;function nc(){return 0!==(6&jl)?Je():-1!==ec?ec:ec=Je()}function rc(e){return 0===(1&e.mode)?1:0!==(2&jl)&&0!==Dl?Dl&-Dl:null!==vi.transition?(0===tc&&(tc=pt()),tc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function ac(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(i(185));vt(e,n,r),0!==(2&jl)&&e===Al||(e===Al&&(0===(2&jl)&&(Ul|=n),4===Ll&&cc(e,Dl)),ic(e,r),1===n&&0===jl&&0===(1&t.mode)&&(Hl=Je()+500,za&&Ha()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var s=31-st(i),o=1<<s,l=a[s];-1===l?0!==(o&n)&&0===(o&r)||(a[s]=ft(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}}(e,t);var r=ht(e,e===Al?Dl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){za=!0,Ba(e)}(uc.bind(null,e)):Ba(uc.bind(null,e)),la(function(){0===(6&jl)&&Ha()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(ec=-1,tc=0,0!==(6&jl))throw Error(i(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Al?Dl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var a=jl;jl|=2;var s=gc();for(Al===e&&Dl===t||(Wl=null,Hl=Je()+500,mc(e,t));;)try{xc();break}catch(l){pc(e,l)}Ci(),Tl.current=s,jl=a,null!==Rl?t=0:(Al=null,Dl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(a=mt(e))&&(r=a,t=oc(e,a))),1===t)throw n=Ml,mc(e,0),cc(e,r),ic(e,Je()),n;if(6===t)cc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!cr(i(),a))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=yc(e,r))&&(0!==(s=mt(e))&&(r=s,t=oc(e,s))),1===t))throw n=Ml,mc(e,0),cc(e,r),ic(e,Je()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Nc(e,ql,Wl);break;case 3:if(cc(e,r),(130023424&r)===r&&10<(t=Bl+500-Je())){if(0!==ht(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nc(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ia(Nc.bind(null,e,ql,Wl),t);break}Nc(e,ql,Wl);break;case 4:if(cc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-st(r);s=1<<o,(o=t[o])>a&&(a=o),r&=~s}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ia(Nc.bind(null,e,ql,Wl),r);break}Nc(e,ql,Wl);break;default:throw Error(i(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=ql,ql=n,null!==t&&lc(t)),e}function lc(e){null===ql?ql=e:ql.push.apply(ql,e)}function cc(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&jl))throw Error(i(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,mc(e,0),cc(e,t),ic(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Nc(e,ql,Wl),ic(e,Je()),null}function dc(e,t){var n=jl;jl|=1;try{return e(t)}finally{0===(jl=n)&&(Hl=Je()+500,za&&Ha())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&jl)&&Ec();var t=jl;jl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(jl=t))&&Ha()}}function fc(){Pl=Ol.current,Ta(Ol)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,sa(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ri(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oa();break;case 3:$i(),Ta(Aa),Ta(ja),as();break;case 5:es(r);break;case 4:$i();break;case 13:case 19:Ta(ts);break;case 10:Ii(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Al=e,Rl=e=Oc(e.current,null),Dl=Pl=t,Ll=0,Ml=null,Vl=Ul=Fl=0,ql=zl=null,null!==Di){for(t=0;t<Di.length;t++)if(null!==(r=(n=Di[t]).interleaved)){n.interleaved=null;var a=r.next,i=n.pending;if(null!==i){var s=i.next;i.next=a,r.next=s}n.pending=r}Di=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(Ci(),is.current=Zs,ds){for(var r=ls.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}ds=!1}if(os=0,us=cs=ls=null,hs=!1,fs=0,Cl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Dl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=yo(o);if(null!==m){m.flags&=-257,bo(m,o,l,0,t),1&m.mode&&vo(s,u,t),c=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(c),t.updateQueue=g}else p.add(c);break e}if(0===(1&t)){vo(s,u,t),vc();break e}c=Error(i(426))}else if(si&&1&l.mode){var v=yo(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),bo(v,o,l,0,t),gi(uo(c,l));break e}}s=c=uo(c,l),4!==Ll&&(Ll=2),null===zl?zl=[s]:zl.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,po(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Ql||!Ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Bi(s,go(s,l,t));break e}}s=s.return}while(null!==s)}_c(n)}catch(x){t=x,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function gc(){var e=Tl.current;return Tl.current=Zs,null===e?Zs:e}function vc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Al||0===(268435455&Fl)&&0===(268435455&Ul)||cc(Al,Dl)}function yc(e,t){var n=jl;jl|=2;var r=gc();for(Al===e&&Dl===t||(Wl=null,mc(e,t));;)try{bc();break}catch(a){pc(e,a)}if(Ci(),jl=n,Tl.current=r,null!==Rl)throw Error(i(261));return Al=null,Dl=0,Ll}function bc(){for(;null!==Rl;)wc(Rl)}function xc(){for(;null!==Rl&&!Xe();)wc(Rl)}function wc(e){var t=Sl(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,Cl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,Pl)))return void(Rl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Nc(e,t,n){var r=bt,a=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Yl);if(0!==(6&jl))throw Error(i(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-st(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}(e,s),e===Al&&(Rl=Al=null,Dl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Ac(tt,function(){return Ec(),null})),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Il.transition,Il.transition=null;var o=bt;bt=1;var l=jl;jl|=4,Cl.current=null,function(e,t){if(na=Wt,pr(e=mr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(jt){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==a&&3!==h.nodeType||(l=o+a),h!==s||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===a&&(l=o),f===s&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ra={focusedElem:e,selectionRange:n},Wt=!1,el=t;null!==el;)if(e=(t=el).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,el=e;else for(;null!==el;){t=el;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,v=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ro(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(jt){kc(t,t.return,jt)}if(null!==(e=t.sibling)){e.return=t.return,el=e;break}el=t.return}p=rl,rl=!1}(e,n),yl(n,e),gr(ra),Wt=!!na,ra=na=null,e.current=n,xl(n,e,a),Ye(),jl=l,bt=o,Il.transition=s}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Jl=a),s=e.pendingLanes,0===s&&(Ql=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Kl)throw Kl=!1,e=Gl,Gl=null,e;0!==(1&Jl)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Zl?$l++:($l=0,Zl=e):$l=0,Ha()}(e,t,n,r)}finally{Il.transition=a,bt=r}return null}function Ec(){if(null!==Yl){var e=xt(Jl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Jl=0,0!==(6&jl))throw Error(i(331));var a=jl;for(jl|=4,el=e.current;null!==el;){var s=el,o=s.child;if(0!==(16&el.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(el=u;null!==el;){var d=el;switch(d.tag){case 0:case 11:case 15:al(8,d,s)}var h=d.child;if(null!==h)h.return=d,el=h;else for(;null!==el;){var f=(d=el).sibling,m=d.return;if(ol(d),d===u){el=null;break}if(null!==f){f.return=m,el=f;break}el=m}}}var p=s.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}el=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,el=o;else e:for(;null!==el;){if(0!==(2048&(s=el).flags))switch(s.tag){case 0:case 11:case 15:al(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,el=y;break e}el=s.return}}var b=e.current;for(el=b;null!==el;){var x=(o=el).child;if(0!==(2064&o.subtreeFlags)&&null!==x)x.return=o,el=x;else e:for(o=b;null!==el;){if(0!==(2048&(l=el).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(_){kc(l,l.return,_)}if(l===o){el=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,el=w;break e}el=l.return}}if(jl=a,Ha(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(at,e)}catch(_){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function Sc(e,t,n){e=zi(e,t=po(0,t=uo(n,t),1),1),t=nc(),null!==e&&(vt(e,1,t),ic(e,t))}function kc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ql||!Ql.has(r))){t=zi(t,e=go(t,e=uo(n,e),1),1),e=nc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=nc(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Dl&n)===n&&(4===Ll||3===Ll&&(130023424&Dl)===Dl&&500>Je()-Bl?mc(e,0):Vl|=n),ic(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=nc();null!==(e=Li(e,t))&&(vt(e,t,n),ic(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function jc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Cc(e,n)}function Ac(e,t){return Ge(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dc(e,t,n,r){return new Rc(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Dc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,a,s){var o=2;if(r=e,"function"===typeof e)Pc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Mc(n.children,a,s,t);case E:o=8,a|=8;break;case S:return(e=Dc(12,n,t,2|a)).elementType=S,e.lanes=s,e;case I:return(e=Dc(13,n,t,a)).elementType=I,e.lanes=s,e;case j:return(e=Dc(19,n,t,a)).elementType=j,e.lanes=s,e;case D:return Fc(n,a,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:o=10;break e;case T:o=9;break e;case C:o=11;break e;case A:o=14;break e;case R:o=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Dc(o,n,t,a)).elementType=e,t.type=r,t.lanes=s,t}function Mc(e,t,n,r){return(e=Dc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Dc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Dc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Dc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,a,i,s,o,l){return e=new zc(e,t,n,o,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Dc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fi(i),e}function Bc(e){if(!e)return Ia;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pa(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Pa(n))return Ma(e,n,t)}return t}function Hc(e,t,n,r,a,i,s,o,l){return(e=qc(n,r,!0,e,0,i,0,o,l)).context=Bc(null),n=e.current,(i=Vi(r=nc(),a=rc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,a),e.current.lanes=a,vt(e,a,r),ic(e,r),e}function Wc(e,t,n,r){var a=t.current,i=nc(),s=rc(a);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vi(i,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(a,t,s))&&(ac(e,a,s,i),qi(e,a,s)),s}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Aa.current)wo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),pi();break;case 5:Zi(t);break;case 1:Pa(t.type)&&Fa(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Ca(Ei,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ca(ts,1&ts.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uo(e,t,n):(Ca(ts,1&ts.current),null!==(e=Ko(e,t,n))?e.sibling:null);Ca(ts,1&ts.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ho(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ca(ts,ts.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ko(e,t,n)}(e,t,n);wo=0!==(131072&e.flags)}else wo=!1,si&&0!==(1048576&t.flags)&&ti(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var a=Da(t,ja.current);Ai(t,n),a=vs(null,t,r,e,a,n);var s=ys();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pa(r)?(s=!0,Fa(t)):s=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Fi(t),a.updater=io,t.stateNode=a,a._reactInternals=t,co(t,r,e,n),t=jo(null,t,r,!0,s,n)):(t.tag=0,si&&s&&ni(t),_o(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ro(r,e),a){case 0:t=Co(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=No(null,t,r,e,n);break e;case 14:t=Eo(null,t,r,ro(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Co(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 1:return r=t.type,a=t.pendingProps,Io(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 3:e:{if(Ao(t),null===e)throw Error(i(387));r=t.pendingProps,a=(s=t.memoizedState).element,Ui(e,t),Hi(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ro(e,t,r,n,a=uo(Error(i(423)),t));break e}if(r!==a){t=Ro(e,t,r,n,a=uo(Error(i(424)),t));break e}for(ii=da(t.stateNode.containerInfo.firstChild),ai=t,si=!0,oi=null,n=Ni(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===a){t=Ko(e,t,n);break e}_o(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&di(t),r=t.type,a=t.pendingProps,s=null!==e?e.memoizedProps:null,o=a.children,aa(r,a)?o=null:null!==s&&aa(r,s)&&(t.flags|=32),To(e,t),_o(e,t,o,n),t.child;case 6:return null===e&&di(t),null;case 13:return Uo(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=_i(t,null,r,n):_o(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,No(e,t,r,a=t.elementType===r?a:ro(r,a),n);case 7:return _o(e,t,t.pendingProps,n),t.child;case 8:case 12:return _o(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,s=t.memoizedProps,o=a.value,Ca(Ei,r._currentValue),r._currentValue=o,null!==s)if(cr(s.value,o)){if(s.children===a.children&&!Aa.current){t=Ko(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=Vi(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),ji(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(i(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ji(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}_o(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ai(t,n),r=r(a=Ri(a)),t.flags|=1,_o(e,t,r,n),t.child;case 14:return a=ro(r=t.type,t.pendingProps),Eo(e,t,r,a=ro(r.type,a),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ro(r,a),Wo(e,t),t.tag=1,Pa(r)?(e=!0,Fa(t)):e=!1,Ai(t,n),oo(t,r,a),co(t,r,a,n),jo(null,t,r,!0,e,n);case 19:return Ho(e,t,n);case 22:return ko(e,t,n)}throw Error(i(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Jc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function eu(){}function tu(e,t,n,r,a){var i=n._reactRootContainer;if(i){var s=i;if("function"===typeof a){var o=a;a=function(){var e=Kc(s);o.call(e)}}Wc(t,s,e,a)}else s=function(e,t,n,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Kc(s);i.call(e)}}var s=Hc(t,r,e,0,null,!1,0,"",eu);return e._reactRootContainer=s,e[ga]=s.current,Hr(8===e.nodeType?e.parentNode:e),hc(),s}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var o=r;r=function(){var e=Kc(l);o.call(e)}}var l=qc(e,0,!1,null,0,!1,0,"",eu);return e._reactRootContainer=l,e[ga]=l.current,Hr(8===e.nodeType?e.parentNode:e),hc(function(){Wc(t,l,n,r)}),l}(n,t,e,a,r);return Kc(s)}Jc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Wc(e,t,null,null)},Jc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc(function(){Wc(null,e,null,null)}),t[ga]=null}},Jc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&jl)&&(Hl=Je()+500,Ha()))}break;case 13:hc(function(){var t=Li(e,1);if(null!==t){var n=nc();ac(t,e,1,n)}}),Qc(e,1)}},_t=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)ac(t,e,134217728,nc());Qc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=rc(e),n=Li(e,t);if(null!==n)ac(n,e,t,nc());Qc(e,t)}},Et=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Na(r);if(!a)throw Error(i(90));G(r),$(r,a)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=dc,Ie=hc;var nu={usingClientEntryPoint:!1,Events:[wa,_a,Na,ke,Te,dc]},ru={findFiberByHostInstance:xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},au={bundleType:ru.bundleType,version:ru.version,rendererPackageName:ru.rendererPackageName,rendererConfig:ru.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:ru.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{at=iu.inject(au),it=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(i(299));var n=!1,r="",a=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,a),e[ga]=t.current,Hr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,a=!1,s="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,s,o),e[ga]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Jc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(i(200));return tu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(i(40));return!!e._reactRootContainer&&(hc(function(){tu(null,null,e,!1,function(){e._reactRootContainer=null,e[ga]=null})}),!0)},t.unstable_batchedUpdates=dc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return tu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}();var r=n(43),a=n(391);function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let a=e.charCodeAt(r);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=63&a|128):55296===(64512&a)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(a=65536+((1023&a)<<10)+(1023&e.charCodeAt(++r)),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=63&a|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=63&a|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<e.length;a+=3){const t=e[a],i=a+1<e.length,s=i?e[a+1]:0,o=a+2<e.length,l=o?e[a+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let d=(15&s)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const a=e[n++];if(a<128)t[r++]=String.fromCharCode(a);else if(a>191&&a<224){const i=e[n++];t[r++]=String.fromCharCode((31&a)<<6|63&i)}else if(a>239&&a<365){const i=((7&a)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<e.length;){const t=n[e.charAt(a++)],i=a<e.length?n[e.charAt(a)]:0;++a;const s=a<e.length?n[e.charAt(a)]:64;++a;const o=a<e.length?n[e.charAt(a)]:64;if(++a,null==t||null==i||null==s||null==o)throw new f;const l=t<<2|i>>4;if(r.push(l),64!==s){const e=i<<4&240|s>>2;if(r.push(e),64!==o){const e=s<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(e){return function(e){const t=d(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const v=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},y=e=>{var t;return null===(t=v())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},b=()=>{var e;return null===(e=v())||void 0===e?void 0:e.config},x=e=>{var t;return null===(t=v())||void 0===t?void 0:t["_".concat(e)]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function _(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function N(e){return(await fetch(e,{credentials:"include"})).ok}const E={};let S=!1;function k(e,t){if("undefined"===typeof window||"undefined"===typeof document||!_(window.location.host)||E[e]===t||E[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}E[e]=t;const r="__firebase__banner",a=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(E))E[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function s(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),s=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,s,l,n),document.body.appendChild(t)}a?(s.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",s):s()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){var e;const t=null===(e=v())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function I(){return!C()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],a=r?function(e,t){return e.replace(D,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(a," (").concat(n,").");return new A(n,i,t)}}const D=/\{\$([^}]+)}/g;function P(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const a of n){if(!r.includes(a))return!1;const n=e[a],i=t[a];if(O(n)&&O(i)){if(!P(n,i))return!1}else if(n!==i)return!1}for(const a of r)if(!n.includes(a))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function F(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),a}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function z(e){return e&&e._delegate?e._delegate:e}class q{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const B="[DEFAULT]";class H{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new w;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(r)return null;throw a}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:B})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[a,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(a)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),a=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;a.add(e),this.onInitCallbacks.set(r,a);const i=this.instances.get(r);return i&&e(i,r),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const a of n)try{a(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(a=t,a===B?void 0:a),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var a;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.component?this.component.multipleInstances?e:B:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class W{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const K=[];var G;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(G||(G={}));const Q={debug:G.DEBUG,verbose:G.VERBOSE,info:G.INFO,warn:G.WARN,error:G.ERROR,silent:G.SILENT},X=G.INFO,Y={[G.DEBUG]:"log",[G.VERBOSE]:"log",[G.INFO]:"info",[G.WARN]:"warn",[G.ERROR]:"error"},J=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Y[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var a=arguments.length,i=new Array(a>2?a-2:0),s=2;s<a;s++)i[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class ${constructor(e){this.name=e,this._logLevel=X,this._logHandler=J,this._userLogHandler=null,K.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in G))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.DEBUG,...t),this._logHandler(this,G.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.VERBOSE,...t),this._logHandler(this,G.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.INFO,...t),this._logHandler(this,G.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.WARN,...t),this._logHandler(this,G.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,G.ERROR,...t),this._logHandler(this,G.ERROR,...t)}}let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,ae=new WeakMap,ie=new WeakMap;let se={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ue(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const i=e.call(ue(this),t,...r);return re.set(i,t.sort?t.sort():[t]),ce(i)}}function le(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",a),e.removeEventListener("error",i),e.removeEventListener("abort",i)},a=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",a),e.addEventListener("error",i),e.addEventListener("abort",i)});ne.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,se):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",a),e.removeEventListener("error",i)},a=()=>{t(ce(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",a),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&te.set(t,e)}).catch(()=>{}),ie.set(t,e),t}(e);if(ae.has(e))return ae.get(e);const t=le(e);return t!==e&&(ae.set(e,t),ie.set(t,e)),t}const ue=e=>ie.get(e);const de=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],fe=new Map;function me(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fe.get(t))return fe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,a=he.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!a&&!de.includes(n))return;const i=async function(e){const t=this.transaction(e,a?"readwrite":"readonly");let i=t.store;for(var s=arguments.length,o=new Array(s>1?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),a&&t.done]))[0]};return fe.set(t,i),i}se=(e=>u(u({},e),{},{get:(t,n,r)=>me(t,n)||e.get(t,n,r),has:(t,n)=>!!me(t,n)||e.has(t,n)}))(se);class pe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ge="@firebase/app",ve="0.14.1",ye=new $("@firebase/app"),be="@firebase/app-compat",xe="@firebase/analytics-compat",we="@firebase/analytics",_e="@firebase/app-check-compat",Ne="@firebase/app-check",Ee="@firebase/auth",Se="@firebase/auth-compat",ke="@firebase/database",Te="@firebase/data-connect",Ce="@firebase/database-compat",Ie="@firebase/functions",je="@firebase/functions-compat",Ae="@firebase/installations",Re="@firebase/installations-compat",De="@firebase/messaging",Pe="@firebase/messaging-compat",Oe="@firebase/performance",Le="@firebase/performance-compat",Me="@firebase/remote-config",Fe="@firebase/remote-config-compat",Ue="@firebase/storage",Ve="@firebase/storage-compat",ze="@firebase/firestore",qe="@firebase/ai",Be="@firebase/firestore-compat",He="firebase",We="[DEFAULT]",Ke={[ge]:"fire-core",[be]:"fire-core-compat",[we]:"fire-analytics",[xe]:"fire-analytics-compat",[Ne]:"fire-app-check",[_e]:"fire-app-check-compat",[Ee]:"fire-auth",[Se]:"fire-auth-compat",[ke]:"fire-rtdb",[Te]:"fire-data-connect",[Ce]:"fire-rtdb-compat",[Ie]:"fire-fn",[je]:"fire-fn-compat",[Ae]:"fire-iid",[Re]:"fire-iid-compat",[De]:"fire-fcm",[Pe]:"fire-fcm-compat",[Oe]:"fire-perf",[Le]:"fire-perf-compat",[Me]:"fire-rc",[Fe]:"fire-rc-compat",[Ue]:"fire-gcs",[Ve]:"fire-gcs-compat",[ze]:"fire-fst",[Be]:"fire-fst-compat",[qe]:"fire-vertex","fire-js":"fire-js",[He]:"fire-js-all"},Ge=new Map,Qe=new Map,Xe=new Map;function Ye(e,t){try{e.container.addComponent(t)}catch(n){ye.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){const t=e.name;if(Xe.has(t))return ye.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);for(const n of Ge.values())Ye(n,e);for(const n of Qe.values())Ye(n,e);return!0}function $e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new R("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="12.1.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=u({name:We,automaticDataCollectionEnabled:!0},t),a=r.name;if("string"!==typeof a||!a)throw et.create("bad-app-name",{appName:String(a)});if(n||(n=b()),!n)throw et.create("no-options");const i=Ge.get(a);if(i){if(P(n,i.options)&&P(r,i.config))return i;throw et.create("duplicate-app",{appName:a})}const s=new W(a);for(const l of Xe.values())s.addComponent(l);const o=new tt(n,r,s);return Ge.set(a,o),o}function at(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;const t=Ge.get(e);if(!t&&e===We&&b())return rt();if(!t)throw et.create("no-app",{appName:e});return t}function it(e,t,n){var r;let a=null!==(r=Ke[e])&&void 0!==r?r:e;n&&(a+="-".concat(n));const i=a.match(/\s|\//),s=t.match(/\s|\//);if(i||s){const e=['Unable to register library "'.concat(a,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(a,'" contains illegal characters (whitespace or "/")')),i&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ye.warn(e.join(" "))}Je(new q("".concat(a,"-version"),()=>({library:a,version:t}),"VERSION"))}const st="firebase-heartbeat-store";let ot=null;function lt(){return ot||(ot=function(e,t){let{blocked:n,upgrade:r,blocking:a,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),o=ce(s);return r&&s.addEventListener("upgradeneeded",e=>{r(ce(s.result),e.oldVersion,e.newVersion,ce(s.transaction),e)}),n&&s.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),a&&e.addEventListener("versionchange",e=>a(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(st)}catch(n){console.warn(n)}}}).catch(e=>{throw et.create("idb-open",{originalErrorMessage:e.message})})),ot}async function ct(e,t){try{const n=(await lt()).transaction(st,"readwrite"),r=n.objectStore(st);await r.put(t,ut(e)),await n.done}catch(n){if(n instanceof A)ye.warn(n.message);else{const e=et.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ye.warn(e.message)}}}function ut(e){return"".concat(e.name,"!").concat(e.options.appId)}class dt{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ft(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ht();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ye.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ht(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const a of e){const e=n.find(e=>e.agent===a.agent);if(e){if(e.dates.push(a.date),mt(n)>t){e.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),mt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),a=m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ye.warn(t),""}}}function ht(){return(new Date).toISOString().substring(0,10)}class ft{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!j()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var e;t((null===(e=a.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await lt()).transaction(st),n=await t.objectStore(st).get(ut(e));return await t.done,n}catch(t){if(t instanceof A)ye.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ye.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ct(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function mt(e){return m(JSON.stringify({version:2,heartbeats:e})).length}var pt;pt="",Je(new q("platform-logger",e=>new pe(e),"PRIVATE")),Je(new q("heartbeat",e=>new dt(e),"PRIVATE")),it(ge,ve,pt),it(ge,ve,"esm2020"),it("fire-js","");var gt,vt,yt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},bt={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var a=0;16>a;++a)r[a]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(a=0;16>a;++a)r[a]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],a=e.g[2];var i=e.g[3],s=t+(i^n&(a^i))+r[0]+3614090360&4294967295;s=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=(n=(a=(i=(t=n+(s<<7&4294967295|s>>>25))+((s=i+(a^t&(n^a))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=a+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^a&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(a^i))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=i+(a^t&(n^a))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=a+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^a&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(a^i))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=i+(a^t&(n^a))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=a+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^a&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^n&(a^i))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=i+(a^t&(n^a))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=a+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^a&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(a^i&(n^a))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^a&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=a+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(a^i))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(a^i&(n^a))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^a&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=a+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(a^i))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(a^i&(n^a))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^a&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=a+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(a^i))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(a^i&(n^a))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=i+(n^a&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=a+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(i^t&(a^i))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^a^i)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^a)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=a+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(a^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^a^i)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^a)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=a+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(a^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^a^i)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^a)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=a+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(a^i^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^a^i)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=i+(t^n^a)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=a+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(a^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(a^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~a))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=a+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(a|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(a^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~a))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=a+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(a|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(a^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~a))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=a+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(i^(a|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((i=(t=n+((s=t+(a^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=i+(n^(t|~a))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((a=i+((s=a+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(a+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+a&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,a=e.length-1;0<=a;a--){var i=0|e[a];r&&i==t||(n[a]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,a=this.B,i=this.h,s=0;s<t;){if(0==i)for(;s<=r;)n(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(a[i++]=e.charCodeAt(s++),i==this.blockSize){n(this,a),i=0;break}}else for(;s<t;)if(a[i++]=e[s++],i==this.blockSize){n(this,a),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function i(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function s(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(s(-e));for(var t=[],n=1,a=0;e>=n;a++)t[a]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],a=0;a<t;a++)n[a]=~e.g[a];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=v(n),r=v(r);var a=y(n,1),i=y(r,1);for(r=y(r,2),n=y(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(a=a.add(n),i=c),r=y(r,1),n=y(n,1)}return t=f(e,a.j(t)),new p(a,t)}for(a=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=s(n)).j(t);d(c)||0<c.l(e);)c=(i=s(n-=r)).j(t);u(i)&&(i=l),a=a.add(i),e=f(e,c)}return new p(a,e)}function v(e){for(var t=e.g.length+1,n=[],a=0;a<t;a++)n[a]=e.i(a)<<1|e.i(a-1)>>>31;return new r(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var a=e.g.length-n,i=[],s=0;s<a;s++)i[s]=0<t?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=s(Math.pow(e,6)),n=this,r="";;){var a=g(n,t).g,i=((0<(n=f(n,a.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=a))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0,i=0;i<=t;i++){var s=a+(65535&this.i(i))+(65535&e.i(i)),o=(s>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);a=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return s(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],a=0;a<2*t;a++)n[a]=0;for(a=0;a<this.g.length;a++)for(var i=0;i<e.g.length;i++){var l=this.i(a)>>>16,f=65535&this.i(a),p=e.i(i)>>>16,g=65535&e.i(i);n[2*a+2*i]+=f*g,m(n,2*a+2*i),n[2*a+2*i+1]+=l*g,m(n,2*a+2*i+1),n[2*a+2*i+1]+=f*p,m(n,2*a+2*i+1),n[2*a+2*i+2]+=l*p,m(n,2*a+2*i+2)}for(a=0;a<t;a++)n[a]=n[2*a+1]<<16|n[2*a];for(a=t;a<2*t;a++)n[a]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)&e.i(a);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)|e.i(a);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],a=0;a<t;a++)n[a]=this.i(a)^e.i(a);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,vt=bt.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=s,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=s(Math.pow(n,8)),a=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=s(Math.pow(n,l)),a=a.j(l).add(s(c))):a=(a=a.j(r)).add(s(c))}return a},gt=bt.Integer=r}).apply("undefined"!==typeof yt?yt:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var xt,wt,_t,Nt,Et,St,kt,Tt,Ct="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},It={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ct&&Ct];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var a=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var s=e[i];if(!(s in a))break e;a=a[s]}(r=r(i=a[e=e[e.length-1]]))!=i&&null!=r&&t(a,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,a={next:function(){if(!r&&n<e.length){var a=n++;return{value:t(a,e[a]),done:!1}}return r=!0,{done:!0,value:void 0}}};return a[Symbol.iterator]=function(){return a},a}(this,function(e,t){return t})}});var r=r||{},a=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var a=Array(arguments.length-2),i=2;i<arguments.length;i++)a[i-2]=arguments[i];return t.prototype[n].apply(e,a)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let a=0;a<r;a++)e[n+a]=t[a]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function y(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,r;for(let a=1;a<arguments.length;a++){for(n in r=arguments[a],r)e[n]=r[n];for(let t=0;t<x.length;t++)n=x[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function _(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function N(e){a.setTimeout(()=>{throw e},0)}function E(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new k,e=>e.reset());class k{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=S.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=a.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){N(n)}var t=S;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function R(){this.s=this.s,this.C=this.C}function D(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}R.prototype.s=!1,R.prototype.ma=function(){this.s||(this.s=!0,this.N())},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},D.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(D.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var a=!0;break e}catch(i){}a=!1}a||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,D);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,a){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=a,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,a=e.g[n],i=Array.prototype.indexOf.call(a,t,void 0);(r=0<=i)&&Array.prototype.splice.call(a,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var a=0;a<e.length;++a){var i=e[a];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return a}return-1}z.prototype.add=function(e,t,n,r,a){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var s=B(e,t,r,a);return-1<s?(t=e[s],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,a)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),W={};function K(e,t,n,r,a){if(r&&r.once)return Q(e,t,n,r,a);if(Array.isArray(t)){for(var i=0;i<t.length;i++)K(e,t[i],n,r,a);return null}return n=te(n),e&&e[M]?e.K(t,n,s(r)?!!r.capture:!!r,a):G(e,t,n,!1,r,a)}function G(e,t,n,r,a,i){if(!t)throw Error("Invalid event type");var o=s(a)?!!a.capture:!!a,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)P||(a=o),void 0===a&&(a=!1),e.addEventListener(t.toString(),r,a);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,a){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,a);return null}return n=te(n),e&&e[M]?e.L(t,n,s(r)?!!r.capture:!!r,a):G(e,t,n,!0,r,a)}function X(e,t,n,r,a){if(Array.isArray(t))for(var i=0;i<t.length;i++)X(e,t[i],n,r,a);else r=s(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(i=e.g[t],n,r,a))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,a)),(n=-1<e?t[e]:null)&&Y(n))}function Y(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in W?W[e]:W[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&Y(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){R.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new D(t,e);else if(t instanceof D)t.target=t.target||e;else{var a=t;w(t=new D(r,e),a)}if(a=!0,n)for(var i=n.length-1;0<=i;i--){var s=t.g=n[i];a=ae(s,r,!0,t)&&a}if(a=ae(s=t.g=e,r,!0,t)&&a,a=ae(s,r,!1,t)&&a,n)for(i=0;i<n.length;i++)a=ae(s=t.g=n[i],r,!1,t)&&a}function ae(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var a=!0,i=0;i<t.length;++i){var s=t[i];if(s&&!s.da&&s.capture==n){var o=s.listener,l=s.ha||s.src;s.fa&&q(e.i,s),a=!1!==o.call(l,r)&&a}}return a&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}function se(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,se(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,R),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){X(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends R{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:se(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){R.call(this),this.h=e,this.g={}}d(le,R);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Y(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=a.JSON.stringify,he=a.JSON.parse,fe=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){D.call(this,"d")}function be(){D.call(this,"c")}d(ye,D),d(be,D);var xe={},we=null;function _e(){return we=we||new ne}function Ne(e){D.call(this,xe.La,e)}function Ee(e){const t=_e();re(t,new Ne(t))}function Se(e,t){D.call(this,xe.STAT_EVENT,e),this.stat=t}function ke(e){const t=_e();re(t,new Se(t,e))}function Te(e,t){D.call(this,xe.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var a=r[1];if(Array.isArray(a)&&!(1>a.length)){var i=a[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var s=1;s<a.length;s++)a[s]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}xe.La="serverreachability",d(Ne,D),xe.STAT_EVENT="statevent",d(Se,D),xe.Ma="timingevent",d(Te,D),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Re={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},De={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Pe(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(Pe,me),Pe.prototype.g=function(){return new XMLHttpRequest},Pe.prototype.i=function(){return{}},Ae=new Pe;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(st(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=st(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Ot(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=Nn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var a="readystatechange";Array.isArray(a)||(a&&(ce[0]=a.toString()),a=ce);for(var i=0;i<a.length;i++){var s=K(n,a[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,a,i){e.info(function(){if(e.g)if(i)for(var s="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&"type"==d[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=i;return"XMLHTTP REQ ("+r+") [attempt "+a+"]: "+t+"\n"+n+"\n"+s})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function We(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||yn(e.j,e)}function Ge(e){We(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var a=r;if(0==a[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;vn(n),on(n)}mn(n),ke(18)}}else n.za=a[1],0<n.za-n.T&&37500>a[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&vn(n),!m(t))for(a=n.Da.g.parse(t),t=0;t<a.length;t++){let c=a[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const a=c[4];null!=a&&(n.Aa=a,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var s=e;if((r=n).qa=_n(r,r.J?r.ia:null,r.W),s.K){tt(r.h,s);var o=s,l=r.L;l&&(o.I=l),o.B&&(We(o),Be(o)),r.g=s}else fn(r);0<n.i.length&&cn(n)}else"stop"!=c[0]&&"close"!=c[0]||xn(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?xn(n,7):sn(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==tn(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=tn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||nn(this.g)))){this.J||4!=h||7==t||Ee(),We(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=nn(this.g);e="";var i=r.length,s=4==tn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(s&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,a,i,s){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+a+"]: "+t+"\n"+n+"\n"+i+" "+s})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,ke(12),Ge(this),Ke(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=qe(this,o),e==Fe){4==h&&(this.s=4,ke(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,ke(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,ke(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),pn(d),d.M=!0,ke(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ge(this),this.o&&!this.J&&(4==h?yn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=tn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=_(e[r]);const a=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[a]||[];t[a]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,ke(12)):(this.s=0,ke(13)),Ge(this),Ke(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ge(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),ke(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Xe=class{constructor(e,t){this.g=e,this.map=t}};function Ye(e){this.l=e||10,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),a=r.length,s=0;s<a;s++)t.call(void 0,r[s],n&&n[s],e)}Ye.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var at=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new At;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(at))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new At(null,this.h))}function st(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof At?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Dt(this,t),Ot(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new At(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,jt)),e.join("")};var pt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,bt=/[#\?@]/g,jt=/#/g;function At(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),a=null;if(0<=r){var i=e[n].substring(0,r);a=e[n].substring(r+1)}else i=e[n];t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Dt(e,t){Rt(e),t=Lt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Pt(e,t){return Rt(e),t=Lt(e,t),e.g.has(t)}function Ot(e,t,n){Dt(e,t),0<n.length&&(e.i=null,e.g.set(Lt(e,t),h(n)),e.h+=n.length)}function Lt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,a){try{a&&(a.onload=null,a.onerror=null,a.onabort=null,a.ontimeout=null),r(n)}catch(i){}}function Ft(){this.g=new fe}function Ut(e,t,n){const r=n||"";try{rt(e,function(e,n){let a=e;s(e)&&(a=de(e)),t.push(r+n+"="+encodeURIComponent(a))})}catch(a){throw t.push(r+"type="+encodeURIComponent("_badmap")),a}}function Vt(e){this.l=e.Ub||null,this.j=e.eb||!1}function zt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Bt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Ht(e)}function Ht(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Wt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Kt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Gt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=At.prototype).add=function(e,t){Rt(this),this.i=null,e=Lt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const a=e[r];for(let e=0;e<a.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Pt(this,e)&&(t=t.concat(this.g.get(Lt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Pt(this,e=Lt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),s=this.V(r);for(r=0;r<s.length;r++){var a=i;""!==s[r]&&(a+="="+encodeURIComponent(String(s[r]))),e.push(a)}}return this.i=e.join("&")},d(Vt,me),Vt.prototype.g=function(){return new zt(this.l,this.j)},Vt.prototype.i=(pt={},function(){return pt}),d(zt,ne),(e=zt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Ht(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||a).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Bt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ht(this)),this.g&&(this.readyState=3,Ht(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Bt(this):Ht(this),3==this.readyState&&qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Bt(this))},e.Qa=function(e){this.g&&(this.response=e,Bt(this))},e.ga=function(){this.g&&Bt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(zt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Gt,ne);var Qt=/^https?$/i,Xt=["POST","PUT"];function Yt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Jt(e),Zt(e)}function Jt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function $t(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=tn(e)||2!=e.Z()))if(e.u&&4==tn(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==tn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var s=String(e.D).match(at)[1]||null;!s&&a.self&&a.self.location&&(s=a.self.location.protocol.slice(0,-1)),i=!Qt.test(s?s.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<tn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Jt(e)}}finally{Zt(e)}}}function Zt(e,t){if(e.g){en(e);const r=e.g,a=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=a}catch(n){}}}function en(e){e.I&&(a.clearTimeout(e.I),e.I=null)}function tn(e){return e.g?e.g.readyState:0}function nn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function an(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rn("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rn("baseRetryDelayMs",5e3,e),this.cb=rn("retryDelaySeedMs",1e4,e),this.Wa=rn("forwardChannelMaxRetries",2,e),this.wa=rn("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ye(e&&e.concurrentRequestLimit),this.Da=new Ft,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function sn(e){if(ln(e),3==e.G){var t=e.U++,n=st(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),dn(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(st(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Nn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}wn(e)}function on(e){e.g&&(pn(e),e.g.cancel(),e.g=null)}function ln(e){on(e),e.u&&(a.clearTimeout(e.u),e.u=null),vn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&a.clearTimeout(e.s),e.s=null)}function cn(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||j(),C||(T(),C=!0),I.add(t,e),e.B=0}}function un(e,t){var n;n=t?t.l:e.U++;const r=st(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),dn(e,r),e.m&&e.o&&Kt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=hn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function dn(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function hn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var a=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=a[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=a[o].g;const l=a[o].map;if(n-=t,0>n)t=Math.max(0,a[o].g-100),s=!1;else try{Ut(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function fn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||j(),C||(T(),C=!0),I.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),bn(e,e.v)),e.v++,!0)}function pn(e){null!=e.A&&(a.clearTimeout(e.A),e.A=null)}function gn(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=st(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),dn(e,t),e.m&&e.o&&Kt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(st(t)),n.m=null,n.P=!0,Ve(n,e)}function vn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function yn(e,t){var n=null;if(e.g==t){vn(e),pn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var a=e.B;re(r=_e(),new Te(r,n)),cn(e)}else fn(e);else if(3==(a=t.s)||0==a&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),bn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),a){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function bn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(a.Image){const r=new Image;r.onload=u(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Mt,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else ke(2);e.G=0,e.l&&e.l.sa(t),wn(e),ln(e)}function wn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function _n(e,t,n){var r=n instanceof it?st(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new it(null);r&&ot(s,r),t&&(s.g=t),i&&lt(s,i),n&&(s.l=n),r=s}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),dn(e,r),r}function Nn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Gt(new Vt({eb:n})):new Gt(e.pa)).Ha(e.J),t}function En(){}function Sn(){}function kn(e,t){ne.call(this),this.g=new an(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new In(this)}function Tn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Cn(){be.call(this),this.status=1}function In(e){this.g=e}(e=Gt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(s){return void Yt(this,s)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=a.FormData&&e instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Xt,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,o]of n)this.g.setRequestHeader(a,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{en(this),this.u=!0,this.g.send(e),this.u=!1}catch(s){Yt(this,s)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Zt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zt(this,!0)),Gt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?$t(this):this.bb())},e.bb=function(){$t(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<tn(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=an.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){ke(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=_n(this,null,this.W),cn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const a=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),w(i,this.S)):i=this.S),null!==this.m||this.O||(a.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=hn(this,a,t),ut(n=st(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),dn(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Wt(i)))+"&"+t:this.m&&Kt(n,this.m,i)),et(this.h,a),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),a.T=!0,Ue(a,n,null)):Ue(a,n,t),this.G=2}}else 3==this.G&&(e?un(this,e):0==this.i.length||Je(this.h)||un(this))},e.Fa=function(){if(this.u=null,gn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ke(10),on(this),gn(this))},e.Za=function(){null!=this.C&&(this.C=null,on(this),mn(this),ke(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),ke(2)):(this.j.info("Failed to ping google.com"),ke(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=En.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},Sn.prototype.g=function(e,t){return new kn(e,t)},d(kn,ne),kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},kn.prototype.close=function(){sn(this.g)},kn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Xe(t.Ya++,e)),3==t.G&&cn(t)},kn.prototype.N=function(){this.g.l=null,delete this.j,sn(this.g),delete this.g,kn.aa.N.call(this)},d(Tn,ye),d(Cn,be),d(In,En),In.prototype.ua=function(){re(this.g,"a")},In.prototype.ta=function(e){re(this.g,new Tn(e))},In.prototype.sa=function(e){re(this.g,new Cn)},In.prototype.ra=function(){re(this.g,"b")},Sn.prototype.createWebChannel=Sn.prototype.g,kn.prototype.send=kn.prototype.o,kn.prototype.open=kn.prototype.m,kn.prototype.close=kn.prototype.close,Tt=It.createWebChannelTransport=function(){return new Sn},kt=It.getStatEventTarget=function(){return _e()},St=It.Event=xe,Et=It.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Re.NO_ERROR=0,Re.TIMEOUT=8,Re.HTTP_ERROR=6,Nt=It.ErrorCode=Re,De.COMPLETE="complete",_t=It.EventType=De,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,wt=It.WebChannel=ge,It.FetchXmlHttpFactory=Vt,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,xt=It.XhrIo=Gt}).apply("undefined"!==typeof Ct?Ct:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const jt="@firebase/firestore",At="4.9.0";class Rt{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rt.UNAUTHENTICATED=new Rt(null),Rt.GOOGLE_CREDENTIALS=new Rt("google-credentials-uid"),Rt.FIRST_PARTY=new Rt("first-party-uid"),Rt.MOCK_USER=new Rt("mock-user");let Dt="12.0.0";const Pt=new $("@firebase/firestore");function Ot(){return Pt.logLevel}function Lt(e){if(Pt.logLevel<=G.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(Ut);Pt.debug("Firestore (".concat(Dt,"): ").concat(e),...a)}}function Mt(e){if(Pt.logLevel<=G.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(Ut);Pt.error("Firestore (".concat(Dt,"): ").concat(e),...a)}}function Ft(e){if(Pt.logLevel<=G.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const a=n.map(Ut);Pt.warn("Firestore (".concat(Dt,"): ").concat(e),...a)}}function Ut(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Vt(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,zt(e,r,n)}function zt(e,t,n){let r="FIRESTORE (".concat(Dt,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw Mt(r),new Error(r)}function qt(e,t,n,r){let a="Unexpected state";"string"==typeof n?a=n:r=n,e||zt(t,a,r)}function Bt(e,t){return e}const Ht={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Wt extends A{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Kt{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Gt{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Qt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rt.UNAUTHENTICATED))}shutdown(){}}class Xt{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yt{constructor(e){this.t=e,this.currentUser=Rt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qt(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let a=new Kt;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new Kt,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=a;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},s=e=>{Lt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>s(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Lt("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Kt)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Lt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(qt("string"==typeof t.accessToken,31837,{l:t}),new Gt(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qt(null===e||"string"==typeof e,2055,{h:e}),new Rt(e)}}class Jt{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Rt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $t{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Jt(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Rt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Zt{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class en{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qt(void 0===this.o,3512);const n=e=>{null!=e.error&&Lt("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Lt("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Lt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Lt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Zt(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(qt("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Zt(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function tn(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class nn{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=tn(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function rn(e,t){return e<t?-1:e>t?1:0}function an(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),a=t.charAt(r);if(n!==a)return ln(n)===ln(a)?rn(n,a):ln(n)?1:-1}return rn(e.length,t.length)}const sn=55296,on=57343;function ln(e){const t=e.charCodeAt(0);return t>=sn&&t<=on}function cn(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const un="__name__";class dn{constructor(e,t,n){void 0===t?t=0:t>e.length&&Vt(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Vt(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===dn.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dn?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=dn.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return rn(e.length,t.length)}static compareSegments(e,t){const n=dn.isNumericId(e),r=dn.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?dn.extractNumericId(e).compare(dn.extractNumericId(t)):an(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gt.fromString(e.substring(4,e.length-2))}}class hn extends dn{construct(e,t,n){return new hn(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n){if(a.indexOf("//")>=0)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid segment (".concat(a,"). Paths must not contain // in them."));e.push(...a.split("/").filter(e=>e.length>0))}return new hn(e)}static emptyPath(){return new hn([])}}const fn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mn extends dn{construct(e,t,n){return new mn(e,t,n)}static isValidIdentifier(e){return fn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===un}static keyField(){return new mn([un])}static fromServerFormat(e){const t=[];let n="",r=0;const a=()=>{if(0===n.length)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Wt(Ht.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Wt(Ht.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(a(),r++)}if(a(),i)throw new Wt(Ht.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mn(t)}static emptyPath(){return new mn([])}}class pn{constructor(e){this.path=e}static fromPath(e){return new pn(hn.fromString(e))}static fromName(e){return new pn(hn.fromString(e).popFirst(5))}static empty(){return new pn(hn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===hn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return hn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pn(new hn(e.slice()))}}function gn(e,t,n){if(!n)throw new Wt(Ht.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function vn(e){if(!pn.isDocumentKey(e))throw new Wt(Ht.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yn(e){if(pn.isDocumentKey(e))throw new Wt(Ht.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function bn(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function xn(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Vt(12329,{type:typeof e})}function wn(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Wt(Ht.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xn(e);throw new Wt(Ht.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function _n(e,t){const n={typeString:e};return t&&(n.value=t),n}function Nn(e,t){if(!bn(e))throw new Wt(Ht.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const a=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const s=e[r];if(a&&typeof s!==a){n="JSON field '".concat(r,"' must be a ").concat(a,".");break}if(void 0!==i&&s!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Wt(Ht.INVALID_ARGUMENT,n);return!0}const En=-62135596800,Sn=1e6;class kn{static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*Sn);return new kn(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Wt(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Wt(Ht.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<En)throw new Wt(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Wt(Ht.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sn}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:kn._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Nn(e,kn._jsonSchema))return new kn(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-En;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}kn._jsonSchemaVersion="firestore/timestamp/1.0",kn._jsonSchema={type:_n("string",kn._jsonSchemaVersion),seconds:_n("number"),nanoseconds:_n("number")};class Tn{static fromTimestamp(e){return new Tn(e)}static min(){return new Tn(new kn(0,0))}static max(){return new Tn(new kn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Cn=-1;class In{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}In.UNKNOWN_ID=-1;function jn(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,a=Tn.fromTimestamp(1e9===r?new kn(n+1,0):new kn(n,r));return new Rn(a,pn.empty(),t)}function An(e){return new Rn(e.readTime,e.key,Cn)}class Rn{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Rn(Tn.min(),pn.empty(),Cn)}static max(){return new Rn(Tn.max(),pn.empty(),Cn)}}function Dn(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pn.comparator(e.documentKey,t.documentKey),0!==n?n:rn(e.largestBatchId,t.largestBatchId))}const Pn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class On{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ln(e){if(e.code!==Ht.FAILED_PRECONDITION||e.message!==Pn)throw e;Lt("LocalStore","Unexpectedly lost primary lease")}class Mn{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Vt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Mn((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Mn?t:Mn.resolve(t)}catch(e){return Mn.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Mn.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Mn.reject(t)}static resolve(e){return new Mn((t,n)=>{t(e)})}static reject(e){return new Mn((t,n)=>{n(e)})}static waitFor(e){return new Mn((t,n)=>{let r=0,a=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++a,i&&a===r&&t()},e=>n(e))}),i=!0,a===r&&t()})}static or(e){let t=Mn.resolve(!1);for(const n of e)t=t.next(e=>e?Mn.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Mn((n,r)=>{const a=e.length,i=new Array(a);let s=0;for(let o=0;o<a;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++s,s===a&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Mn((n,r)=>{const a=()=>{!0===e()?t().next(()=>{a()},r):n()};a()})}}function Fn(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Un(e){return"IndexedDbTransactionError"===e.name}class Vn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Vn.ce=-1;const zn=-1;function qn(e){return null==e}function Bn(e){return 0===e&&1/e==-1/0}function Hn(e){return"number"==typeof e&&Number.isInteger(e)&&!Bn(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Wn="\x01";function Kn(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Qn(t)),t=Gn(e.get(n),t);return Qn(t)}function Gn(e,t){let n=t;const r=e.length;for(let a=0;a<r;a++){const t=e.charAt(a);switch(t){case"\0":n+="\x01\x10";break;case Wn:n+="\x01\x11";break;default:n+=t}}return n}function Qn(e){return e+Wn+"\x01"}const Xn="remoteDocuments",Yn="owner",Jn="mutationQueues",$n="mutations";const Zn="documentMutations",er="remoteDocumentsV14",tr="remoteDocumentGlobal",nr="targets",rr="targetDocuments",ar="targetGlobal",ir="collectionParents",sr="clientMetadata",or="bundles",lr="namedQueries",cr="indexConfiguration",ur="indexState",dr="indexEntries",hr="documentOverlays",fr="globals",mr=[Jn,$n,Zn,Xn,nr,Yn,ar,rr,sr,tr,ir,or,lr],pr=[Jn,$n,Zn,er,nr,Yn,ar,rr,sr,tr,ir,or,lr,hr],gr=pr,vr=[...gr,cr,ur,dr];function yr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function br(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function xr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class wr{constructor(e,t){this.comparator=e,this.root=t||Nr.EMPTY}insert(e,t){return new wr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Nr.BLACK,null,null))}remove(e){return new wr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _r(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _r(this.root,e,this.comparator,!1)}getReverseIterator(){return new _r(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _r(this.root,e,this.comparator,!0)}}class _r{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?n(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nr{constructor(e,t,n,r,a){this.key=e,this.value=t,this.color=null!=n?n:Nr.RED,this.left=null!=r?r:Nr.EMPTY,this.right=null!=a?a:Nr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,a){return new Nr(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const a=n(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===a?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Nr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Nr.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Vt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Vt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Vt(27949);return e+(this.isRed()?0:1)}}Nr.EMPTY=null,Nr.RED=!0,Nr.BLACK=!1,Nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Vt(57766)}get value(){throw Vt(16141)}get color(){throw Vt(16727)}get left(){throw Vt(29726)}get right(){throw Vt(36894)}copy(e,t,n,r,a){return this}insert(e,t,n){return new Nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Er{constructor(e){this.comparator=e,this.data=new wr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sr(this.data.getIterator())}getIteratorFrom(e){return new Sr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Er))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Er(this.comparator);return t.data=e,t}}class Sr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class kr{constructor(e){this.fields=e,e.sort(mn.comparator)}static empty(){return new kr([])}unionWith(e){let t=new Er(mn.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cn(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Tr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Cr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Tr("Invalid base64 string: "+e):e}}(e);return new Cr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Cr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Cr.EMPTY_BYTE_STRING=new Cr("");const Ir=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(e){if(qt(!!e,39018),"string"==typeof e){let t=0;const n=Ir.exec(e);if(qt(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ar(e.seconds),nanos:Ar(e.nanos)}}function Ar(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Rr(e){return"string"==typeof e?Cr.fromBase64String(e):Cr.fromUint8Array(e)}const Dr="server_timestamp",Pr="__type__",Or="__previous_value__",Lr="__local_write_time__";function Mr(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Pr])||void 0===t?void 0:t.stringValue)===Dr}function Fr(e){const t=e.mapValue.fields[Or];return Mr(t)?Fr(t):t}function Ur(e){const t=jr(e.mapValue.fields[Lr].timestampValue);return new kn(t.seconds,t.nanos)}class Vr{constructor(e,t,n,r,a,i,s,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=a,this.forceLongPolling=i,this.autoDetectLongPolling=s,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const zr="(default)";class qr{constructor(e,t){this.projectId=e,this.database=t||zr}static empty(){return new qr("","")}get isDefaultDatabase(){return this.database===zr}isEqual(e){return e instanceof qr&&e.projectId===this.projectId&&e.database===this.database}}const Br="__type__",Hr="__max__",Wr={mapValue:{fields:{__type__:{stringValue:Hr}}}},Kr="__vector__",Gr="value";function Qr(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Mr(e)?4:da(e)?9007199254740991:ca(e)?10:11:Vt(28295,{value:e})}function Xr(e,t){if(e===t)return!0;const n=Qr(e);if(n!==Qr(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Ur(e).isEqual(Ur(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=jr(e.timestampValue),r=jr(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Rr(e.bytesValue).isEqual(Rr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ar(e.geoPointValue.latitude)===Ar(t.geoPointValue.latitude)&&Ar(e.geoPointValue.longitude)===Ar(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ar(e.integerValue)===Ar(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ar(e.doubleValue),r=Ar(t.doubleValue);return n===r?Bn(n)===Bn(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return cn(e.arrayValue.values||[],t.arrayValue.values||[],Xr);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(yr(n)!==yr(r))return!1;for(const a in n)if(n.hasOwnProperty(a)&&(void 0===r[a]||!Xr(n[a],r[a])))return!1;return!0}(e,t);default:return Vt(52216,{left:e})}}function Yr(e,t){return void 0!==(e.values||[]).find(e=>Xr(e,t))}function Jr(e,t){if(e===t)return 0;const n=Qr(e),r=Qr(t);if(n!==r)return rn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ar(e.integerValue||e.doubleValue),r=Ar(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return $r(e.timestampValue,t.timestampValue);case 4:return $r(Ur(e),Ur(t));case 5:return an(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Rr(e),r=Rr(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let a=0;a<n.length&&a<r.length;a++){const e=rn(n[a],r[a]);if(0!==e)return e}return rn(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=rn(Ar(e.latitude),Ar(t.latitude));return 0!==n?n:rn(Ar(e.longitude),Ar(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Zr(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,a,i){const s=e.fields||{},o=t.fields||{},l=null===(n=s[Gr])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Gr])||void 0===r?void 0:r.arrayValue,u=rn((null===l||void 0===l||null===(a=l.values)||void 0===a?void 0:a.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Zr(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Wr.mapValue&&t===Wr.mapValue)return 0;if(e===Wr.mapValue)return 1;if(t===Wr.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),a=t.fields||{},i=Object.keys(a);r.sort(),i.sort();for(let s=0;s<r.length&&s<i.length;++s){const e=an(r[s],i[s]);if(0!==e)return e;const t=Jr(n[r[s]],a[i[s]]);if(0!==t)return t}return rn(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Vt(23264,{he:n})}}function $r(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return rn(e,t);const n=jr(e),r=jr(t),a=rn(n.seconds,r.seconds);return 0!==a?a:rn(n.nanos,r.nanos)}function Zr(e,t){const n=e.values||[],r=t.values||[];for(let a=0;a<n.length&&a<r.length;++a){const e=Jr(n[a],r[a]);if(e)return e}return rn(n.length,r.length)}function ea(e){return ta(e)}function ta(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=jr(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Rr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pn.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ta(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const a of t)r?r=!1:n+=",",n+="".concat(a,":").concat(ta(e.fields[a]));return n+"}"}(e.mapValue):Vt(61005,{value:e})}function na(e){switch(Qr(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Fr(e);return t?16+na(t):16;case 5:return 2*e.stringValue.length;case 6:return Rr(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+na(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return br(e.fields,(e,n)=>{t+=e.length+na(n)}),t}(e.mapValue);default:throw Vt(13486,{value:e})}}function ra(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function aa(e){return!!e&&"integerValue"in e}function ia(e){return!!e&&"arrayValue"in e}function sa(e){return!!e&&"nullValue"in e}function oa(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function la(e){return!!e&&"mapValue"in e}function ca(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Br])||void 0===t?void 0:t.stringValue)===Kr}function ua(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return br(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ua(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ua(e.arrayValue.values[n]);return t}return u({},e)}function da(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Hr}class ha{constructor(e){this.value=e}static empty(){return new ha({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!la(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(t)}setAll(e){let t=mn.emptyPath(),n={},r=[];e.forEach((e,a)=>{if(!t.isImmediateParentOf(a)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=a.popLast()}e?n[a.lastSegment()]=ua(e):r.push(a.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,n,r)}delete(e){const t=this.field(e.popLast());la(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Xr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];la(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){br(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ha(ua(this.value))}}function fa(e){const t=[];return br(e.fields,(e,n)=>{const r=new mn([e]);if(la(n)){const e=fa(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new kr(t)}class ma{constructor(e,t,n,r,a,i,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=a,this.data=i,this.documentState=s}static newInvalidDocument(e){return new ma(e,0,Tn.min(),Tn.min(),Tn.min(),ha.empty(),0)}static newFoundDocument(e,t,n,r){return new ma(e,1,t,Tn.min(),n,r,0)}static newNoDocument(e,t){return new ma(e,2,t,Tn.min(),Tn.min(),ha.empty(),0)}static newUnknownDocument(e,t){return new ma(e,3,t,Tn.min(),Tn.min(),ha.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ha.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ha.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ma&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ma(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class pa{constructor(e,t){this.position=e,this.inclusive=t}}function ga(e,t,n){let r=0;for(let a=0;a<e.position.length;a++){const i=t[a],s=e.position[a];if(r=i.field.isKeyField()?pn.comparator(pn.fromName(s.referenceValue),n.key):Jr(s,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function va(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Xr(e.position[n],t.position[n]))return!1;return!0}class ya{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ba(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class xa{}class wa extends xa{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ia(e,t,n):"array-contains"===t?new Da(e,n):"in"===t?new Pa(e,n):"not-in"===t?new Oa(e,n):"array-contains-any"===t?new La(e,n):new wa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new ja(e,n):new Aa(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Jr(t,this.value)):null!==t&&Qr(this.value)===Qr(t)&&this.matchesComparison(Jr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Vt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _a extends xa{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _a(e,t)}matches(e){return Na(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Na(e){return"and"===e.op}function Ea(e){return Sa(e)&&Na(e)}function Sa(e){for(const t of e.filters)if(t instanceof _a)return!1;return!0}function ka(e){if(e instanceof wa)return e.field.canonicalString()+e.op.toString()+ea(e.value);if(Ea(e))return e.filters.map(e=>ka(e)).join(",");{const t=e.filters.map(e=>ka(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ta(e,t){return e instanceof wa?function(e,t){return t instanceof wa&&e.op===t.op&&e.field.isEqual(t.field)&&Xr(e.value,t.value)}(e,t):e instanceof _a?function(e,t){return t instanceof _a&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Ta(n,t.filters[r]),!0)}(e,t):void Vt(19439)}function Ca(e){return e instanceof wa?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ea(e.value))}(e):e instanceof _a?function(e){return e.op.toString()+" {"+e.getFilters().map(Ca).join(" ,")+"}"}(e):"Filter"}class Ia extends wa{constructor(e,t,n){super(e,t,n),this.key=pn.fromName(n.referenceValue)}matches(e){const t=pn.comparator(e.key,this.key);return this.matchesComparison(t)}}class ja extends wa{constructor(e,t){super(e,"in",t),this.keys=Ra("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Aa extends wa{constructor(e,t){super(e,"not-in",t),this.keys=Ra("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Ra(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>pn.fromName(e.referenceValue))}class Da extends wa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ia(t)&&Yr(t.arrayValue,this.value)}}class Pa extends wa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Yr(this.value.arrayValue,t)}}class Oa extends wa{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Yr(this.value.arrayValue,t)}}class La extends wa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ia(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Yr(this.value.arrayValue,e))}}class Ma{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=a,this.startAt=i,this.endAt=s,this.Te=null}}function Fa(e){return new Ma(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ua(e){const t=Bt(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>ka(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),qn(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>ea(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>ea(e)).join(",")),t.Te=e}return t.Te}function Va(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ba(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ta(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!va(e.startAt,t.startAt)&&va(e.endAt,t.endAt)}function za(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class qa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=a,this.limitType=i,this.startAt=s,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ba(e,t,n,r,a,i,s,o){return new qa(e,t,n,r,a,i,s,o)}function Ha(e){return new qa(e)}function Wa(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ka(e){return null!==e.collectionGroup}function Ga(e){const t=Bt(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const a of t.explicitOrderBy)t.Ie.push(a),e.add(a.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Er(mn.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ya(r,n))}),e.has(mn.keyField().canonicalString())||t.Ie.push(new ya(mn.keyField(),n))}return t.Ie}function Qa(e){const t=Bt(e);return t.Ee||(t.Ee=Xa(t,Ga(e))),t.Ee}function Xa(e,t){if("F"===e.limitType)return Fa(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ya(e.field,t)});const n=e.endAt?new pa(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new pa(e.startAt.position,e.startAt.inclusive):null;return Fa(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ya(e,t){const n=e.filters.concat([t]);return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ja(e,t,n){return new qa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function $a(e,t){return Va(Qa(e),Qa(t))&&e.limitType===t.limitType}function Za(e){return"".concat(Ua(Qa(e)),"|lt:").concat(e.limitType)}function ei(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ca(e)).join(", "),"]")),qn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>ea(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>ea(e)).join(",")),"Target(".concat(t,")")}(Qa(e)),"; limitType=").concat(e.limitType,")")}function ti(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pn.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ga(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ga(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ga(e),t))&&!(e.endAt&&!function(e,t,n){const r=ga(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ga(e),t))}(e,t)}function ni(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ri(e){return(t,n)=>{let r=!1;for(const a of Ga(e)){const e=ai(a,t,n);if(0!==e)return e;r=r||a.field.isKeyField()}return 0}}function ai(e,t,n){const r=e.field.isKeyField()?pn.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),a=n.data.field(e);return null!==r&&null!==a?Jr(r,a):Vt(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Vt(19790,{direction:e.dir})}}class ii{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,a]of n)if(this.equalsFn(r,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){br(this.inner,(t,n)=>{for(const[r,a]of n)e(r,a)})}isEmpty(){return xr(this.inner)}size(){return this.innerSize}}const si=new wr(pn.comparator);function oi(){return si}const li=new wr(pn.comparator);function ci(){let e=li;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.insert(a.key,a);return e}function ui(e){let t=li;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function di(){return fi()}function hi(){return fi()}function fi(){return new ii(e=>e.toString(),(e,t)=>e.isEqual(t))}const mi=new wr(pn.comparator),pi=new Er(pn.comparator);function gi(){let e=pi;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const a of n)e=e.add(a);return e}const vi=new Er(rn);function yi(){return vi}function bi(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bn(t)?"-0":t}}function xi(e){return{integerValue:""+e}}function wi(e,t){return Hn(t)?xi(t):bi(e,t)}class _i{constructor(){this._=void 0}}function Ni(e,t,n){return e instanceof ki?function(e,t){const n={fields:{[Pr]:{stringValue:Dr},[Lr]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Mr(t)&&(t=Fr(t)),t&&(n.fields[Or]=t),{mapValue:n}}(n,t):e instanceof Ti?Ci(e,t):e instanceof Ii?ji(e,t):function(e,t){const n=Si(e,t),r=Ri(n)+Ri(e.Ae);return aa(n)&&aa(e.Ae)?xi(r):bi(e.serializer,r)}(e,t)}function Ei(e,t,n){return e instanceof Ti?Ci(e,t):e instanceof Ii?ji(e,t):n}function Si(e,t){return e instanceof Ai?function(e){return aa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class ki extends _i{}class Ti extends _i{constructor(e){super(),this.elements=e}}function Ci(e,t){const n=Di(t);for(const r of e.elements)n.some(e=>Xr(e,r))||n.push(r);return{arrayValue:{values:n}}}class Ii extends _i{constructor(e){super(),this.elements=e}}function ji(e,t){let n=Di(t);for(const r of e.elements)n=n.filter(e=>!Xr(e,r));return{arrayValue:{values:n}}}class Ai extends _i{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ri(e){return Ar(e.integerValue||e.doubleValue)}function Di(e){return ia(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pi{constructor(e,t){this.version=e,this.transformResults=t}}class Oi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Oi}static exists(e){return new Oi(void 0,e)}static updateTime(e){return new Oi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Li(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mi{}function Fi(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Qi(e.key,Oi.none()):new Bi(e.key,e.data,Oi.none());{const n=e.data,r=ha.empty();let a=new Er(mn.comparator);for(let e of t.fields)if(!a.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),a=a.add(e)}return new Hi(e.key,r,new kr(a.toArray()),Oi.none())}}function Ui(e,t,n){e instanceof Bi?function(e,t,n){const r=e.value.clone(),a=Ki(e.fieldTransforms,t,n.transformResults);r.setAll(a),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Hi?function(e,t,n){if(!Li(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ki(e.fieldTransforms,t,n.transformResults),a=t.data;a.setAll(Wi(e)),a.setAll(r),t.convertToFoundDocument(n.version,a).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vi(e,t,n,r){return e instanceof Bi?function(e,t,n,r){if(!Li(e.precondition,t))return n;const a=e.value.clone(),i=Gi(e.fieldTransforms,r,t);return a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null}(e,t,n,r):e instanceof Hi?function(e,t,n,r){if(!Li(e.precondition,t))return n;const a=Gi(e.fieldTransforms,r,t),i=t.data;return i.setAll(Wi(e)),i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Li(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zi(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),a=Si(r.transform,e||null);null!=a&&(null===n&&(n=ha.empty()),n.set(r.field,a))}return n||null}function qi(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&cn(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ti&&t instanceof Ti||e instanceof Ii&&t instanceof Ii?cn(e.elements,t.elements,Xr):e instanceof Ai&&t instanceof Ai?Xr(e.Ae,t.Ae):e instanceof ki&&t instanceof ki}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Bi extends Mi{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Hi extends Mi{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Wi(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ki(e,t,n){const r=new Map;qt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let a=0;a<n.length;a++){const i=e[a],s=i.transform,o=t.data.field(i.field);r.set(i.field,Ei(s,o,n[a]))}return r}function Gi(e,t,n){const r=new Map;for(const a of e){const e=a.transform,i=n.data.field(a.field);r.set(a.field,Ni(e,i,t))}return r}class Qi extends Mi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Xi extends Mi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Yi{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ui(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vi(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vi(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=hi();return this.mutations.forEach(r=>{const a=e.get(r.key),i=a.overlayedDocument;let s=this.applyToLocalView(i,a.mutatedFields);s=t.has(r.key)?null:s;const o=Fi(i,s);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(Tn.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gi())}isEqual(e){return this.batchId===e.batchId&&cn(this.mutations,e.mutations,(e,t)=>qi(e,t))&&cn(this.baseMutations,e.baseMutations,(e,t)=>qi(e,t))}}class Ji{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){qt(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=mi;const a=e.mutations;for(let i=0;i<a.length;i++)r=r.insert(a[i].key,n[i].version);return new Ji(e,t,n,r)}}class $i{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Zi{constructor(e,t){this.count=e,this.unchangedNames=t}}var es,ts;function ns(e){switch(e){case Ht.OK:return Vt(64938);case Ht.CANCELLED:case Ht.UNKNOWN:case Ht.DEADLINE_EXCEEDED:case Ht.RESOURCE_EXHAUSTED:case Ht.INTERNAL:case Ht.UNAVAILABLE:case Ht.UNAUTHENTICATED:return!1;case Ht.INVALID_ARGUMENT:case Ht.NOT_FOUND:case Ht.ALREADY_EXISTS:case Ht.PERMISSION_DENIED:case Ht.FAILED_PRECONDITION:case Ht.ABORTED:case Ht.OUT_OF_RANGE:case Ht.UNIMPLEMENTED:case Ht.DATA_LOSS:return!0;default:return Vt(15467,{code:e})}}function rs(e){if(void 0===e)return Mt("GRPC error has no .code"),Ht.UNKNOWN;switch(e){case es.OK:return Ht.OK;case es.CANCELLED:return Ht.CANCELLED;case es.UNKNOWN:return Ht.UNKNOWN;case es.DEADLINE_EXCEEDED:return Ht.DEADLINE_EXCEEDED;case es.RESOURCE_EXHAUSTED:return Ht.RESOURCE_EXHAUSTED;case es.INTERNAL:return Ht.INTERNAL;case es.UNAVAILABLE:return Ht.UNAVAILABLE;case es.UNAUTHENTICATED:return Ht.UNAUTHENTICATED;case es.INVALID_ARGUMENT:return Ht.INVALID_ARGUMENT;case es.NOT_FOUND:return Ht.NOT_FOUND;case es.ALREADY_EXISTS:return Ht.ALREADY_EXISTS;case es.PERMISSION_DENIED:return Ht.PERMISSION_DENIED;case es.FAILED_PRECONDITION:return Ht.FAILED_PRECONDITION;case es.ABORTED:return Ht.ABORTED;case es.OUT_OF_RANGE:return Ht.OUT_OF_RANGE;case es.UNIMPLEMENTED:return Ht.UNIMPLEMENTED;case es.DATA_LOSS:return Ht.DATA_LOSS;default:return Vt(39323,{code:e})}}(ts=es||(es={}))[ts.OK=0]="OK",ts[ts.CANCELLED=1]="CANCELLED",ts[ts.UNKNOWN=2]="UNKNOWN",ts[ts.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ts[ts.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ts[ts.NOT_FOUND=5]="NOT_FOUND",ts[ts.ALREADY_EXISTS=6]="ALREADY_EXISTS",ts[ts.PERMISSION_DENIED=7]="PERMISSION_DENIED",ts[ts.UNAUTHENTICATED=16]="UNAUTHENTICATED",ts[ts.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ts[ts.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ts[ts.ABORTED=10]="ABORTED",ts[ts.OUT_OF_RANGE=11]="OUT_OF_RANGE",ts[ts.UNIMPLEMENTED=12]="UNIMPLEMENTED",ts[ts.INTERNAL=13]="INTERNAL",ts[ts.UNAVAILABLE=14]="UNAVAILABLE",ts[ts.DATA_LOSS=15]="DATA_LOSS";let as=null;function is(){return new TextEncoder}const ss=new gt([4294967295,4294967295],0);function os(e){const t=is().encode(e),n=new vt;return n.update(t),new Uint8Array(n.digest())}function ls(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),a=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new gt([n,r],0),new gt([a,i],0)]}class cs{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new us("Invalid padding: ".concat(t));if(n<0)throw new us("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new us("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new us("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=gt.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(gt.fromNumber(n)));return 1===r.compare(ss)&&(r=new gt([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=os(e),[n,r]=ls(t);for(let a=0;a<this.hashCount;a++){const e=this.ye(n,r,a);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),i=new cs(a,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=os(e),[n,r]=ls(t);for(let a=0;a<this.hashCount;a++){const e=this.ye(n,r,a);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ds{constructor(e,t,n,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,hs.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ds(Tn.min(),r,new wr(rn),oi(),gi())}}class hs{constructor(e,t,n,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new hs(n,t,gi(),gi(),gi())}}class fs{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class ms{constructor(e,t){this.targetId=e,this.Ce=t}}class ps{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cr.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class gs{constructor(){this.ve=0,this.Fe=bs(),this.Me=Cr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gi(),t=gi(),n=gi();return this.Fe.forEach((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Vt(38017,{changeType:a})}}),new hs(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=bs()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vs{constructor(e){this.Ge=e,this.ze=new Map,this.je=oi(),this.Je=ys(),this.He=ys(),this.Ye=new wr(rn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Vt(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(za(i))if(0===n){const e=new pn(i.path);this.et(t,e,ma.newNoDocument(e,Tn.min()))}else qt(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var a;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(a=as)||void 0===a||a.lt(function(e,t,n,r,a,i,s,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===a,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(s=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==s?s:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:a=0}=t;let i,s;try{i=Rr(n).toUint8Array()}catch(e){if(e instanceof Tr)return Ft("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new cs(i,r,a)}catch(e){return Ft(e instanceof us?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.ge?null:s}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const a=this.Ge.ht(),i="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const a=this.ot(r);if(a){if(n.current&&za(a.target)){const t=new pn(a.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ma.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=gi();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ds(e,t,this.Ye,this.je,n);return this.je=oi(),this.Je=ys(),this.He=ys(),this.Ye=new wr(rn),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new gs,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Er(rn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Er(rn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Lt("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new gs),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ys(){return new wr(pn.comparator)}function bs(){return new wr(pn.comparator)}const xs={asc:"ASCENDING",desc:"DESCENDING"},ws={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_s={and:"AND",or:"OR"};class Ns{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Es(e,t){return e.useProto3Json||qn(t)?t:{value:t}}function Ss(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ks(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ts(e,t){return Ss(e,t.toTimestamp())}function Cs(e){return qt(!!e,49232),Tn.fromTimestamp(function(e){const t=jr(e);return new kn(t.seconds,t.nanos)}(e))}function Is(e,t){return js(e,t).canonicalString()}function js(e,t){const n=function(e){return new hn(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function As(e){const t=hn.fromString(e);return qt(Js(t),10190,{key:t.toString()}),t}function Rs(e,t){return Is(e.databaseId,t.path)}function Ds(e,t){const n=As(t);if(n.get(1)!==e.databaseId.projectId)throw new Wt(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Wt(Ht.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pn(Ms(n))}function Ps(e,t){return Is(e.databaseId,t)}function Os(e){const t=As(e);return 4===t.length?hn.emptyPath():Ms(t)}function Ls(e){return new hn(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ms(e){return qt(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Fs(e,t,n){return{name:Rs(e,t),fields:n.value.mapValue.fields}}function Us(e,t){let n;if(t instanceof Bi)n={update:Fs(e,t.key,t.value)};else if(t instanceof Qi)n={delete:Rs(e,t.key)};else if(t instanceof Hi)n={update:Fs(e,t.key,t.data),updateMask:Ys(t.fieldMask)};else{if(!(t instanceof Xi))return Vt(16599,{Vt:t.type});n={verify:Rs(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ki)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ti)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ii)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ai)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Vt(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ts(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Vt(27497)}(e,t.precondition)),n}function Vs(e,t){return{documents:[Ps(e,t.path)]}}function zs(e,t){const n={structuredQuery:{}},r=t.path;let a;null!==t.collectionGroup?(a=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ps(e,a);const i=function(e){if(0!==e.length)return Xs(_a.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Gs(e.field),direction:Hs(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Es(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:a}}function qs(e){let t=Os(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let a=null;if(r>0){qt(1===r,65062);const e=n.from[0];e.allDescendants?a=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Bs(e);return t instanceof _a&&Ea(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map(e=>function(e){return new ya(Qs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,qn(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new pa(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new pa(n,t)}(n.endAt)),Ba(t,a,s,i,o,"F",l,c)}function Bs(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Qs(e.unaryFilter.field);return wa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Qs(e.unaryFilter.field);return wa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Qs(e.unaryFilter.field);return wa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Qs(e.unaryFilter.field);return wa.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Vt(61313);default:return Vt(60726)}}(e):void 0!==e.fieldFilter?function(e){return wa.create(Qs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Vt(58110);default:return Vt(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return _a.create(e.compositeFilter.filters.map(e=>Bs(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Vt(1026)}}(e.compositeFilter.op))}(e):Vt(30097,{filter:e})}function Hs(e){return xs[e]}function Ws(e){return ws[e]}function Ks(e){return _s[e]}function Gs(e){return{fieldPath:e.canonicalString()}}function Qs(e){return mn.fromServerFormat(e.fieldPath)}function Xs(e){return e instanceof wa?function(e){if("=="===e.op){if(oa(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NAN"}};if(sa(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(oa(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NAN"}};if(sa(e.value))return{unaryFilter:{field:Gs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(e.field),op:Ws(e.op),value:e.value}}}(e):e instanceof _a?function(e){const t=e.getFilters().map(e=>Xs(e));return 1===t.length?t[0]:{compositeFilter:{op:Ks(e.op),filters:t}}}(e):Vt(54877,{filter:e})}function Ys(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Js(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $s{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tn.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tn.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Cr.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=s,this.expectedCount=o}withSequenceNumber(e){return new $s(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $s(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Zs{constructor(e){this.yt=e}}function eo(e){const t=qs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ja(t,t.limit,"L"):t}class to{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ar(e.integerValue));else if("doubleValue"in e){const n=Ar(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Bn(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=jr(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Rr(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?da(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ca(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Vt(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const a=Gr,i=(null===(n=r[a].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Ar(i)),this.Ot(a,t),this.Ct(r[a],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),pn.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}to.Kt=new to;class no{constructor(){this.Cn=new ro}addToCollectionParentIndex(e,t){return this.Cn.add(t),Mn.resolve()}getCollectionParents(e,t){return Mn.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Mn.resolve()}deleteFieldIndex(e,t){return Mn.resolve()}deleteAllFieldIndexes(e){return Mn.resolve()}createTargetIndexes(e,t){return Mn.resolve()}getDocumentsMatchingTarget(e,t){return Mn.resolve(null)}getIndexType(e,t){return Mn.resolve(0)}getFieldIndexes(e,t){return Mn.resolve([])}getNextCollectionGroupToUpdate(e){return Mn.resolve(null)}getMinOffset(e,t){return Mn.resolve(Rn.min())}getMinOffsetFromCollectionGroup(e,t){return Mn.resolve(Rn.min())}updateCollectionGroup(e,t,n){return Mn.resolve()}updateIndexEntries(e,t){return Mn.resolve()}}class ro{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Er(hn.comparator),a=!r.has(n);return this.index[t]=r.add(n),a}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Er(hn.comparator)).toArray()}}new Uint8Array(0);const ao={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},io=41943040;class so{static withCacheSize(e){return new so(e,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(io,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);class oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oo(0)}static cr(){return new oo(-1)}}const lo="LruGarbageCollector",co=1048576;function uo(e,t){let[n,r]=e,[a,i]=t;const s=rn(n,a);return 0===s?rn(r,i):s}class ho{constructor(e){this.Ir=e,this.buffer=new Er(uo),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();uo(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class fo{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Lt(lo,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Un(e)?Lt(lo,"Ignoring IndexedDB error during garbage collection: ",e):await Ln(e)}await this.Vr(3e5)})}}class mo{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Mn.resolve(Vn.ce);const n=new ho(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; disabled"),Mn.resolve(ao)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Lt("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ao):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,a,i,s,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Lt("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,s=Date.now(),this.removeTargets(e,n,t))).next(t=>(a=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ot()<=G.DEBUG&&Lt("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(s-i)+"ms\n"+"\tRemoved ".concat(a," targets in ")+(o-s)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Mn.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:e})))}}function po(e,t){return new mo(e,t)}class go{constructor(){this.changes=new ii(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ma.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Mn.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yo{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vi(n.mutation,e,kr.empty(),kn.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,gi()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gi();const r=di();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ci();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=di();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,gi()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let a=oi();const i=fi(),s=fi();return t.forEach((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof Hi)?a=a.insert(t.key,t):void 0!==s?(i.set(t.key,s.mutation.getFieldMask()),Vi(s.mutation,t,s.mutation.getFieldMask(),kn.now())):i.set(t.key,kr.empty())}),this.recalculateAndSaveOverlays(e,a).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return s.set(e,new vo(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),s))}recalculateAndSaveOverlays(e,t){const n=fi();let r=new wr((e,t)=>e-t),a=gi();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const a of e)a.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let s=n.get(e)||kr.empty();s=a.applyToLocalView(i,s),n.set(e,s);const o=(r.get(a.batchId)||gi()).add(e);r=r.insert(a.batchId,o)})}).next(()=>{const i=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),o=r.key,l=r.value,c=hi();l.forEach(e=>{if(!a.has(e)){const r=Fi(t.get(e),n.get(e));null!==r&&c.set(e,r),a=a.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Mn.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pn.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ka(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(a=>{const i=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Mn.resolve(di());let s=Cn,o=a;return i.next(t=>Mn.forEach(t,(t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),a.get(t)?Mn.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,a)).next(()=>this.computeViews(e,o,t,gi())).next(e=>({batchId:s,changes:ui(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pn(t)).next(e=>{let t=ci();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const a=t.collectionGroup;let i=ci();return this.indexManager.getCollectionParents(e,a).next(s=>Mn.forEach(s,s=>{const o=function(e,t){return new qa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(a));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(a=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,a,r))).next(e=>{a.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ma.newInvalidDocument(r)))});let n=ci();return e.forEach((e,r)=>{const i=a.get(e);void 0!==i&&Vi(i.mutation,r,kr.empty(),kn.now()),ti(t,r)&&(n=n.insert(e,r))}),n})}}class bo{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Mn.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Cs(e.createTime)}}(t)),Mn.resolve()}getNamedQuery(e,t){return Mn.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:eo(e.bundledQuery),readTime:Cs(e.readTime)}}(t)),Mn.resolve()}}class xo{constructor(){this.overlays=new wr(pn.comparator),this.qr=new Map}getOverlay(e,t){return Mn.resolve(this.overlays.get(t))}getOverlays(e,t){const n=di();return Mn.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Mn.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Mn.resolve()}getOverlaysForCollection(e,t,n){const r=di(),a=t.length+1,i=new pn(t.child("")),s=this.overlays.getIteratorFrom(i);for(;s.hasNext();){const e=s.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===a&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Mn.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let a=new wr((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=a.get(e.largestBatchId);null===t&&(t=di(),a=a.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=di(),o=a.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>s.set(e,t)),!(s.size()>=r)););return Mn.resolve(s)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $i(t,n));let a=this.qr.get(t);void 0===a&&(a=gi(),this.qr.set(t,a)),this.qr.set(t,a.add(n.key))}}class wo{constructor(){this.sessionToken=Cr.EMPTY_BYTE_STRING}getSessionToken(e){return Mn.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Mn.resolve()}}class _o{constructor(){this.Qr=new Er(No.$r),this.Ur=new Er(No.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new No(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new No(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new pn(new hn([])),n=new No(t,e),r=new No(t,e+1),a=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),a.push(e.key)}),a}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new pn(new hn([])),n=new No(t,e),r=new No(t,e+1);let a=gi();return this.Ur.forEachInRange([n,r],e=>{a=a.add(e.key)}),a}containsKey(e){const t=new No(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class No{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return pn.comparator(e.key,t.key)||rn(e.Yr,t.Yr)}static Kr(e,t){return rn(e.Yr,t.Yr)||pn.comparator(e.key,t.key)}}class Eo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Er(No.$r)}checkEmpty(e){return Mn.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Yi(a,t,n,r);this.mutationQueue.push(i);for(const s of r)this.Zr=this.Zr.add(new No(s.key,a)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return Mn.resolve(i)}lookupMutationBatch(e,t){return Mn.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),a=r<0?0:r;return Mn.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Mn.resolve(0===this.mutationQueue.length?zn:this.tr-1)}getAllMutationBatches(e){return Mn.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new No(t,0),r=new No(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);a.push(t)}),Mn.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Er(rn);return t.forEach(e=>{const t=new No(e,0),r=new No(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Mn.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let a=n;pn.isDocumentKey(a)||(a=a.child(""));const i=new No(new pn(a),0);let s=new Er(rn);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.Yr)),!0)},i),Mn.resolve(this.ti(s))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){qt(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Mn.forEach(t.mutations,r=>{const a=new No(r.key,t.batchId);return n=n.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new No(t,0),r=this.Zr.firstAfterOrEqual(n);return Mn.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Mn.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class So{constructor(e){this.ri=e,this.docs=new wr(pn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),a=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-a,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Mn.resolve(n?n.document.mutableCopy():ma.newInvalidDocument(t))}getEntries(e,t){let n=oi();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ma.newInvalidDocument(e))}),Mn.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let a=oi();const i=t.path,s=new pn(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(s);for(;o.hasNext();){const{key:e,value:{document:s}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Dn(An(s),n)<=0||(r.has(s.key)||ti(t,s))&&(a=a.insert(s.key,s.mutableCopy()))}return Mn.resolve(a)}getAllFromCollectionGroup(e,t,n,r){Vt(9500)}ii(e,t){return Mn.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ko(this)}getSize(e){return Mn.resolve(this.size)}}class ko extends go{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Mn.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class To{constructor(e){this.persistence=e,this.si=new ii(e=>Ua(e),Va),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.oi=0,this._i=new _o,this.targetCount=0,this.ai=oo.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Mn.resolve()}getLastRemoteSnapshotVersion(e){return Mn.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Mn.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Mn.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Mn.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Mn.resolve()}updateTargetData(e,t){return this.Pr(t),Mn.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Mn.resolve()}removeTargets(e,t,n){let r=0;const a=[];return this.si.forEach((i,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.si.delete(i),a.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)}),Mn.waitFor(a).next(()=>r)}getTargetCount(e){return Mn.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Mn.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Mn.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach(t=>{a.push(r.markPotentiallyOrphaned(e,t))}),Mn.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Mn.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Mn.resolve(n)}containsKey(e,t){return Mn.resolve(this._i.containsKey(t))}}class Co{constructor(e,t){this.ui={},this.overlays={},this.ci=new Vn(0),this.li=!1,this.li=!0,this.hi=new wo,this.referenceDelegate=e(this),this.Pi=new To(this),this.indexManager=new no,this.remoteDocumentCache=function(e){return new So(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Zs(t),this.Ii=new bo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new xo,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Eo(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Lt("MemoryPersistence","Starting transaction:",e);const r=new Io(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Mn.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Io extends On{constructor(e){super(),this.currentSequenceNumber=e}}class jo{constructor(e){this.persistence=e,this.Ri=new _o,this.Vi=null}static mi(e){return new jo(e)}get fi(){if(this.Vi)return this.Vi;throw Vt(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Mn.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Mn.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Mn.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Mn.forEach(this.fi,n=>{const r=pn.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,Tn.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Mn.or([()=>Mn.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ao{constructor(e,t){this.persistence=e,this.pi=new ii(e=>Kn(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=po(this,t)}static mi(e,t){return new Ao(e,t)}Ei(){}di(e){return Mn.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Mn.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Mn.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,a.removeEntry(r,Tn.min()))})).next(()=>a.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Mn.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Mn.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Mn.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Mn.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=na(e.data.value)),t}br(e,t,n){return Mn.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Mn.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ro{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=gi(),r=gi();for(const a of t.docChanges)switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new Ro(e,t.fromCache,n,r)}}class Do{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Po{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=I()?8:Fn(T())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const a={result:null};return this.ys(e,t).next(e=>{a.result=e}).next(()=>{if(!a.result)return this.ws(e,t,r,n).next(e=>{a.result=e})}).next(()=>{if(a.result)return;const n=new Do;return this.Ss(e,t,n).next(r=>{if(a.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>a.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ot()<=G.DEBUG&&Lt("QueryEngine","SDK will not create cache indexes for query:",ei(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Mn.resolve()):(Ot()<=G.DEBUG&&Lt("QueryEngine","Query:",ei(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ot()<=G.DEBUG&&Lt("QueryEngine","The SDK decides to create cache indexes for query:",ei(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qa(t))):Mn.resolve())}ys(e,t){if(Wa(t))return Mn.resolve(null);let n=Qa(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Ja(t,null,"F"),n=Qa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const a=gi(...r);return this.ps.getDocuments(e,a).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,a,n.readTime)?this.ys(e,Ja(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Wa(t)||r.isEqual(Tn.min())?Mn.resolve(null):this.ps.getDocuments(e,n).next(a=>{const i=this.Ds(t,a);return this.Cs(t,i,n,r)?Mn.resolve(null):(Ot()<=G.DEBUG&&Lt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ei(t)),this.vs(e,i,t,jn(r,Cn)).next(e=>e))})}Ds(e,t){let n=new Er(ri(e));return t.forEach((t,r)=>{ti(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,n){return Ot()<=G.DEBUG&&Lt("QueryEngine","Using full collection scan to execute query:",ei(t)),this.ps.getDocumentsMatchingQuery(e,t,Rn.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Oo="LocalStore";class Lo{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new wr(rn),this.xs=new ii(e=>Ua(e),Va),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yo(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function Mo(e,t,n,r){return new Lo(e,t,n,r)}async function Fo(e,t){const n=Bt(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(a=>(r=a,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const a=[],i=[];let s=gi();for(const e of r){a.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next(e=>({Ls:e,removedBatchIds:a,addedBatchIds:i}))})})}function Uo(e){const t=Bt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Vo(e,t,n){let r=gi(),a=gi();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=oi();return n.forEach((n,i)=>{const s=e.get(n);i.isFoundDocument()!==s.isFoundDocument()&&(a=a.add(n)),i.isNoDocument()&&i.version.isEqual(Tn.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!s.isValidDocument()||i.version.compareTo(s.version)>0||0===i.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Lt(Oo,"Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",i.version)}),{ks:r,qs:a}})}function zo(e,t){const n=Bt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=zn),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function qo(e,t){const n=Bt(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(a=>a?(r=a,Mn.resolve(r)):n.Pi.allocateTargetId(e).next(a=>(r=new $s(t,a,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Bo(e,t,n){const r=Bt(e),a=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,a))}catch(e){if(!Un(e))throw e;Lt(Oo,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(a.target)}function Ho(e,t,n){const r=Bt(e);let a=Tn.min(),i=gi();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Bt(e),a=r.xs.get(n);return void 0!==a?Mn.resolve(r.Ms.get(a)):r.Pi.getTargetData(t,n)}(r,e,Qa(t)).next(t=>{if(t)return a=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?a:Tn.min(),n?i:gi())).next(e=>(Wo(r,ni(t),e),{documents:e,Qs:i})))}function Wo(e,t,n){let r=e.Os.get(t)||Tn.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Ko{constructor(){this.activeTargetIds=yi()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Go{constructor(){this.Mo=new Ko,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ko,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Qo{Oo(e){}shutdown(){}}const Xo="ConnectivityMonitor";class Yo{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Lt(Xo,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Lt(Xo,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Jo=null;function $o(){return null===Jo?Jo=268435456+Math.round(2147483648*Math.random()):Jo++,"0x"+Jo.toString(16)}const Zo="RestConnection",el={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class tl{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===zr?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,a){const i=$o(),s=this.zo(e,t.toUriEncodedString());Lt(Zo,"Sending RPC '".concat(e,"' ").concat(i,":"),s,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,a);const{host:l}=new URL(s),c=_(l);return this.Jo(e,s,o,n,c).then(t=>(Lt(Zo,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Ft(Zo,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",s,"request:",n),t})}Ho(e,t,n,r,a,i){return this.Go(e,t,n,r,a)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Dt,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=el[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class nl{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const rl="WebChannelConnection";class al extends tl{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,a){const i=$o();return new Promise((a,s)=>{const o=new xt;o.setWithCredentials(!0),o.listenOnce(_t.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Nt.NO_ERROR:const n=o.getResponseJson();Lt(rl,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),a(n);break;case Nt.TIMEOUT:Lt(rl,"RPC '".concat(e,"' ").concat(i," timed out")),s(new Wt(Ht.DEADLINE_EXCEEDED,"Request time out"));break;case Nt.HTTP_ERROR:const r=o.getStatus();if(Lt(rl,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ht).indexOf(t)>=0?t:Ht.UNKNOWN}(n.status);s(new Wt(e,n.message))}else s(new Wt(Ht.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Wt(Ht.UNAVAILABLE,"Connection failed."));break;default:Vt(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Lt(rl,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Lt(rl,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=$o(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Tt(),s=kt(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=a.join("");Lt(rl,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new nl({Yo:t=>{h?Lt(rl,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Lt(rl,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Lt(rl,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,wt.EventType.OPEN,()=>{h||(Lt(rl,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,wt.EventType.CLOSE,()=>{h||(h=!0,Lt(rl,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,wt.EventType.ERROR,t=>{h||(h=!0,Ft(rl,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Wt(Ht.UNAVAILABLE,"The operation could not be completed")))}),m(u,wt.EventType.MESSAGE,t=>{if(!h){var n;const a=t.data[0];qt(!!a,16349);const i=a,s=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(s){Lt(rl,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=es[e];if(void 0!==t)return rs(t)}(t),a=s.message;void 0===n&&(n=Ht.INTERNAL,a="Unknown error status: "+t+" with message "+s.message),h=!0,f.a_(new Wt(n,a)),u.close()}else Lt(rl,"RPC '".concat(e,"' stream ").concat(r," received:"),a),f.u_(a)}}),m(s,St.STAT_EVENT,t=>{t.stat===Et.PROXY?Lt(rl,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Et.NOPROXY&&Lt(rl,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function il(){return"undefined"!=typeof document?document:null}function sl(e){return new Ns(e,!0)}class ol{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Lt("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ll="PersistentStream";class cl{constructor(e,t,n,r,a,i,s,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=a,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=s,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ol(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ht.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ht.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Wt(Ht.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Lt(ll,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Lt(ll,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ul extends cl{constructor(e,t,n,r,a,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Vt(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(qt(void 0===t||"string"==typeof t,58123),Cr.fromBase64String(t||"")):(qt(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Cr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,o=s&&function(e){const t=void 0===e.code?Ht.UNKNOWN:rs(e.code);return new Wt(t,e.message||"")}(s);n=new ps(r,a,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const a=Ds(e,r.document.name),i=Cs(r.document.updateTime),s=r.document.createTime?Cs(r.document.createTime):Tn.min(),o=new ha({mapValue:{fields:r.document.fields}}),l=ma.newFoundDocument(a,i,s,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new fs(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const a=Ds(e,r.document),i=r.readTime?Cs(r.readTime):Tn.min(),s=ma.newNoDocument(a,i),o=r.removedTargetIds||[];n=new fs([],o,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const a=Ds(e,r.document),i=r.removedTargetIds||[];n=new fs([],i,a,null)}else{if(!("filter"in t))return Vt(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:a}=e,i=new Zi(r,a),s=e.targetId;n=new ms(s,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tn.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tn.min():t.readTime?Cs(t.readTime):Tn.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Ls(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=za(r)?{documents:Vs(e,r)}:{query:zs(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ks(e,t.resumeToken);const r=Es(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Tn.min())>0){n.readTime=Ss(e,t.snapshotVersion.toTimestamp());const r=Es(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Vt(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Ls(this.serializer),t.removeTarget=e,this.q_(t)}}class dl extends cl{constructor(e,t,n,r,a,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qt(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){qt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(qt(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Cs(e.updateTime):Cs(t);return n.isEqual(Tn.min())&&(n=Cs(t)),new Pi(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Cs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Ls(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Us(this.serializer,e))};this.q_(t)}}class hl{}class fl extends hl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Wt(Ht.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(a=>{let[i,s]=a;return this.connection.Go(e,js(t,n),r,i,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wt(Ht.UNKNOWN,e.toString())})}Ho(e,t,n,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,o]=i;return this.connection.Ho(e,js(t,n),r,s,o,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ht.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Wt(Ht.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ml{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(Mt(t),this.aa=!1):Lt("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const pl="RemoteStore";class gl{constructor(e,t,n,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Sl(this)&&(Lt(pl,"Restarting streams for network reachability change."),await async function(e){const t=Bt(e);t.Ea.add(4),await yl(t),t.Ra.set("Unknown"),t.Ea.delete(4),await vl(t)}(this))})}),this.Ra=new ml(n,r)}}async function vl(e){if(Sl(e))for(const t of e.da)await t(!0)}async function yl(e){for(const t of e.da)await t(!1)}function bl(e,t){const n=Bt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),El(n)?Nl(n):Hl(n).O_()&&wl(n,t))}function xl(e,t){const n=Bt(e),r=Hl(n);n.Ia.delete(t),r.O_()&&_l(n,t),0===n.Ia.size&&(r.O_()?r.L_():Sl(n)&&n.Ra.set("Unknown"))}function wl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Hl(e).Y_(t)}function _l(e,t){e.Va.Ue(t),Hl(e).Z_(t)}function Nl(e){e.Va=new vs({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Hl(e).start(),e.Ra.ua()}function El(e){return Sl(e)&&!Hl(e).x_()&&e.Ia.size>0}function Sl(e){return 0===Bt(e).Ea.size}function kl(e){e.Va=void 0}async function Tl(e){e.Ra.set("Online")}async function Cl(e){e.Ia.forEach((t,n)=>{wl(e,t)})}async function Il(e,t){kl(e),El(e)?(e.Ra.ha(t),Nl(e)):e.Ra.set("Unknown")}async function jl(e,t,n){if(e.Ra.set("Online"),t instanceof ps&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Lt(pl,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Al(e,n)}else if(t instanceof fs?e.Va.Ze(t):t instanceof ms?e.Va.st(t):e.Va.tt(t),!n.isEqual(Tn.min()))try{const t=await Uo(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const a=e.Ia.get(r);a&&e.Ia.set(r,a.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Cr.EMPTY_BYTE_STRING,r.snapshotVersion)),_l(e,t);const a=new $s(r.target,t,n,r.sequenceNumber);wl(e,a)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Lt(pl,"Failed to raise snapshot:",t),await Al(e,t)}}async function Al(e,t,n){if(!Un(t))throw t;e.Ea.add(1),await yl(e),e.Ra.set("Offline"),n||(n=()=>Uo(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Lt(pl,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await vl(e)})}function Rl(e,t){return t().catch(n=>Al(e,n,t))}async function Dl(e){const t=Bt(e),n=Wl(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:zn;for(;Pl(t);)try{const e=await zo(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Ol(t,e)}catch(e){await Al(t,e)}Ll(t)&&Ml(t)}function Pl(e){return Sl(e)&&e.Ta.length<10}function Ol(e,t){e.Ta.push(t);const n=Wl(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Ll(e){return Sl(e)&&!Wl(e).x_()&&e.Ta.length>0}function Ml(e){Wl(e).start()}async function Fl(e){Wl(e).ra()}async function Ul(e){const t=Wl(e);for(const n of e.Ta)t.ea(n.mutations)}async function Vl(e,t,n){const r=e.Ta.shift(),a=Ji.from(r,t,n);await Rl(e,()=>e.remoteSyncer.applySuccessfulWrite(a)),await Dl(e)}async function zl(e,t){t&&Wl(e).X_&&await async function(e,t){if(function(e){return ns(e)&&e!==Ht.ABORTED}(t.code)){const n=e.Ta.shift();Wl(e).B_(),await Rl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Dl(e)}}(e,t),Ll(e)&&Ml(e)}async function ql(e,t){const n=Bt(e);n.asyncQueue.verifyOperationInProgress(),Lt(pl,"RemoteStore received new credentials");const r=Sl(n);n.Ea.add(3),await yl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await vl(n)}async function Bl(e,t){const n=Bt(e);t?(n.Ea.delete(2),await vl(n)):t||(n.Ea.add(2),await yl(n),n.Ra.set("Unknown"))}function Hl(e){return e.ma||(e.ma=function(e,t,n){const r=Bt(e);return r.sa(),new ul(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Tl.bind(null,e),t_:Cl.bind(null,e),r_:Il.bind(null,e),H_:jl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),El(e)?Nl(e):e.Ra.set("Unknown")):(await e.ma.stop(),kl(e))})),e.ma}function Wl(e){return e.fa||(e.fa=function(e,t,n){const r=Bt(e);return r.sa(),new dl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Fl.bind(null,e),r_:zl.bind(null,e),ta:Ul.bind(null,e),na:Vl.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Dl(e)):(await e.fa.stop(),e.Ta.length>0&&(Lt(pl,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Kl{constructor(e,t,n,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=a,this.deferred=new Kt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,a){const i=Date.now()+n,s=new Kl(e,t,i,r,a);return s.start(n),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wt(Ht.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gl(e,t){if(Mt("AsyncQueue","".concat(t,": ").concat(e)),Un(e))return new Wt(Ht.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ql{static emptySet(e){return new Ql(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||pn.comparator(t.key,n.key):(e,t)=>pn.comparator(e.key,t.key),this.keyedMap=ci(),this.sortedSet=new wr(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ql))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ql;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Xl{constructor(){this.ga=new wr(pn.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Vt(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Yl{constructor(e,t,n,r,a,i,s,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=a,this.fromCache=i,this.syncStateChanged=s,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,a){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Yl(e,t,Ql.emptySet(t),i,n,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$a(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Jl{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class $l{constructor(){this.queries=Zl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Bt(e),r=n.queries;n.queries=Zl(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Wt(Ht.ABORTED,"Firestore shutting down"))}}function Zl(){return new ii(e=>Za(e),$a)}async function ec(e,t){const n=Bt(e);let r=3;const a=t.query;let i=n.queries.get(a);i?!i.ba()&&t.Da()&&(r=2):(i=new Jl,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(a,!0);break;case 1:i.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(e){const n=Gl(e,"Initialization of query '".concat(ei(t.query),"' failed"));return void t.onError(n)}n.queries.set(a,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&ac(n)}async function tc(e,t){const n=Bt(e),r=t.query;let a=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?a=t.Da()?0:1:!i.ba()&&t.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function nc(e,t){const n=Bt(e);let r=!1;for(const a of t){const e=a.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(a)&&(r=!0);t.wa=a}}r&&ac(n)}function rc(e,t,n){const r=Bt(e),a=r.queries.get(t);if(a)for(const i of a.Sa)i.onError(n);r.queries.delete(t)}function ac(e){e.Ca.forEach(e=>{e.next()})}var ic,sc;(sc=ic||(ic={})).Ma="default",sc.Cache="cache";class oc{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Yl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Yl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ic.Cache}}class lc{constructor(e){this.key=e}}class cc{constructor(e){this.key=e}}class uc{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gi(),this.mutatedKeys=gi(),this.eu=ri(e),this.tu=new Ql(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Xl,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,i=r,s=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ti(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(s=!0)),f&&(u?(i=i.add(u),a=h?a.add(e):a.delete(e)):(i=i.delete(e),a=a.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),a=a.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:s,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vt(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const s=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Yl(this.query,e.tu,a,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:s}:{au:s}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gi(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new cc(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new lc(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=gi();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const dc="SyncEngine";class hc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class fc{constructor(e){this.key=e,this.hu=!1}}class mc{constructor(e,t,n,r,a,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new ii(e=>Za(e),$a),this.Iu=new Map,this.Eu=new Set,this.du=new wr(pn.comparator),this.Au=new Map,this.Ru=new _o,this.Vu={},this.mu=new Map,this.fu=oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function pc(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Lc(e);let a;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),a=i.view.lu()):a=await vc(r,t,n,!0),a}async function gc(e,t){const n=Lc(e);await vc(n,t,!0,!1)}async function vc(e,t,n,r){const a=await qo(e.localStore,Qa(t)),i=a.targetId,s=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await yc(e,t,i,"current"===s,a.resumeToken)),e.isPrimaryClient&&n&&bl(e.remoteStore,a),o}async function yc(e,t,n,r,a){e.pu=(t,n,r)=>async function(e,t,n,r){let a=t.view.ru(n);a.Cs&&(a=await Ho(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,a)}));const i=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(a,e.isPrimaryClient,i,s);return jc(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await Ho(e.localStore,t,!0),s=new uc(t,i.Qs),o=s.ru(i.documents),l=hs.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,a),c=s.applyChanges(o,e.isPrimaryClient,l);jc(e,n,c.au);const u=new hc(t,n,s);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function bc(e,t,n){const r=Bt(e),a=r.Tu.get(t),i=r.Iu.get(a.targetId);if(i.length>1)return r.Iu.set(a.targetId,i.filter(e=>!$a(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Bo(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),n&&xl(r.remoteStore,a.targetId),Cc(r,a.targetId)}).catch(Ln)):(Cc(r,a.targetId),await Bo(r.localStore,a.targetId,!0))}async function xc(e,t){const n=Bt(e),r=n.Tu.get(t),a=n.Iu.get(r.targetId);n.isPrimaryClient&&1===a.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xl(n.remoteStore,r.targetId))}async function wc(e,t){const n=Bt(e);try{const e=await function(e,t){const n=Bt(e),r=t.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const s=[];t.targetChanges.forEach((i,o)=>{const l=a.get(o);if(!l)return;s.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Cr.EMPTY_BYTE_STRING,Tn.min()).withLastLimboFreeSnapshotVersion(Tn.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),a=a.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&s.push(n.Pi.updateTargetData(e,c))});let o=oi(),l=gi();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),s.push(Vo(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(Tn.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));s.push(t)}return Mn.waitFor(s).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=a,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(qt(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?qt(r.hu,14607):e.removedDocuments.size>0&&(qt(r.hu,42227),r.hu=!1))}),await Dc(n,e,t)}catch(e){await Ln(e)}}function _c(e,t,n){const r=Bt(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const a=r.view.va(t);a.snapshot&&e.push(a.snapshot)}),function(e,t){const n=Bt(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const a of n.Sa)a.va(t)&&(r=!0)}),r&&ac(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Nc(e,t,n){const r=Bt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const a=r.Au.get(t),i=a&&a.key;if(i){let e=new wr(pn.comparator);e=e.insert(i,ma.newNoDocument(i,Tn.min()));const n=gi().add(i),a=new ds(Tn.min(),new Map,new wr(rn),e,n);await wc(r,a),r.du=r.du.remove(i),r.Au.delete(t),Rc(r)}else await Bo(r.localStore,t,!1).then(()=>Cc(r,t,n)).catch(Ln)}async function Ec(e,t){const n=Bt(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Bt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),a=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const a=n.batch,i=a.keys();let s=Mn.resolve();return i.forEach(e=>{s=s.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);qt(null!==i,48541),t.version.compareTo(i)<0&&(a.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),s.next(()=>e.mutationQueue.removeMutationBatch(t,a))}(n,e,t,a).next(()=>a.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gi();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Tc(n,r,null),kc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dc(n,e)}catch(e){await Ln(e)}}async function Sc(e,t,n){const r=Bt(e);try{const e=await function(e,t){const n=Bt(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(qt(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Tc(r,t,n),kc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Dc(r,e)}catch(n){await Ln(n)}}function kc(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Tc(e,t,n){const r=Bt(e);let a=r.Vu[r.currentUser.toKey()];if(a){const e=a.get(t);e&&(n?e.reject(n):e.resolve(),a=a.remove(t)),r.Vu[r.currentUser.toKey()]=a}}function Cc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Ic(e,t)})}function Ic(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(xl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Rc(e))}function jc(e,t,n){for(const r of n)r instanceof lc?(e.Ru.addReference(r.key,t),Ac(e,r)):r instanceof cc?(Lt(dc,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Ic(e,r.key)):Vt(19791,{wu:r})}function Ac(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Lt(dc,"New document in limbo: "+n),e.Eu.add(r),Rc(e))}function Rc(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new pn(hn.fromString(t)),r=e.fu.next();e.Au.set(r,new fc(n)),e.du=e.du.insert(n,r),bl(e.remoteStore,new $s(Qa(Ha(n.path)),r,"TargetPurposeLimboResolution",Vn.ce))}}async function Dc(e,t,n){const r=Bt(e),a=[],i=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{s.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const a=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,a?"current":"not-current")}if(e){a.push(e);const t=Ro.As(o.targetId,e);i.push(t)}}))}),await Promise.all(s),r.Pu.H_(a),await async function(e,t){const n=Bt(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Mn.forEach(t,t=>Mn.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Mn.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Un(e))throw e;Lt(Oo,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,a=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,a)}}}(r.localStore,i))}async function Pc(e,t){const n=Bt(e);if(!n.currentUser.isEqual(t)){Lt(dc,"User change. New user:",t.toKey());const e=await Fo(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Wt(Ht.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Dc(n,e.Ls)}}function Oc(e,t){const n=Bt(e),r=n.Au.get(t);if(r&&r.hu)return gi().add(r.key);{let e=gi();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Lc(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=wc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Oc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Nc.bind(null,t),t.Pu.H_=nc.bind(null,t.eventManager),t.Pu.yu=rc.bind(null,t.eventManager),t}function Mc(e){const t=Bt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ec.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sc.bind(null,t),t}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sl(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Mo(this.persistence,new Po,e.initialUser,this.serializer)}Cu(e){return new Co(jo.mi,this.serializer)}Du(e){return new Go}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class Uc extends Fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qt(this.persistence.referenceDelegate instanceof Ao,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new fo(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?so.withCacheSize(this.cacheSizeBytes):so.DEFAULT;return new Co(e=>Ao.mi(e,t),this.serializer)}}class Vc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>_c(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Pc.bind(null,this.syncEngine),await Bl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new $l}createDatastore(e){const t=sl(e.databaseInfo.databaseId),n=function(e){return new al(e)}(e.databaseInfo);return function(e,t,n,r){return new fl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,a){return new gl(e,t,n,r,a)}(this.localStore,this.datastore,e.asyncQueue,e=>_c(this.syncEngine,e,0),Yo.v()?new Yo:new Qo)}createSyncEngine(e,t){return function(e,t,n,r,a,i,s){const o=new mc(e,t,n,r,a,i);return s&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Bt(e);Lt(pl,"RemoteStore shutting down."),t.Ea.add(5),await yl(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vc.provider={build:()=>new Vc};class zc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const qc="FirestoreClient";class Bc{constructor(e,t,n,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Rt.UNAUTHENTICATED,this.clientId=nn.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(n,async e=>{Lt(qc,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Lt(qc,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Kt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Gl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Hc(e,t){e.asyncQueue.verifyOperationInProgress(),Lt(qc,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Fo(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Wc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Kc(e);Lt(qc,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>ql(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>ql(t.remoteStore,n)),e._onlineComponents=t}async function Kc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Lt(qc,"Using user provided OfflineComponentProvider");try{await Hc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ht.FAILED_PRECONDITION||e.code===Ht.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ft("Error using user provided cache. Falling back to memory cache: "+n),await Hc(e,new Fc)}}else Lt(qc,"Using default OfflineComponentProvider"),await Hc(e,new Uc(void 0));return e._offlineComponents}async function Gc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Lt(qc,"Using user provided OnlineComponentProvider"),await Wc(e,e._uninitializedComponentsProvider._online)):(Lt(qc,"Using default OnlineComponentProvider"),await Wc(e,new Vc))),e._onlineComponents}function Qc(e){return Gc(e).then(e=>e.syncEngine)}async function Xc(e){const t=await Gc(e),n=t.eventManager;return n.onListen=pc.bind(null,t.syncEngine),n.onUnlisten=bc.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=gc.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=xc.bind(null,t.syncEngine),n}function Yc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Kt;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,a){const i=new zc({next:n=>{i.Nu(),t.enqueueAndForget(()=>tc(e,s)),n.fromCache&&"server"===r.source?a.reject(new Wt(Ht.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):a.resolve(n)},error:e=>a.reject(e)}),s=new oc(n,i,{includeMetadataChanges:!0,qa:!0});return ec(e,s)}(await Xc(e),e.asyncQueue,t,n,r)),r.promise}function Jc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const $c=new Map,Zc="firestore.googleapis.com",eu=!0;class tu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Wt(Ht.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zc,this.ssl=eu}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:eu;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=io;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<co)throw new Wt(Ht.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Wt(Ht.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Wt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Wt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Wt(Ht.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tu({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Wt(Ht.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Wt(Ht.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tu(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Qt;switch(e.type){case"firstParty":return new $t(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Wt(Ht.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=$c.get(e);t&&(Lt("ComponentProvider","Removing Datastore"),$c.delete(e),t.terminate())}(this),Promise.resolve()}}function ru(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=wn(e,nu);const a=_(t),i=e._getSettings(),s=u(u({},i),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);a&&(N("https://".concat(o)),k("Firestore",!0)),i.host!==Zc&&i.host!==o&&Ft("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},i),{},{host:o,ssl:a,emulatorOptions:r});if(!P(l,s)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Rt.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Wt(Ht.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Rt(a)}e._authCredentials=new Xt(new Gt(t,n))}}class au{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new au(this.firestore,e,this._query)}}class iu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new su(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new iu(this.firestore,e,this._key)}toJSON(){return{type:iu._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Nn(t,iu._jsonSchema))return new iu(e,n||null,new pn(hn.fromString(t.referencePath)))}}iu._jsonSchemaVersion="firestore/documentReference/1.0",iu._jsonSchema={type:_n("string",iu._jsonSchemaVersion),referencePath:_n("string")};class su extends au{constructor(e,t,n){super(e,t,Ha(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new iu(this.firestore,null,new pn(e))}withConverter(e){return new su(this.firestore,e,this._path)}}function ou(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=z(e),gn("collection","path",t),e instanceof nu){const n=hn.fromString(t,...r);return yn(n),new su(e,null,n)}{if(!(e instanceof iu||e instanceof su))throw new Wt(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hn.fromString(t,...r));return yn(n),new su(e.firestore,null,n)}}function lu(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];if(e=z(e),1===arguments.length&&(t=nn.newId()),gn("doc","path",t),e instanceof nu){const n=hn.fromString(t,...r);return vn(n),new iu(e,null,new pn(n))}{if(!(e instanceof iu||e instanceof su))throw new Wt(Ht.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(hn.fromString(t,...r));return vn(n),new iu(e.firestore,e instanceof su?e.converter:null,new pn(n))}}const cu="AsyncQueue";class uu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ol(this,"async_queue_retry"),this._c=()=>{const e=il();e&&Lt(cu,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=il();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=il();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Kt;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Un(e))throw e;Lt(cu,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,Mt("INTERNAL UNHANDLED ERROR: ",du(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Kl.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Vt(47125,{Pc:du(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function du(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function hu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class fu extends nu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new uu,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uu(e),this._firestoreClient=void 0,await e}}}function mu(e){if(e._terminated)throw new Wt(Ht.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||pu(e),e._firestoreClient}function pu(e){var t,n,r;const a=e._freezeSettings(),i=function(e,t,n,r){return new Vr(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Jc(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,a);e._componentsProvider||null!==(n=a.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=a.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),e._firestoreClient=new Bc(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gu(Cr.fromBase64String(e))}catch(e){throw new Wt(Ht.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new gu(Cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:gu._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Nn(e,gu._jsonSchema))return gu.fromBase64String(e.bytes)}}gu._jsonSchemaVersion="firestore/bytes/1.0",gu._jsonSchema={type:_n("string",gu._jsonSchemaVersion),bytes:_n("string")};class vu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mn(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class yu{constructor(e){this._methodName=e}}class bu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Wt(Ht.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Wt(Ht.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bu._jsonSchemaVersion}}static fromJSON(e){if(Nn(e,bu._jsonSchema))return new bu(e.latitude,e.longitude)}}bu._jsonSchemaVersion="firestore/geoPoint/1.0",bu._jsonSchema={type:_n("string",bu._jsonSchemaVersion),latitude:_n("number"),longitude:_n("number")};class xu{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:xu._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Nn(e,xu._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new xu(e.vectorValues);throw new Wt(Ht.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}xu._jsonSchemaVersion="firestore/vectorValue/1.0",xu._jsonSchema={type:_n("string",xu._jsonSchemaVersion),vectorValues:_n("object")};const wu=/^__.*__$/;class _u{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms):new Bi(e,this.data,t,this.fieldTransforms)}}class Nu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Hi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Eu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Vt(40011,{Ac:e})}}class Su{constructor(e,t,n,r,a,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===a&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Su(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Vu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Eu(this.Ac)&&wu.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class ku{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||sl(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Su({Ac:e,methodName:t,Dc:n,path:mn.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tu(e){const t=e._freezeSettings(),n=sl(e._databaseId);return new ku(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Cu(e,t,n,r,a){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cc(i.merge||i.mergeFields?2:0,t,n,a);Lu("Data must be an object, but it was:",s,r);const o=Pu(r,s);let l,c;if(i.merge)l=new kr(s.fieldMask),c=s.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const a=Mu(t,r,n);if(!s.contains(a))throw new Wt(Ht.INVALID_ARGUMENT,"Field '".concat(a,"' is specified in your field mask but missing from your input data."));zu(e,a)||e.push(a)}l=new kr(e),c=s.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=s.fieldTransforms;return new _u(new ha(o),l,c)}class Iu extends yu{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Iu}}function ju(e,t,n,r){const a=e.Cc(1,t,n);Lu("Data must be an object, but it was:",a,r);const i=[],s=ha.empty();br(r,(e,r)=>{const o=Uu(t,e,n);r=z(r);const l=a.yc(o);if(r instanceof Iu)i.push(o);else{const e=Du(r,l);null!=e&&(i.push(o),s.set(o,e))}});const o=new kr(i);return new Nu(s,o,a.fieldTransforms)}function Au(e,t,n,r,a,i){const s=e.Cc(1,t,n),o=[Mu(t,r,n)],l=[a];if(i.length%2!=0)throw new Wt(Ht.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Mu(t,i[h])),l.push(i[h+1]);const c=[],u=ha.empty();for(let h=o.length-1;h>=0;--h)if(!zu(c,o[h])){const e=o[h];let t=l[h];t=z(t);const n=s.yc(e);if(t instanceof Iu)c.push(e);else{const r=Du(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new kr(c);return new Nu(u,d,s.fieldTransforms)}function Ru(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Du(n,e.Cc(r?4:3,t))}function Du(e,t){if(Ou(e=z(e)))return Lu("Unsupported field value:",t,e),Pu(e,t);if(e instanceof yu)return function(e,t){if(!Eu(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const a of e){let e=Du(a,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return wi(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=kn.fromDate(e);return{timestampValue:Ss(t.serializer,n)}}if(e instanceof kn){const n=new kn(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ss(t.serializer,n)}}if(e instanceof bu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof gu)return{bytesValue:ks(t.serializer,e._byteString)};if(e instanceof iu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Is(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof xu)return function(e,t){return{mapValue:{fields:{[Br]:{stringValue:Kr},[Gr]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return bi(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(xn(e)))}(e,t)}function Pu(e,t){const n={};return xr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):br(e,(e,r)=>{const a=Du(r,t.mc(e));null!=a&&(n[e]=a)}),{mapValue:{fields:n}}}function Ou(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof kn||e instanceof bu||e instanceof gu||e instanceof iu||e instanceof yu||e instanceof xu)}function Lu(e,t,n){if(!Ou(n)||!bn(n)){const r=xn(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Mu(e,t,n){if((t=z(t))instanceof vu)return t._internalPath;if("string"==typeof t)return Uu(e,t);throw Vu("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fu=new RegExp("[~\\*/\\[\\]]");function Uu(e,t,n){if(t.search(Fu)>=0)throw Vu("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new vu(...t.split("."))._internalPath}catch(r){throw Vu("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Vu(e,t,n,r,a){const i=r&&!r.isEmpty(),s=void 0!==a;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||s)&&(l+=" (found",i&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(a)),l+=")"),new Wt(Ht.INVALID_ARGUMENT,o+e+l)}function zu(e,t){return e.some(e=>e.isEqual(t))}class qu{constructor(e,t,n,r,a){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new iu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bu extends qu{data(){return super.data()}}function Hu(e,t){return"string"==typeof t?Uu(e,t):t instanceof vu?t._internalPath:t._delegate._internalPath}function Wu(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Wt(Ht.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ku{}class Gu extends Ku{}function Qu(e,t){let n=[];for(var r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];t instanceof Ku&&n.push(t),n=n.concat(a),function(e){const t=e.filter(e=>e instanceof Ju).length,n=e.filter(e=>e instanceof Xu).length;if(t>1||t>0&&n>0)throw new Wt(Ht.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class Xu extends Gu{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Xu(e,t,n)}_apply(e){const t=this._parse(e);return td(e._query,t),new au(e.firestore,e.converter,Ya(e._query,t))}_parse(e){const t=Tu(e.firestore),n=function(e,t,n,r,a,i,s){let o;if(a.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){ed(s,i);const t=[];for(const n of s)t.push(Zu(r,e,n));o={arrayValue:{values:t}}}else o=Zu(r,e,s)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ed(s,i),o=Ru(n,t,s,"in"===i||"not-in"===i);return wa.create(a,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Yu(e,t,n){const r=t,a=Hu("where",e);return Xu._create(a,r,n)}class Ju extends Ku{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ju(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:_a.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const a of r)td(n,a),n=Ya(n,a)}(e._query,t),new au(e.firestore,e.converter,Ya(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $u extends Gu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $u(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ya(t,n)}(e._query,this._field,this._direction);return new au(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new qa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Zu(e,t,n){if("string"==typeof(n=z(n))){if(""===n)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ka(t)&&-1!==n.indexOf("/"))throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(hn.fromString(n));if(!pn.isDocumentKey(r))throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ra(e,new pn(r))}if(n instanceof iu)return ra(e,n._key);throw new Wt(Ht.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(xn(n),"."))}function ed(e,t){if(!Array.isArray(e)||0===e.length)throw new Wt(Ht.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function td(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Wt(Ht.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Wt(Ht.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class nd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Qr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Vt(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return br(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Gr].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Ar(e.doubleValue));return new xu(n)}convertGeoPoint(e){return new bu(Ar(e.latitude),Ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Fr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Ur(e));default:return null}}convertTimestamp(e){const t=jr(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=hn.fromString(e);qt(Js(n),9688,{name:e});const r=new qr(n.get(1),n.get(3)),a=new pn(n.popFirst(5));return r.isEqual(t)||Mt("Document ".concat(a," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),a}}function rd(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class ad{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class id extends qu{constructor(e,t,n,r,a,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new sd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Ht.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=id._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}id._jsonSchemaVersion="firestore/documentSnapshot/1.0",id._jsonSchema={type:_n("string",id._jsonSchemaVersion),bundleSource:_n("string","DocumentSnapshot"),bundleName:_n("string"),bundle:_n("string")};class sd extends id{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class od{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ad(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new sd(this._firestore,this._userDataWriter,n.key,n,new ad(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wt(Ht.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new sd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ad(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new sd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ad(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let a=-1,i=-1;return 0!==t.type&&(a=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:ld(t.type),doc:r,oldIndex:a,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Wt(Ht.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=od._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=nn.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ld(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vt(61501,{type:e})}}od._jsonSchemaVersion="firestore/querySnapshot/1.0",od._jsonSchema={type:_n("string",od._jsonSchemaVersion),bundleSource:_n("string","QuerySnapshot"),bundleName:_n("string"),bundle:_n("string")};class cd extends nd{constructor(e){super(),this.firestore=e}convertBytes(e){return new gu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new iu(this.firestore,null,t)}}function ud(e){e=wn(e,au);const t=wn(e.firestore,fu),n=mu(t),r=new cd(t);return Wu(e._query),Yc(n,e._query).then(n=>new od(t,r,e,n))}function dd(e,t,n){e=wn(e,iu);const r=wn(e.firestore,fu),a=Tu(r);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),l=3;l<s;l++)o[l-3]=arguments[l];return i="string"==typeof(t=z(t))||t instanceof vu?Au(a,"updateDoc",e._key,t,n,o):ju(a,"updateDoc",e._key,t),pd(r,[i.toMutation(e._key,Oi.exists(!0))])}function hd(e){return pd(wn(e.firestore,fu),[new Qi(e._key,Oi.none())])}function fd(e,t){const n=wn(e.firestore,fu),r=lu(e),a=rd(e.converter,t);return pd(n,[Cu(Tu(e.firestore),"addDoc",r._key,a,null!==e.converter,{}).toMutation(r._key,Oi.exists(!1))]).then(()=>r)}function md(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=z(e);let a={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||hu(n[i])||(a=n[i++]);const s={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(hu(n[i])){var o,l,c;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof iu)d=wn(e.firestore,fu),h=Ha(e._key.path),u={next:t=>{n[i]&&n[i](gd(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=wn(e,au);d=wn(t.firestore,fu),h=t._query;const r=new cd(d);u={next:e=>{n[i]&&n[i](new od(d,r,t,e))},error:n[i+1],complete:n[i+2]},Wu(e._query)}return function(e,t,n,r){const a=new zc(r),i=new oc(t,a,n);return e.asyncQueue.enqueueAndForget(async()=>ec(await Xc(e),i)),()=>{a.Nu(),e.asyncQueue.enqueueAndForget(async()=>tc(await Xc(e),i))}}(mu(d),h,s,u)}function pd(e,t){return function(e,t){const n=new Kt;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Mc(e);try{const e=await function(e,t){const n=Bt(e),r=kn.now(),a=t.reduce((e,t)=>e.add(t.key),gi());let i,s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=oi(),l=gi();return n.Ns.getEntries(e,a).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(a=>{i=a;const s=[];for(const e of t){const t=zi(e,i.get(e.key).overlayedDocument);null!=t&&s.push(new Hi(e.key,t,fa(t.value.mapValue),Oi.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)}).next(t=>{s=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:s.batchId,changes:ui(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new wr(rn)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Dc(r,e.changes),await Dl(r.remoteStore)}catch(e){const t=Gl(e,"Failed to persist write");n.reject(t)}}(await Qc(e),t,n)),n.promise}(mu(e),t)}function gd(e,t,n){const r=n.docs.get(t._key),a=new cd(e);return new id(e,a,t._key,r,new ad(n.hasPendingWrites,n.fromCache),t.converter)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Dt=e}(nt),Je(new q("firestore",(e,n)=>{let{instanceIdentifier:r,options:a}=n;const i=e.getProvider("app").getImmediate(),s=new fu(new Yt(e.getProvider("auth-internal")),new en(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Wt(Ht.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qr(e.options.projectId,t)}(i,r),i);return a=u({useFetchStreams:t},a),s._setSettings(a),s},"PUBLIC").setMultipleInstances(!0)),it(jt,At,e),it(jt,At,"esm2020")}();const vd=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},yd=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var bd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xd=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],wd=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,iconNode:d}=e,h=i(e,xd);return(0,r.createElement)("svg",u(u(u({ref:t},bd),{},{width:a,height:a,stroke:n,strokeWidth:o?24*Number(s)/Number(a):s,className:yd("lucide",l)},!c&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"}),h),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(c)?c:[c]])}),_d=["className"],Nd=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{className:s}=n,o=i(n,_d);return(0,r.createElement)(wd,u({ref:a,iconNode:t,className:yd("lucide-".concat((l=vd(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},o));var l});return n.displayName=vd(e),n},Ed=Nd("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Sd=Nd("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),kd=Nd("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var Td=n(579);const Cd={success:{icon:Ed,bgColor:"bg-green-50",textColor:"text-green-800",borderColor:"border-green-200",iconColor:"text-green-600"},error:{icon:Sd,bgColor:"bg-red-50",textColor:"text-red-800",borderColor:"border-red-200",iconColor:"text-red-600"},warning:{icon:kd,bgColor:"bg-yellow-50",textColor:"text-yellow-800",borderColor:"border-yellow-200",iconColor:"text-yellow-600"}},Id=e=>{let{message:t,variant:n="success",onClose:a}=e;const[i,s]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),c=Cd[n],u=c.icon;return(0,r.useEffect)(()=>{const e=setTimeout(()=>{l(!0),setTimeout(()=>{s(!1),a&&a()},300)},5e3);return()=>clearTimeout(e)},[a]),i?(0,Td.jsxs)("div",{className:"\n      fixed top-4 right-4 z-50 flex items-center gap-2 px-4 py-3 rounded-lg border shadow-lg\n      transition-all duration-300 transform\n      ".concat(o?"opacity-0 translate-x-full":"opacity-100 translate-x-0","\n      ").concat(c.bgColor," ").concat(c.textColor," ").concat(c.borderColor,"\n    "),children:[(0,Td.jsx)(u,{className:"w-5 h-5 ".concat(c.iconColor," ").concat(o?"":"animate-bounce")}),(0,Td.jsx)("p",{className:"text-sm font-medium",children:t})]}):null},jd=(0,r.createContext)(null),Ad=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]),i=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";const n=Date.now();a(r=>[...r,{id:n,message:e,variant:t}])},[]),s=(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]);return(0,Td.jsxs)(jd.Provider,{value:{showToast:i},children:[t,(0,Td.jsx)("div",{className:"fixed top-0 right-0 z-50 p-4 space-y-4",children:n.map(e=>(0,Td.jsx)(Id,{message:e.message,variant:e.variant,onClose:()=>s(e.id)},e.id))})]})};it("firebase","12.1.0","app");const Rd=["providerId"],Dd=["uid","auth","stsTokenManager"],Pd=["providerId","signInMethod"];function Od(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ld=Od,Md=new R("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fd=new $("@firebase/auth");function Ud(e){if(Fd.logLevel<=G.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fd.error("Auth (".concat(nt,"): ").concat(e),...n)}}function Vd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Hd(e,...n)}function zd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Hd(e,...n)}function qd(e,t,n){const r=u(u({},Ld()),{},{[t]:n});return new R("auth","Firebase",r).create(t,{appName:e.name})}function Bd(e){return qd(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Md.create(e,...n)}function Wd(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];throw Hd(t,...r)}}function Kd(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ud(t),new Error(t)}function Gd(e,t){e||Kd(t)}function Qd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Xd(){return"http:"===Yd()||"https:"===Yd()}function Yd(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Jd(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Xd()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class $d{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gd(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Jd()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Zd(e,t){Gd(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class eh{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Kd("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Kd("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Kd("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const th={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},nh=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],rh=new $d(3e4,6e4);function ah(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function ih(e,t,n,r){return sh(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let a={},i={};r&&("GET"===t?i=r:a={body:JSON.stringify(r)});const s=L(u({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:o},a);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&_(e.emulatorConfig.host)&&(l.credentials="include"),eh.fetch()(await lh(e,e.config.apiHost,n,s),l)})}async function sh(e,t,n){e._canInitEmulator=!1;const r=u(u({},th),t);try{const t=new uh(e),a=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await a.json();if("needConfirmation"in i)throw dh(e,"account-exists-with-different-credential",i);if(a.ok&&!("errorMessage"in i))return i;{const t=a.ok?i.errorMessage:i.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw dh(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw dh(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw dh(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw qd(e,o,s);Vd(e,o)}}catch(a){if(a instanceof A)throw a;Vd(e,"network-request-failed",{message:String(a)})}}async function oh(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await ih(e,t,n,r,a);return"mfaPendingCredential"in i&&Vd(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function lh(e,t,n,r){const a="".concat(t).concat(n,"?").concat(r),i=e,s=i.config.emulator?Zd(e.config,a):"".concat(e.config.apiScheme,"://").concat(a);if(nh.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(s).toString()}return s}function ch(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uh{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(zd(this.auth,"network-request-failed")),rh.get())})}}function dh(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const a=zd(e,t,r);return a.customData._tokenResponse=n,a}function hh(e){return void 0!==e&&void 0!==e.enterprise}class fh{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ch(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function mh(e,t){return ih(e,"GET","/v2/recaptchaConfig",ah(e,t))}async function ph(e,t){return ih(e,"POST","/v1/accounts:lookup",t)}function gh(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function vh(e){return 1e3*Number(e)}function yh(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ud("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(Ud("Failed to decode base64 JWT payload"),null)}catch(a){return Ud("Caught error parsing JWT payload as JSON",null===a||void 0===a?void 0:a.toString()),null}}function bh(e){const t=yh(e);return Wd(t,"internal-error"),Wd("undefined"!==typeof t.exp,"internal-error"),Wd("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function xh(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof A&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class wh{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class _h{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gh(this.lastLoginAt),this.creationTime=gh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nh(e){var t;const n=e.auth,r=await e.getIdToken(),a=await xh(e,ph(n,{idToken:r}));Wd(null===a||void 0===a?void 0:a.users.length,n,"internal-error");const i=a.users[0];e._notifyReloadListener(i);const s=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?Eh(i.providerUserInfo):[],o=(l=e.providerData,c=s,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new _h(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function Eh(e){return e.map(e=>{let{providerId:t}=e,n=i(e,Rd);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Sh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Wd(e.idToken,"internal-error"),Wd("undefined"!==typeof e.idToken,"internal-error"),Wd("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):bh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Wd(0!==e.length,"internal-error");const t=bh(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Wd(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:a}=await async function(e,t){const n=await sh(e,{},async()=>{const n=L({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:a}=e.config,i=await lh(e,r,"/v1/token","key=".concat(a)),s=await e._getAdditionalHeaders();s["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:s,body:n};return e.emulatorConfig&&_(e.emulatorConfig.host)&&(o.credentials="include"),eh.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(a))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:a}=t,i=new Sh;return n&&(Wd("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Wd("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),a&&(Wd("number"===typeof a,"internal-error",{appName:e}),i.expirationTime=a),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sh,this.toJSON())}_performRefresh(){return Kd("not implemented")}}function kh(e,t){Wd("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Th{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,a=i(e,Dd);this.providerId="firebase",this.proactiveRefresh=new wh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new _h(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await xh(this,this.stsTokenManager.getToken(this.auth,e));return Wd(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=z(e),r=await n.getIdToken(t),a=yh(r);Wd(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const i="object"===typeof a.firebase?a.firebase:void 0,s=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:a,token:r,authTime:gh(vh(a.auth_time)),issuedAtTime:gh(vh(a.iat)),expirationTime:gh(vh(a.exp)),signInProvider:s||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=z(e);await Nh(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Wd(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Th(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Wd(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Nh(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(Bd(this.auth));const e=await this.getIdToken();return await xh(this,async function(e,t){return ih(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,a,i,s,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(a=t.phoneNumber)&&void 0!==a?a:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(s=t.tenantId)&&void 0!==s?s:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,v=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:_,stsTokenManager:N}=t;Wd(b&&N,e,"internal-error");const E=Sh.fromJSON(this.name,N);Wd("string"===typeof b,e,"internal-error"),kh(d,e.name),kh(h,e.name),Wd("boolean"===typeof x,e,"internal-error"),Wd("boolean"===typeof w,e,"internal-error"),kh(f,e.name),kh(m,e.name),kh(p,e.name),kh(g,e.name),kh(v,e.name),kh(y,e.name);const S=new Th({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:E,createdAt:v,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map(e=>u({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Sh;r.updateFromServerResponse(t);const a=new Th({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Nh(a),a}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Wd(void 0!==r.localId,"internal-error");const a=void 0!==r.providerUserInfo?Eh(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==a&&void 0!==a&&a.length),s=new Sh;s.updateFromIdToken(n);const o=new Th({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new _h(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==a&&void 0!==a&&a.length)};return Object.assign(o,l),o}}const Ch=new Map;function Ih(e){Gd(e instanceof Function,"Expected a class definition");let t=Ch.get(e);return t?(Gd(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ch.set(e,t),t)}class jh{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jh.type="NONE";const Ah=jh;function Rh(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Dh{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:a}=this.auth;this.fullUserKey=Rh(this.userKey,r.apiKey,a),this.fullPersistenceKey=Rh("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await ph(this.auth,{idToken:e}).catch(()=>{});return t?Th._fromGetAccountInfoResponse(this.auth,t,e):null}return Th._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Dh(Ih(Ah),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let a=r[0]||Ih(Ah);const i=Rh(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await ph(e,{idToken:t}).catch(()=>{});if(!r)break;n=await Th._fromGetAccountInfoResponse(e,r,t)}else n=Th._fromJSON(e,t);c!==a&&(s=n),a=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return a._shouldAllowMigration&&o.length?(a=o[0],s&&await a._set(i,s.toJSON()),await Promise.all(t.map(async e=>{if(e!==a)try{await e._remove(i)}catch(t){}})),new Dh(a,e,n)):new Dh(a,e,n)}}function Ph(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fh(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Oh(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Vh(t))return"Blackberry";if(zh(t))return"Webos";if(Lh(t))return"Safari";if((t.includes("chrome/")||Mh(t))&&!t.includes("edge/"))return"Chrome";if(Uh(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Oh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function Lh(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function Fh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function Uh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Vh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function zh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function qh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bh(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Hh(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return qh(e)||Uh(e)||zh(e)||Vh(e)||/windows phone/i.test(e)||Fh(e)}function Wh(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ph(T());break;case"Worker":t="".concat(Ph(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class Kh{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(a){r(a)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Gh{constructor(e){var t,n,r,a;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(a=e.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,a,i,s;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(a=o.containsUppercaseLetter)||void 0===a||a),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNonAlphanumericCharacter)||void 0===s||s),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}class Qh{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Yh(this),this.idTokenSubscription=new Yh(this),this.beforeStateQueue=new Kh(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Md,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ih(t)),this._initializationPromise=this.queue(async()=>{var n,r,a;if(!this._deleted&&(this.persistenceManager=await Dh.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(a=this.currentUser)||void 0===a?void 0:a.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ph(this,{idToken:e}),n=await Th._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var a,i;await this.getOrInitRedirectPersistenceManager();const t=null===(a=this.redirectUser)||void 0===a?void 0:a._redirectEventId,s=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==s||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(s){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Wd(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(Bd(this));const t=e?z(e):null;return t&&Wd(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Wd(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(Bd(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(Bd(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ih(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return ih(e,"GET","/v2/passwordPolicy",ah(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Gh(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new R("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return ih(e,"POST","/v2/accounts:revokeToken",ah(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ih(e)||this._popupRedirectResolver;Wd(t,this,"argument-error"),this.redirectPersistenceManager=await Dh.create(this,[Ih(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const a="function"===typeof t?t:t.next.bind(t);let i=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Wd(s,this,"internal-error"),s.then(()=>{i||a(this.currentUser)}),"function"===typeof t){const a=e.addObserver(t,n,r);return()=>{i=!0,a()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Wd(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Wh(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(Fd.logLevel<=G.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Fd.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Xh(e){return z(e)}class Yh{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new U(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Wd(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Jh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $h(e){return Jh.loadJS(e)}function Zh(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ef{constructor(){this.enterprise=new tf}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class tf{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const nf="NO_RECAPTCHA";class rf{constructor(e){this.type="recaptcha-enterprise",this.auth=Xh(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const a=window.grecaptcha;hh(a)?a.enterprise.ready(()=>{a.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(nf)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new ef).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{mh(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new fh(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(a=>{if(!t&&hh(window.grecaptcha))n(a,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Jh.recaptchaEnterpriseScript;0!==t.length&&(t+=a),$h(t).then(()=>{n(a,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function af(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new rf(e);let s;if(a)s=nf;else try{s=await i.verify(n)}catch(l){s=await i.verify(n,!0)}const o=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function sf(e,t,n,r,a){if("EMAIL_PASSWORD_PROVIDER"===a){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await af(e,t,n,"getOobCode"===n);return r(e,a)}return r(e,t).catch(async a=>{if(a.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const a=await af(e,t,n,"getOobCode"===n);return r(e,a)}return Promise.reject(a)})}if("PHONE_PROVIDER"===a){var s;if(null!==(s=e._getRecaptchaConfig())&&void 0!==s&&s.isProviderEnabled("PHONE_PROVIDER")){const a=await af(e,t,n);return r(e,a).catch(async a=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(a.code==="auth/".concat("missing-recaptcha-token")||a.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const a=await af(e,t,n,!1,!0);return r(e,a)}return Promise.reject(a)})}{const a=await af(e,t,n,!1,!0);return r(e,a)}}return Promise.reject(a+" provider is not supported.")}async function of(e){const t=Xh(e),n=await mh(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new fh(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new rf(t).verify()}}function lf(e,t,n){const r=Xh(e);Wd(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const a=!(null===n||void 0===n||!n.disableWarnings),i=cf(t),{host:s,port:o}=function(e){const t=cf(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const e=a[1];return{host:e,port:uf(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:uf(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(s).concat(l,"/")},u=Object.freeze({host:s,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator)return Wd(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Wd(P(c,r.config.emulator)&&P(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,_(s)?(N("".concat(i,"//").concat(s).concat(l)),k("Auth",!0)):a||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function cf(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function uf(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class df{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kd("not implemented")}_getIdTokenResponse(e){return Kd("not implemented")}_linkToIdToken(e,t){return Kd("not implemented")}_getReauthenticationResolver(e){return Kd("not implemented")}}async function hf(e,t){return ih(e,"POST","/v1/accounts:signUp",t)}async function ff(e,t){return oh(e,"POST","/v1/accounts:signInWithPassword",ah(e,t))}class mf extends df{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new mf(e,t,"password")}static _fromEmailAndCode(e,t){return new mf(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return sf(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ff,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return oh(e,"POST","/v1/accounts:signInWithEmailLink",ah(e,t))}(e,{email:this._email,oobCode:this._password});default:Vd(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return sf(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hf,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return oh(e,"POST","/v1/accounts:signInWithEmailLink",ah(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Vd(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function pf(e,t){return oh(e,"POST","/v1/accounts:signInWithIdp",ah(e,t))}class gf extends df{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new gf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vd("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,a=i(t,Pd);if(!n||!r)return null;const s=new gf(n,r);return s.idToken=a.idToken||void 0,s.accessToken=a.accessToken||void 0,s.secret=a.secret,s.nonce=a.nonce,s.pendingToken=a.pendingToken||null,s}_getIdTokenResponse(e){return pf(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pf(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pf(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}async function vf(e,t){return ih(e,"POST","/v1/accounts:sendVerificationCode",ah(e,t))}const yf={USER_NOT_FOUND:"user-not-found"};class bf extends df{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new bf({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new bf({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return oh(e,"POST","/v1/accounts:signInWithPhoneNumber",ah(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await oh(e,"POST","/v1/accounts:signInWithPhoneNumber",ah(e,t));if(n.temporaryProof)throw dh(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return oh(e,"POST","/v1/accounts:signInWithPhoneNumber",ah(e,u(u({},t),{},{operation:"REAUTH"})),yf)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}=e;return n||t||r||a?new bf({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:a}):null}}class xf{constructor(e){var t,n,r,a,i,s;const o=M(F(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Wd(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(a=o.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(s=o.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=M(F(e)).link,n=t?M(F(t)).deep_link_id:null,r=M(F(e)).deep_link_id;return(r?M(F(r)).link:null)||r||n||t||e}(e);try{return new xf(t)}catch(n){return null}}}class wf{constructor(){this.providerId=wf.PROVIDER_ID}static credential(e,t){return mf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=xf.parseLink(t);return Wd(n,"argument-error"),mf._fromEmailAndCode(e,n.code,n.tenantId)}}wf.PROVIDER_ID="password",wf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",wf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class _f{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Nf extends _f{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ef extends Nf{constructor(){super("facebook.com")}static credential(e){return gf._fromParams({providerId:Ef.PROVIDER_ID,signInMethod:Ef.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ef.credentialFromTaggedObject(e)}static credentialFromError(e){return Ef.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ef.credential(t.oauthAccessToken)}catch(n){return null}}}Ef.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ef.PROVIDER_ID="facebook.com";class Sf extends Nf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return gf._fromParams({providerId:Sf.PROVIDER_ID,signInMethod:Sf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Sf.credentialFromTaggedObject(e)}static credentialFromError(e){return Sf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Sf.credential(n,r)}catch(a){return null}}}Sf.GOOGLE_SIGN_IN_METHOD="google.com",Sf.PROVIDER_ID="google.com";class kf extends Nf{constructor(){super("github.com")}static credential(e){return gf._fromParams({providerId:kf.PROVIDER_ID,signInMethod:kf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kf.credentialFromTaggedObject(e)}static credentialFromError(e){return kf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return kf.credential(t.oauthAccessToken)}catch(n){return null}}}kf.GITHUB_SIGN_IN_METHOD="github.com",kf.PROVIDER_ID="github.com";class Tf extends Nf{constructor(){super("twitter.com")}static credential(e,t){return gf._fromParams({providerId:Tf.PROVIDER_ID,signInMethod:Tf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tf.credentialFromTaggedObject(e)}static credentialFromError(e){return Tf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Tf.credential(n,r)}catch(a){return null}}}Tf.TWITTER_SIGN_IN_METHOD="twitter.com",Tf.PROVIDER_ID="twitter.com";class Cf{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const a=await Th._fromIdTokenResponse(e,n,r),i=If(n);return new Cf({user:a,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=If(n);return new Cf({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function If(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class jf extends A{constructor(e,t,n,r){var a;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,jf.prototype),this.customData={appName:e.name,tenantId:null!==(a=e.tenantId)&&void 0!==a?a:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new jf(e,t,n,r)}}function Af(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw jf._fromErrorAndOperation(e,n,t,r);throw n})}async function Rf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await xh(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Cf._forOperation(e,"link",r)}async function Df(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(Bd(r));const a="reauthenticate";try{const i=await xh(e,Af(r,a,t,e),n);Wd(i.idToken,r,"internal-error");const s=yh(i.idToken);Wd(s,r,"internal-error");const{sub:o}=s;return Wd(e.uid===o,r,"user-mismatch"),Cf._forOperation(e,a,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&Vd(r,"user-mismatch"),i}}async function Pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Bd(e));const r="signIn",a=await Af(e,r,t),i=await Cf._fromIdTokenResponse(e,r,a);return n||await e._updateCurrentUser(i.user),i}function Of(e,t){return ih(e,"POST","/v2/accounts/mfaEnrollment:start",ah(e,t))}new WeakMap;const Lf="__sak";class Mf{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lf,"1"),this.storage.removeItem(Lf),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ff extends Mf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Hh(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},a=this.storage.getItem(n);Bh()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ff.type="LOCAL";const Uf=Ff;function Vf(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),a=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(a))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function zf(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class qf{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=zf(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Vf(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=zf(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=zf(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Vf(n);const a=setInterval(()=>{const e=Vf(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(a))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}qf.type="COOKIE";class Bf extends Mf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bf.type="SESSION";const Hf=Bf;class Wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Wf(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:a}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(i).map(async e=>e(t.origin,a)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Kf(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wf.receivers=[];class Gf{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,i;return new Promise((s,o)=>{const l=Kf("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),a=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),s(t.data.response);break;default:clearTimeout(c),clearTimeout(a),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Qf(){return window}function Xf(){return"undefined"!==typeof Qf().WorkerGlobalScope&&"function"===typeof Qf().importScripts}const Yf="firebaseLocalStorageDb",Jf="firebaseLocalStorage",$f="fbase_key";class Zf{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function em(e,t){return e.transaction([Jf],t?"readwrite":"readonly").objectStore(Jf)}function tm(){const e=indexedDB.open(Yf,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Jf,{keyPath:$f})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Jf)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Yf);return new Zf(e).toPromise()}(),t(await tm()))})})}async function nm(e,t,n){const r=em(e,!0).put({[$f]:t,value:n});return new Zf(r).toPromise()}function rm(e,t){const n=em(e,!0).delete(t);return new Zf(n).toPromise()}class am{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await tm()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Xf()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wf._getInstance(Xf()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new Gf(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tm();return await nm(e,Lf,"1"),await rm(e,Lf),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nm(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=em(e,!1).get(t),r=await new Zf(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>rm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=em(e,!1).getAll();return new Zf(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:a}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}am.type="LOCAL";const im=am;function sm(e,t){return ih(e,"POST","/v2/accounts/mfaSignIn:start",ah(e,t))}Zh("rcb"),new $d(3e4,6e4);const om="recaptcha";async function lm(e,t,n){if(!e._getRecaptchaConfig())try{await of(e)}catch(a){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let a;if(a="string"===typeof t?{phoneNumber:t}:t,"session"in a){const t=a.session;if("phoneNumber"in a){Wd("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=sf(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===nf){Wd((null===n||void 0===n?void 0:n.type)===om,e,"argument-error");return Of(e,await cm(e,t,n))}return Of(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Wd("signin"===t.type,e,"internal-error");const i=(null===(r=a.multiFactorHint)||void 0===r?void 0:r.uid)||a.multiFactorUid;Wd(i,e,"missing-multi-factor-info");const s={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=sf(e,s,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===nf){Wd((null===n||void 0===n?void 0:n.type)===om,e,"argument-error");return sm(e,await cm(e,t,n))}return sm(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:a.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=sf(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===nf){Wd((null===n||void 0===n?void 0:n.type)===om,e,"argument-error");return vf(e,await cm(e,t,n))}return vf(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function cm(e,t,n){Wd(n.type===om,e,"argument-error");const r=await n.verify();Wd("string"===typeof r,e,"argument-error");const a=u({},t);if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.captchaResponse,n=a.phoneEnrollmentInfo.clientType,i=a.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),a}if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.captchaResponse,t=a.phoneSignInInfo.clientType,n=a.phoneSignInInfo.recaptchaVersion;return Object.assign(a,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),a}return Object.assign(a,{recaptchaToken:r}),a}class um{constructor(e){this.providerId=um.PROVIDER_ID,this.auth=Xh(e)}verifyPhoneNumber(e,t){return lm(this.auth,e,z(t))}static credential(e,t){return bf._fromVerification(e,t)}static credentialFromResult(e){const t=e;return um.credentialFromTaggedObject(t)}static credentialFromError(e){return um.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?bf._fromTokenResponse(n,r):null}}function dm(e,t){return t?Ih(t):(Wd(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}um.PROVIDER_ID="phone",um.PHONE_SIGN_IN_METHOD="phone";class hm extends df{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pf(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pf(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pf(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function fm(e){return Pf(e.auth,new hm(e),e.bypassAuthState)}function mm(e){const{auth:t,user:n}=e;return Wd(n,t,"internal-error"),Df(n,new hm(e),e.bypassAuthState)}async function pm(e){const{auth:t,user:n}=e;return Wd(n,t,"internal-error"),Rf(n,new hm(e),e.bypassAuthState)}class gm{constructor(e,t,n,r){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:a,error:i,type:s}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fm;case"linkViaPopup":case"linkViaRedirect":return pm;case"reauthViaPopup":case"reauthViaRedirect":return mm;default:Vd(this.auth,"internal-error")}}resolve(e){Gd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gd(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const vm=new $d(2e3,1e4);class ym extends gm{constructor(e,t,n,r,a){super(e,t,r,a),this.provider=n,this.authWindow=null,this.pollId=null,ym.currentPopupAction&&ym.currentPopupAction.cancel(),ym.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Wd(e,this.auth,"internal-error"),e}async onExecution(){Gd(1===this.filter.length,"Popup operations only handle one event");const e=Kf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(zd(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(zd(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ym.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zd(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,vm.get())};e()}}ym.currentPopupAction=null;const bm=new Map;class xm extends gm{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=bm.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Nm(t),r=_m(e);if(!await r._isAvailable())return!1;const a="true"===await r._get(n);return await r._remove(n),a}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}bm.set(this.auth._key(),e)}return this.bypassAuthState||bm.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function wm(e,t){bm.set(e._key(),t)}function _m(e){return Ih(e._redirectPersistence)}function Nm(e){return Rh("pendingRedirect",e.config.apiKey,e.name)}async function Em(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Bd(e));const r=Xh(e),a=dm(r,t),i=new xm(r,a,n),s=await i.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class Sm{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tm(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Tm(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(zd(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(km(e))}saveEventToCache(e){this.cachedEventUids.add(km(e)),this.lastProcessedEventTime=Date.now()}}function km(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Tm(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Cm=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Im=/^https?/;async function jm(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return ih(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Am(r))return}catch(n){}Vd(e,"unauthorized-domain")}function Am(e){const t=Qd(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const a=new URL(e);return""===a.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&a.hostname===r}if(!Im.test(n))return!1;if(Cm.test(e))return r===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}const Rm=new $d(3e4,6e4);function Dm(){const e=Qf().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Pm(e){return new Promise((t,n)=>{var r,a;function i(){Dm(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Dm(),n(zd(e,"network-request-failed"))},timeout:Rm.get()})}if(null!==(r=Qf().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(a=Qf().gapi)||void 0===a||!a.load){const t=Zh("iframefcb");return Qf()[t]=()=>{gapi.load?i():n(zd(e,"network-request-failed"))},$h("".concat(Jh.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Om=null,e})}let Om=null;const Lm=new $d(5e3,15e3),Mm={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Fm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Um(e){const t=e.config;Wd(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Zd(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},a=Fm.get(e.config.apiHost);a&&(r.eid=a);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(L(r).slice(1))}async function Vm(e){const t=await function(e){return Om=Om||Pm(e),Om}(e),n=Qf().gapi;return Wd(n,e,"internal-error"),t.open({where:document.body,url:Um(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Mm,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const a=zd(e,"network-request-failed"),i=Qf().setTimeout(()=>{r(a)},Lm.get());function s(){Qf().clearTimeout(i),n(t)}t.ping(s).then(s,()=>{r(a)})}))}const zm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Bm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-a)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=u(u({},zm),{},{width:r.toString(),height:a.toString(),top:i,left:s}),c=T().toLowerCase();n&&(o=Mh(c)?"_blank":n),Oh(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return qh(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new qm(null);const h=window.open(t||"",o,d);Wd(h,e,"popup-blocked");try{h.focus()}catch(f){}return new qm(h)}const Hm="__/auth/handler",Wm="emulator/auth/handler",Km=encodeURIComponent("fac");async function Gm(e,t,n,r,a,i){Wd(e.config.authDomain,e,"auth-domain-config-required"),Wd(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:a};if(t instanceof _f){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))s[e]=t}if(t instanceof Nf){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const o=s;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Km,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Hm);return Zd(t,Wm)}(e),"?").concat(L(o).slice(1)).concat(c)}const Qm="webStorageSupport";const Xm=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Hf,this._completeRedirectFn=Em,this._overrideRedirectResult=wm}async _openPopup(e,t,n,r){var a;Gd(null===(a=this.eventManagers[e._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()");return Bm(e,await Gm(e,t,n,Qd(),r),Kf())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Qf().location.href=e}(await Gm(e,t,n,Qd(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gd(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Vm(e),n=new Sm(e);return t.register("authEvent",t=>{Wd(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Qm,{type:Qm},n=>{var r;const a=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Qm];void 0!==a&&t(!!a),Vd(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=jm(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Hh()||Lh()||qh()}};var Ym="@firebase/auth",Jm="1.11.0";class $m{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Wd(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Zm=x("authIdTokenMaxAge")||300;let ep=null;var tp;Jh={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=zd("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},tp="Browser",Je(new q("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=r.options;Wd(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:o,clientPlatform:tp,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Wh(tp)},c=new Qh(r,a,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Ih);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Je(new q("auth-internal",e=>(e=>new $m(e))(Xh(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),it(Ym,Jm,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(tp)),it(Ym,Jm,"esm2020");const np=rt({apiKey:"AIzaSyAnLmtlhOUUAbtRcOg64dXdCLbltv_iE4E",authDomain:"garden-c0b50.firebaseapp.com",projectId:"garden-c0b50",storageBucket:"garden-c0b50.firebasestorage.app",messagingSenderId:"467344354997",appId:"1:467344354997:web:3c3397e0176060bb0c98fc",measurementId:"G-7LML93QDTF"}),rp=function(e,t){const n="object"==typeof e?e:at(),r="string"==typeof e?e:t||zr,a=$e(n,"firestore").getImmediate({identifier:r});if(!a._initialized){const e=(e=>{const t=y(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&ru(a,...e)}return a}(np);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at();const t=$e(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$e(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(P(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Vd(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Xm,persistence:[im,Uf,Hf]}),r=x("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(a=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Zm)return;const r=null===t||void 0===t?void 0:t.token;ep!==r&&(ep=r,await fetch(a,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){z(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){z(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var a;const i=y("auth");i&&lf(n,"http://".concat(i))}(np);(async()=>{try{await rp.enablePersistence({synchronizeTabs:!0})}catch(e){"failed-precondition"===e.code?console.warn("M\xfaltiplas abas abertas, persist\xeancia desabilitada"):"unimplemented"===e.code&&console.warn("Navegador n\xe3o suporta persist\xeancia")}})();const ap=(0,r.createContext)(),ip=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]);return(0,r.useEffect)(()=>{const e=md(ou(rp,"funcionarios"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));console.log("Funcion\xe1rios carregados do Firestore:",t),a(t)},e=>{console.error("Erro ao carregar funcion\xe1rios:",e)});return()=>e()},[]),(0,Td.jsx)(ap.Provider,{value:{funcionarios:n},children:t})},sp=(0,r.createContext)(),op=()=>{const e=(0,r.useContext)(sp);if(!e)throw new Error("useAuth deve ser usado dentro de um AuthProvider");return e},lp=2,cp=(0,r.createContext)(),up=e=>{let{children:t}=e;const{usuario:n}=op(),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(null===n||void 0===n||!n.id)return;let e;e=n.nivel>=lp?Qu(ou(rp,"tarefas")):Qu(ou(rp,"tarefas"),Yu("responsaveis","array-contains",n.id));const t=md(e,e=>{const t=e.docs.map(e=>{const t=e.data(),n=e=>e?"string"===typeof e?e:e.toDate?e.toDate().toISOString():e instanceof Date?e.toISOString():null:null;return u(u({id:e.id},t),{},{dataCriacao:n(t.dataCriacao),dataAtualizacao:n(t.dataAtualizacao),dataConclusao:n(t.dataConclusao),prazo:n(t.prazo),responsaveis:t.responsaveis||[]})});i(t),o(!1)});return()=>t()},[n]);return(0,Td.jsx)(cp.Provider,{value:{tarefas:a,loading:s,adicionarTarefa:async e=>{if(null!==n&&void 0!==n&&n.id)try{const t=e=>e?e instanceof Date?e:"string"===typeof e?new Date(e):null:null,r=u(u({},e),{},{criadorId:n.id,criadorNome:n.nome,status:"pendente",dataCriacao:new Date,dataAtualizacao:new Date},e.prazo?{prazo:t(e.prazo)}:{});return await fd(ou(rp,"tarefas"),r),!0}catch(t){return console.error("Erro ao adicionar tarefa:",t),!1}},atualizarTarefa:async(e,t)=>{try{const n=lu(rp,"tarefas",e);return await dd(n,u({status:t,dataAtualizacao:new Date},"concluida"===t?{dataConclusao:new Date}:{})),!0}catch(n){return console.error("Erro ao atualizar tarefa:",n),!1}},removerTarefa:async e=>{try{return await dd(lu(rp,"tarefas",e),{status:"cancelada",dataAtualizacao:(new Date).toISOString()}),!0}catch(t){return console.error("Erro ao remover tarefa:",t),!1}}},children:t})},dp=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function hp(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="".concat(".","/service-worker.js");dp?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):fp(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")})):fp(t,e)}),window.addEventListener("online",function(e){console.log("Online")}),window.addEventListener("offline",function(e){console.log("Offline")})}}function fp(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(e=>{console.error("Error during service worker registration:",e)})}const mp=()=>{const[e,t]=(0,r.useState)(null),[n,a]=(0,r.useState)(!1);(0,r.useEffect)(()=>{hp({onUpdate:e=>{t(e.waiting),a(!0)}})},[]);return n?(0,Td.jsxs)("div",{className:"fixed bottom-4 right-4 z-50 bg-green-600 text-white rounded-lg shadow-lg p-4",children:[(0,Td.jsx)("p",{className:"mb-2",children:"Nova vers\xe3o dispon\xedvel!"}),(0,Td.jsx)("button",{onClick:()=>{null===e||void 0===e||e.postMessage({type:"SKIP_WAITING"}),a(!1),window.location.reload()},className:"bg-white text-green-600 px-4 py-2 rounded hover:bg-green-50 transition-colors",children:"Atualizar"})]}):null};function pp(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(t),r=new Uint8Array(n.length);for(let a=0;a<n.length;++a)r[a]=n.charCodeAt(a);return r}const gp=()=>{(0,r.useEffect)(()=>{e()},[]);const e=(0,r.useCallback)(async()=>{try{if(await(async()=>{try{return"Notification"in window?"granted"===Notification.permission||"granted"===await Notification.requestPermission():(console.log("Este browser n\xe3o suporta notifica\xe7\xf5es"),!1)}catch(e){return console.error("Erro ao solicitar permiss\xe3o para notifica\xe7\xf5es:",e),!1}})()){const e=await(async()=>{try{const e=await navigator.serviceWorker.ready;return"pushManager"in e?await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:pp({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_VAPID_PUBLIC_KEY)}):(console.log("Push notifications n\xe3o s\xe3o suportadas"),null)}catch(e){return console.error("Erro ao registrar para push notifications:",e),null}})();e&&console.log("Push notification subscription:",e)}}catch(e){console.error("Erro ao inicializar notifica\xe7\xf5es:",e)}},[]);return{initializeNotifications:e}},vp=Nd("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yp=Nd("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),bp=Nd("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xp=e=>{let{adicionarItem:t}=e;const[n,a]=(0,r.useState)({nome:"",quantidade:"",categoria:""});return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Novo Item no Invent\xe1rio"}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Td.jsx)("input",{type:"text",placeholder:"Nome do item",value:n.nome,onChange:e=>a(u(u({},n),{},{nome:e.target.value})),className:"form-input"}),(0,Td.jsx)("input",{type:"number",min:"1",placeholder:"Quantidade",value:n.quantidade,onChange:e=>a(u(u({},n),{},{quantidade:e.target.value})),className:"form-input"}),(0,Td.jsxs)("select",{value:n.categoria,onChange:e=>a(u(u({},n),{},{categoria:e.target.value})),className:"form-select",children:[(0,Td.jsx)("option",{value:"",children:"Selecione a categoria"}),(0,Td.jsx)("option",{value:"Ferramentas",children:"Ferramentas"}),(0,Td.jsx)("option",{value:"Equipamentos",children:"Equipamentos"}),(0,Td.jsx)("option",{value:"EPI",children:"EPI"}),(0,Td.jsx)("option",{value:"Outros",children:"Outros"})]}),(0,Td.jsxs)("button",{onClick:()=>{if(!n.nome||!n.quantidade||!n.categoria)return;t(n)&&a({nome:"",quantidade:"",categoria:""})},disabled:!n.nome||!n.quantidade||!n.categoria,className:"btn-primary flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Adicionar Item"]})]})]})},wp=Nd("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),_p=Nd("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Np=e=>{let{item:t,onRemover:n}=e;const r=t.disponivel/t.quantidade*100;return(0,Td.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Td.jsxs)("div",{className:"flex-1 mr-2",children:[(0,Td.jsx)("h3",{className:"font-semibold text-gray-800 text-sm leading-tight",children:t.nome}),(0,Td.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:t.categoria})]}),(0,Td.jsx)("button",{onClick:()=>n(t.id),className:"text-red-500 hover:text-red-700 p-1 flex-shrink-0",title:"Remover item",children:(0,Td.jsx)(_p,{className:"w-4 h-4"})})]}),(0,Td.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,Td.jsxs)("div",{className:"flex justify-between",children:[(0,Td.jsx)("span",{children:"Total:"}),(0,Td.jsx)("span",{className:"font-medium",children:t.quantidade})]}),(0,Td.jsxs)("div",{className:"flex justify-between",children:[(0,Td.jsx)("span",{children:"Dispon\xedvel:"}),(0,Td.jsx)("span",{className:"font-medium ".concat(0===t.disponivel?"text-red-600":t.disponivel<.3*t.quantidade?"text-yellow-600":"text-green-600"),children:t.disponivel})]}),(0,Td.jsxs)("div",{className:"flex justify-between",children:[(0,Td.jsx)("span",{children:"Em uso:"}),(0,Td.jsx)("span",{className:"font-medium",children:t.quantidade-t.disponivel})]})]}),(0,Td.jsxs)("div",{className:"mt-3",children:[(0,Td.jsx)("div",{className:"bg-gray-200 rounded-full h-2",children:(0,Td.jsx)("div",{className:"h-2 rounded-full transition-all ".concat(0===t.disponivel?"bg-red-500":t.disponivel<.3*t.quantidade?"bg-yellow-500":"bg-green-500"),style:{width:"".concat(r,"%")}})}),(0,Td.jsxs)("div",{className:"text-xs text-gray-500 mt-1 text-center",children:[Math.round(r),"% dispon\xedvel"]})]})]})},Ep=e=>{let{inventario:t,emprestimos:n,removerItem:a}=e;const[i,s]=(0,r.useState)(""),o=t.filter(e=>e.nome.toLowerCase().includes(i.toLowerCase())||e.categoria.toLowerCase().includes(i.toLowerCase())),l=e=>{a(e,n)};return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Invent\xe1rio Completo"}),(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)(wp,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",placeholder:"Buscar por item ou categoria...",value:i,onChange:e=>s(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),(0,Td.jsxs)("div",{className:"mb-6",children:[(0,Td.jsx)("h3",{className:"font-medium text-gray-700 mb-3",children:"Resumo por Categoria"}),(0,Td.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:["Ferramentas","Equipamentos","EPI","Outros"].map(e=>{const t=o.filter(t=>t.categoria===e),n=t.reduce((e,t)=>e+t.quantidade,0),r=t.reduce((e,t)=>e+t.disponivel,0),a=n-r;return(0,Td.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg",children:[(0,Td.jsx)("div",{className:"font-medium text-gray-800",children:e}),(0,Td.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,Td.jsxs)("div",{children:["Total: ",n]}),(0,Td.jsxs)("div",{children:["Dispon\xedvel: ",r]}),(0,Td.jsxs)("div",{children:["Em uso: ",a]})]})]},e)})})]}),(0,Td.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:o.sort((e,t)=>{const r=n.filter(t=>t.ferramentas.includes(e.nome)).sort((e,t)=>new Date(t.dataRetirada)-new Date(e.dataRetirada))[0],a=n.filter(e=>e.ferramentas.includes(t.nome)).sort((e,t)=>new Date(t.dataRetirada)-new Date(e.dataRetirada))[0],i=r?new Date(r.dataRetirada):new Date(0),s=a?new Date(a.dataRetirada):new Date(0);return i>s?-1:i<s?1:e.categoria.localeCompare(t.categoria)||e.nome.localeCompare(t.nome)}).map(e=>(0,Td.jsx)(Np,{item:e,onRemover:l},e.id))})]})},Sp=e=>{let{inventario:t,emprestimos:n,adicionarItem:r,removerItem:a}=e;const{usuario:i}=op(),s=1===(null===i||void 0===i?void 0:i.nivel);return(0,Td.jsxs)("div",{className:"space-y-6",children:[!s&&(0,Td.jsx)(xp,{adicionarItem:r}),(0,Td.jsx)(Ep,{inventario:t,emprestimos:n,removerItem:a,readonly:s})]})},kp=Nd("tool-case",[["path",{d:"M10 15h4",key:"192ueg"}],["path",{d:"m14.817 10.995-.971-1.45 1.034-1.232a2 2 0 0 0-2.025-3.238l-1.82.364L9.91 3.885a2 2 0 0 0-3.625.748L6.141 6.55l-1.725.426a2 2 0 0 0-.19 3.756l.657.27",key:"xbnumr"}],["path",{d:"m18.822 10.995 2.26-5.38a1 1 0 0 0-.557-1.318L16.954 2.9a1 1 0 0 0-1.281.533l-.924 2.122",key:"eaw7gc"}],["path",{d:"M4 12.006A1 1 0 0 1 4.994 11H19a1 1 0 0 1 1 1v7a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",key:"1vaooh"}]]),Tp=Nd("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Cp=Nd("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Ip=e=>{if(!e)return"-";try{return new Date(e).toLocaleDateString("pt-BR")}catch(t){return"-"}},jp=()=>(new Date).toISOString().split("T")[0],Ap=()=>(new Date).toTimeString().slice(0,5),Rp=e=>{let{emprestimo:t,funcionarios:n,onClose:a}=e;const[i,s]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),{showToast:d}=(()=>{const e=(0,r.useContext)(jd);if(!e)throw new Error("useToast must be used within a ToastProvider");return e})(),h=(null===n||void 0===n?void 0:n.filter(e=>e.id!==t.funcionarioId))||[];return(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl",children:[(0,Td.jsxs)("div",{className:"bg-gray-50 px-6 py-4 rounded-t-lg border-b",children:[(0,Td.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Transferir Ferramentas"}),(0,Td.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Selecione o funcion\xe1rio e confirme a transfer\xeancia das ferramentas"})]}),(0,Td.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ferramentas a transferir:"}),(0,Td.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg divide-y divide-gray-200",children:t.ferramentas.map((e,t)=>(0,Td.jsxs)("div",{className:"p-3 flex items-center justify-between",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Td.jsx)(kp,{className:"w-5 h-5 text-gray-400"}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("span",{className:"text-sm font-medium text-gray-900",children:"string"===typeof e?e:e.nome}),"string"!==typeof e&&e.codigo&&(0,Td.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["C\xf3digo: ",e.codigo]})]})]}),"string"!==typeof e&&e.quantidade>1&&(0,Td.jsxs)("span",{className:"text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:["Qtd: ",e.quantidade]})]},t))})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione o funcion\xe1rio para receber as ferramentas:"}),(0,Td.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,children:[(0,Td.jsx)("option",{value:"",children:"Selecione um funcion\xe1rio"}),h.map(e=>(0,Td.jsx)("option",{value:e.id,children:e.nome},e.id))]})]}),(0,Td.jsx)("div",{className:"border border-yellow-200 bg-yellow-50 rounded-lg p-4",children:(0,Td.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,Td.jsx)("input",{type:"checkbox",checked:c,onChange:e=>u(e.target.checked),className:"mt-1 h-4 w-4 text-green-600 border-yellow-400 rounded focus:ring-green-500"}),(0,Td.jsxs)("div",{className:"space-y-1",children:[(0,Td.jsx)("span",{className:"text-sm font-medium text-yellow-800 block",children:"Termo de Responsabilidade"}),(0,Td.jsx)("span",{className:"text-sm text-yellow-700",children:"Confirmo que me responsabilizo pela entrega f\xedsica das ferramentas ao colaborador selecionado e que manterei o sistema atualizado com a localiza\xe7\xe3o real das ferramentas. Entendo que esta transfer\xeancia registrar\xe1 a mudan\xe7a de responsabilidade no sistema imediatamente."})]})]})})]}),(0,Td.jsxs)("div",{className:"bg-gray-50 px-6 py-4 rounded-b-lg border-t flex justify-end gap-3",children:[(0,Td.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Cancelar"}),(0,Td.jsxs)("button",{type:"button",onClick:async()=>{if(i)if(c){l(!0);try{if(null===t||void 0===t||!t.id||null===t||void 0===t||!t.funcionarioId)throw new Error("Dados do empr\xe9stimo incompletos");const e=n.find(e=>e.id===i);if(null===e||void 0===e||!e.nome)throw new Error("Funcion\xe1rio de destino n\xe3o encontrado");console.log("Transferindo para:",e.nome);const r=lu(rp,"emprestimos",t.id),s=new Date,o=s.toISOString(),l=s.toTimeString().split(" ")[0];await dd(r,{funcionarioId:String(i),colaborador:e.nome,dataUltimaTransferencia:o,dataRetirada:o.split("T")[0],horaRetirada:l,historicoTransferencias:[...t.historicoTransferencias||[],{data:o,de:t.colaborador,para:e.nome,deId:String(t.funcionarioId),paraId:String(i)}]}),d("Ferramenta(s) transferida(s) com sucesso!","success"),a()}catch(e){console.error("Erro ao transferir:",e);let t="Erro ao transferir. ";"Funcion\xe1rio de destino n\xe3o encontrado"===e.message?t+="Funcion\xe1rio n\xe3o encontrado.":"Dados do empr\xe9stimo incompletos"===e.message?t+="Dados do empr\xe9stimo inv\xe1lidos.":t+="Tente novamente.",d(t,"error")}finally{l(!1)}}else d("Voc\xea precisa confirmar a responsabilidade pela entrega das ferramentas","warning");else d("Selecione um funcion\xe1rio para transferir","warning")},disabled:o||!i||!c,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 flex items-center gap-2",children:[(0,Td.jsx)(Cp,{className:"w-4 h-4"}),o?"Transferindo...":"Confirmar Transfer\xeancia"]})]})]})})},Dp=e=>{let{emprestimos:t,usuario:n}=e;const[a,i]=(0,r.useState)(null),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)([]),{funcionarios:d}=(0,r.useContext)(ap),h=Array.isArray(t)?t:[];(0,r.useEffect)(()=>{if(null===n||void 0===n||!n.id)return;console.log("Configurando listeners para usu\xe1rio ID:",n.id);const e=Qu(ou(rp,"transferencias"),Yu("funcionarioDestinoId","==",String(n.id)),Yu("status","==","pendente")),t=Qu(ou(rp,"transferencias"),Yu("funcionarioOrigemId","==",String(n.id)),Yu("status","==","pendente")),r=md(e,e=>{const t=e.docs.map(e=>{const t=e.data();return console.log("Transfer\xeancia recebida encontrada:",{id:e.id,funcionarioDestinoId:t.funcionarioDestinoId,funcionarioOrigemId:t.funcionarioOrigemId,status:t.status,ferramentas:t.ferramentas}),u({id:e.id},t)});console.log("Total de transfer\xeancias para receber:",t.length),o(t)}),a=md(t,e=>{const t=e.docs.map(e=>{const t=e.data();return console.log("Transfer\xeancia enviada encontrada:",{id:e.id,funcionarioDestinoId:t.funcionarioDestinoId,funcionarioOrigemId:t.funcionarioOrigemId,status:t.status,ferramentas:t.ferramentas}),u({id:e.id},t)});console.log("Total de transfer\xeancias enviadas:",t.length),c(t)});return()=>{r(),a()}},[null===n||void 0===n?void 0:n.id]);const f=h.filter(e=>{var t,r;const a=e.funcionarioId===(null===n||void 0===n?void 0:n.id),i=(null===(t=e.colaborador)||void 0===t?void 0:t.toLowerCase())===(null===n||void 0===n||null===(r=n.nome)||void 0===r?void 0:r.toLowerCase()),s="ativo"===e.status||!e.dataDevolucao;return(a||i)&&s}).sort((e,t)=>{const n=new Date(e.dataRetirada+"T"+(e.horaRetirada||"00:00"));return new Date(t.dataRetirada+"T"+(t.horaRetirada||"00:00"))-n}),m=e=>{if(!e)return"Data indispon\xedvel";try{let t=e.dataUltimaTransferencia;if(!t){if(!e.dataRetirada)return"Data indispon\xedvel";if(e.horaRetirada){const n=e.horaRetirada.split(":").slice(0,2).join(":");t="".concat(e.dataRetirada,"T").concat(n,":00Z")}else t="".concat(e.dataRetirada,"T00:00:00Z")}console.log("Data base para c\xe1lculo:",t);const n=new Date(t);if(isNaN(n.getTime()))return console.error("Data inv\xe1lida ap\xf3s parse:",t),"Data inv\xe1lida";const r=new Date-n,a=Math.floor(r/864e5);return 0===a?"Hoje":1===a?"H\xe1 1 dia":"H\xe1 ".concat(a," dias")}catch(t){return console.error("Erro ao calcular tempo:",t),"Erro no c\xe1lculo"}};return(0,Td.jsxs)("div",{className:"space-y-6",children:[(0,Td.jsx)("div",{className:"bg-blue-50 rounded-lg p-4 mb-4 text-sm",children:s.length>0&&(0,Td.jsx)("pre",{className:"mt-2 text-xs",children:JSON.stringify(s[0],null,2)})}),s.length>0&&(0,Td.jsxs)("div",{className:"bg-green-50 rounded-lg shadow-sm p-6 border border-green-200",children:[(0,Td.jsxs)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:["Transfer\xeancias Aguardando Sua Aprova\xe7\xe3o (",s.length,")"]}),(0,Td.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,Td.jsx)("div",{className:"bg-white rounded-lg p-4 border border-green-200",children:(0,Td.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Td.jsxs)("div",{className:"flex-1",children:[(0,Td.jsxs)("p",{className:"font-medium text-gray-900",children:["De: ",e.funcionarioOrigem||e.nomeOrigemFuncionario||"N\xe3o identificado"]}),(0,Td.jsxs)("p",{className:"text-sm text-gray-600",children:["Solicitado em: ",e.dataSolicitacao?Ip(e.dataSolicitacao):"Data n\xe3o informada"]}),e.observacoes&&(0,Td.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Observa\xe7\xf5es: ",e.observacoes]}),(0,Td.jsxs)("div",{className:"mt-2",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ferramentas:"}),(0,Td.jsx)("ul",{className:"mt-1 space-y-1",children:(e.ferramentas||[]).map((e,t)=>(0,Td.jsxs)("li",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,Td.jsx)(kp,{className:"w-4 h-4"}),"string"===typeof e?e:(null===e||void 0===e?void 0:e.nome)||"Ferramenta sem nome",(null===e||void 0===e?void 0:e.quantidade)&&e.quantidade>1&&" (".concat(e.quantidade,")"),(null===e||void 0===e?void 0:e.codigo)&&(0,Td.jsxs)("span",{className:"text-xs text-gray-500",children:["- ",e.codigo]})]},t))})]})]}),(0,Td.jsxs)("div",{className:"flex flex-col items-end gap-2 ml-4",children:[(0,Td.jsxs)("span",{className:"text-sm text-green-600 flex items-center gap-1",children:[(0,Td.jsx)(Tp,{className:"w-4 h-4"}),"Aguardando sua aprova\xe7\xe3o"]}),(0,Td.jsxs)("div",{className:"flex gap-2",children:[(0,Td.jsx)("button",{onClick:()=>(async e=>{try{const t=lu(rp,"transferencias",e.id);if(await dd(t,{status:"aceito",dataAceite:(new Date).toISOString()}),e.emprestimoId){const t=lu(rp,"emprestimos",e.emprestimoId);await dd(t,{funcionarioId:String(n.id),colaborador:n.nome})}console.log("Transfer\xeancia aceita com sucesso")}catch(t){console.error("Erro ao aceitar transfer\xeancia:",t)}})(e),className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors",children:"Aceitar"}),(0,Td.jsx)("button",{onClick:()=>(async e=>{try{const t=lu(rp,"transferencias",e.id);await dd(t,{status:"recusado",dataRecusa:(new Date).toISOString()}),console.log("Transfer\xeancia recusada com sucesso")}catch(t){console.error("Erro ao recusar transfer\xeancia:",t)}})(e),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors",children:"Recusar"})]})]})]})},e.id))})]}),l.length>0&&(0,Td.jsxs)("div",{className:"bg-orange-50 rounded-lg shadow-sm p-6 border border-orange-200",children:[(0,Td.jsxs)("h3",{className:"text-lg font-semibold text-orange-800 mb-4",children:["Transfer\xeancias Enviadas Pendentes (",l.length,")"]}),(0,Td.jsx)("div",{className:"space-y-4",children:l.map(e=>(0,Td.jsx)("div",{className:"bg-white rounded-lg p-4 border border-orange-200",children:(0,Td.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsxs)("p",{className:"font-medium text-gray-900",children:["Para: ",e.funcionarioDestino]}),(0,Td.jsxs)("p",{className:"text-sm text-gray-600",children:["Enviado em: ",Ip(e.dataSolicitacao)]}),(0,Td.jsxs)("div",{className:"mt-2",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Ferramentas:"}),(0,Td.jsx)("ul",{className:"mt-1 space-y-1",children:(e.ferramentas||[]).map((e,t)=>(0,Td.jsxs)("li",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,Td.jsx)(kp,{className:"w-4 h-4"}),"string"===typeof e?e:(null===e||void 0===e?void 0:e.nome)||"Ferramenta sem nome",(null===e||void 0===e?void 0:e.quantidade)>1&&" (".concat(e.quantidade,")")]},t))})]})]}),(0,Td.jsxs)("span",{className:"text-sm text-orange-600 flex items-center gap-1",children:[(0,Td.jsx)(Tp,{className:"w-4 h-4"}),"Aguardando aprova\xe7\xe3o"]})]})},e.id))})]}),a&&(0,Td.jsx)(Rp,{emprestimo:a,funcionarios:d||[],onClose:()=>i(null)}),(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Minhas Ferramentas"}),(0,Td.jsxs)("p",{className:"text-sm text-gray-600",children:["Total de empr\xe9stimos ativos: ",f.length]})]}),(0,Td.jsxs)("div",{className:"flex gap-4",children:[(s.length>0||l.length>0)&&(0,Td.jsxs)("div",{className:"px-4 py-2 bg-orange-50 text-orange-800 rounded-lg text-sm flex items-center gap-2",children:[(0,Td.jsx)(Tp,{className:"w-4 h-4"}),s.length>0&&(0,Td.jsxs)("span",{children:[s.length," para aprovar"]}),s.length>0&&l.length>0&&" \u2022 ",l.length>0&&(0,Td.jsxs)("span",{children:[l.length," enviadas"]})]}),(0,Td.jsxs)("div",{className:"px-4 py-2 bg-yellow-50 text-yellow-800 rounded-lg text-sm",children:["Voc\xea possui ",f.reduce((e,t)=>e+(t.ferramentas||[]).length,0)," ferramenta(s) em sua posse"]})]})]}),0===f.length?(0,Td.jsxs)("div",{className:"text-center py-8",children:[(0,Td.jsx)(kp,{className:"w-12 h-12 mx-auto text-gray-400 mb-3"}),(0,Td.jsx)("p",{className:"text-gray-500",children:"Voc\xea n\xe3o possui ferramentas em sua posse no momento."}),s.length>0&&(0,Td.jsxs)("p",{className:"text-sm text-green-600 mt-2",children:["Voc\xea tem ",s.length," transfer\xeancia(s) pendente(s) para aprova\xe7\xe3o."]})]}):(0,Td.jsx)("div",{className:"space-y-4",children:f.map(e=>{var t;return(0,Td.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsxs)("div",{className:"font-medium text-gray-900 mb-1",children:["Empr\xe9stimo #",(null===(t=e.id)||void 0===t?void 0:t.slice(-4))||"N/A"]}),(0,Td.jsx)("div",{className:"text-sm text-gray-600",children:e.dataUltimaTransferencia?(0,Td.jsxs)(Td.Fragment,{children:["Transferido em: ",Ip(e.dataUltimaTransferencia),(0,Td.jsx)("br",{}),(0,Td.jsxs)("span",{className:"text-xs text-gray-500",children:["Retirada original: ",Ip(e.dataRetirada)," \xe0s ",e.horaRetirada||"00:00"]})]}):(0,Td.jsxs)(Td.Fragment,{children:["Retirada: ",Ip(e.dataRetirada)," \xe0s ",e.horaRetirada||"00:00"]})})]}),(0,Td.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-sm rounded-full",children:m(e)})]}),(0,Td.jsx)("div",{className:"space-y-2",children:(e.ferramentas||[]).map((t,r)=>(0,Td.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md hover:bg-gray-100 transition-colors",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)(kp,{className:"w-4 h-4 text-gray-400"}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("span",{className:"text-gray-900",children:"string"===typeof t?t:(null===t||void 0===t?void 0:t.nome)||"Ferramenta sem nome"}),(null===t||void 0===t?void 0:t.codigo)&&(0,Td.jsxs)("span",{className:"ml-2 text-sm text-gray-500",children:["C\xf3digo: ",t.codigo]})]})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[e.previsaoDevolucao&&(0,Td.jsxs)("span",{className:"text-xs text-orange-600",children:["Devolu\xe7\xe3o prevista: ",Ip(e.previsaoDevolucao)]}),(0,Td.jsxs)("button",{onClick:()=>{const r=u(u({},e),{},{funcionarioId:String((null===n||void 0===n?void 0:n.id)||""),ferramentas:[t]});i(r)},className:"px-2 py-1 rounded flex items-center gap-1 text-sm bg-blue-50 text-blue-600 hover:bg-blue-100",children:[(0,Td.jsx)(Cp,{className:"w-4 h-4"}),"Transferir"]})]})]},"".concat(e.id,"-").concat(r)))})]},e.id)})})]})]})};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var Pp=e=>"number"==typeof e&&!isNaN(e),Op=e=>"string"==typeof e,Lp=e=>"function"==typeof e,Mp=e=>(0,r.isValidElement)(e)||Op(e)||Lp(e)||Pp(e);function Fp(e){let{enter:t,exit:n,appendPosition:a=!1,collapse:i=!0,collapseDuration:s=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:u,nodeRef:d,isIn:h,playToast:f}=e,m=a?"".concat(t,"--").concat(l):t,p=a?"".concat(n,"--").concat(l):n,g=(0,r.useRef)(0);return(0,r.useLayoutEffect)(()=>{let e=d.current,t=m.split(" "),n=r=>{r.target===d.current&&(f(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,r.useEffect)(()=>{let e=d.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=r+"px",a.transition="all ".concat(n,"ms"),requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)})})}(e,u,s):u()};h||(c?t():(g.current=1,e.className+=" ".concat(p),e.addEventListener("animationend",t)))},[h]),r.createElement(r.Fragment,null,o)}}var Up=1,Vp=()=>"".concat(Up++);var zp=new Map,qp=[],Bp=new Set,Hp=()=>zp.size>0;function Wp(e,t){var n;if(t)return!(null==(n=zp.get(t))||!n.isToastActive(e));let r=!1;return zp.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function Kp(e){if(Hp()){if(null==e||(e=>Op(e)||Pp(e))(e))zp.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=zp.get(e.containerId);t?t.removeToast(e.id):zp.forEach(t=>{t.removeToast(e.id)})}}else qp=qp.filter(t=>null!=e&&t.options.toastId!==e)}function Gp(e,t){Mp(e)&&(Hp()||qp.push({content:e,options:t}),zp.forEach(n=>{n.buildToast(e,t)}))}function Qp(e,t){zp.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function Xp(e){return e&&(Op(e.toastId)||Pp(e.toastId))?e.toastId:Vp()}function Yp(e,t){return Gp(e,t),t.toastId}function Jp(e,t){return u(u({},t),{},{type:t&&t.type||e,toastId:Xp(t)})}function $p(e){return(t,n)=>Yp(t,Jp(e,n))}function Zp(e,t){return Yp(e,Jp("default",t))}Zp.loading=(e,t)=>Yp(e,Jp("default",u({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),Zp.promise=function(e,t,n){let r,{pending:a,error:i,success:s}=t;a&&(r=Op(a)?Zp.loading(a,n):Zp.loading(a.render,u(u({},n),a)));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,a)=>{if(null==t)return void Zp.dismiss(r);let i=u(u(u({type:e},o),n),{},{data:a}),s=Op(t)?{render:t}:t;return r?Zp.update(r,u(u({},i),s)):Zp(s.render,u(u({},i),s)),a},c=Lp(e)?e():e;return c.then(e=>l("success",s,e)).catch(e=>l("error",i,e)),c},Zp.success=$p("success"),Zp.info=$p("info"),Zp.error=$p("error"),Zp.warning=$p("warning"),Zp.warn=Zp.warning,Zp.dark=(e,t)=>Yp(e,Jp("default",u({theme:"dark"},t))),Zp.dismiss=function(e){Kp(e)},Zp.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};zp.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Zp.isActive=Wp,Zp.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=zp.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:a}=n,i=u(u(u({delay:100},r),t),{},{toastId:t.toastId||e,updateId:Vp()});i.toastId!==e&&(i.staleId=e);let s=i.render||a;delete i.render,Yp(s,i)}},Zp.done=e=>{Zp.update(e,{progress:1})},Zp.onChange=function(e){return Bp.add(e),()=>{Bp.delete(e)}},Zp.play=e=>Qp(!0,e),Zp.pause=e=>Qp(!1,e);"undefined"!=typeof window?r.useLayoutEffect:r.useEffect;var eg=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}};Fp(eg("bounce",!0)),Fp(eg("slide",!0)),Fp(eg("zoom")),Fp(eg("flip"));const tg=e=>{let{emprestimos:t}=e;const{usuario:n}=op(),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{let e=()=>{};return(async()=>{if(null===n||void 0===n||!n.id)return;const t=Qu(ou(rp,"transferencias"),Yu("funcionarioDestinoId","==",String(n.id)),Yu("status","==","pendente"));e=md(t,e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));console.log("Transfer\xeancias pendentes carregadas:",t),i(t),o(!1)})})(),()=>e()},[n]),console.log("MeuInventarioTab - Estado:",{usuario:n,emprestimos:t,transferencias:a,temEmprestimos:Array.isArray(t),quantidadeEmprestimos:Array.isArray(t)?t.length:"N/A"});return(0,Td.jsx)(ip,{children:(0,Td.jsx)("div",{className:"space-y-6",children:n?Array.isArray(t)?(0,Td.jsxs)(Td.Fragment,{children:[a.length>0&&(0,Td.jsxs)("div",{className:"bg-yellow-50 border border-yellow-100 rounded-lg p-4 mb-6",children:[(0,Td.jsx)("div",{className:"flex items-center gap-2 mb-3",children:(0,Td.jsxs)("h3",{className:"text-lg font-semibold text-yellow-800",children:["Transfer\xeancias Pendentes (",a.length,")"]})}),(0,Td.jsx)("p",{className:"text-sm text-yellow-700 mb-4",children:"Voc\xea tem ferramentas aguardando sua confirma\xe7\xe3o de recebimento."})]}),(0,Td.jsx)(Dp,{emprestimos:t,transferencias:a,usuario:n,isLoadingTransferencias:s})]}):(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900 mx-auto"}),(0,Td.jsx)("p",{className:"mt-2 text-gray-600",children:"Carregando empr\xe9stimos..."})]}):(0,Td.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:(0,Td.jsx)("p",{className:"text-gray-600",children:"Voc\xea precisa estar logado para ver seus empr\xe9stimos."})})})})},ng=[{id:1,nome:"Ancinho de ferro 14 dentes",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:2,nome:"Ancinho rastelo de pl\xe1stico verde",quantidade:9,disponivel:3,categoria:"Ferramentas"},{id:3,nome:"Ancinho rastelo de pl\xe1stico laranja",quantidade:10,disponivel:8,categoria:"Ferramentas"},{id:4,nome:"Aparador de cerca viva Stihl HS 45 (a gasolina)",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:5,nome:"Bomba costal pulverizador 20 litros",quantidade:4,disponivel:4,categoria:"Equipamentos"},{id:6,nome:"Carregador de bateria com 2 baterias marca MAKITA",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:7,nome:"Carregador de bateria com 1 ponto marca MAKITA",quantidade:3,disponivel:3,categoria:"Equipamentos"},{id:8,nome:"Baterias Makita",quantidade:8,disponivel:8,categoria:"Equipamentos"},{id:9,nome:"Carrinho de m\xe3o",quantidade:4,disponivel:4,categoria:"Equipamentos"},{id:10,nome:"Cavadeira articulada com cabo de madeira",quantidade:6,disponivel:6,categoria:"Ferramentas"},{id:11,nome:"Cortador de grama de nylon (ro\xe7adeira)",quantidade:2,disponivel:2,categoria:"Equipamentos"},{id:12,nome:"Enxad\xe3o",quantidade:3,disponivel:3,categoria:"Ferramentas"},{id:13,nome:"Foice com cabo",quantidade:1,disponivel:1,categoria:"Ferramentas"},{id:14,nome:"Lima de motosserra",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:15,nome:"Motosserra",quantidade:2,disponivel:2,categoria:"Equipamentos"},{id:16,nome:"P\xe1 cabo comprido ponta redonda",quantidade:10,disponivel:10,categoria:"Ferramentas"},{id:17,nome:"P\xe1 cabo curto ponta redonda",quantidade:4,disponivel:4,categoria:"Ferramentas"},{id:18,nome:"P\xe1 cabo curto ponta quadrada",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:19,nome:"P\xe1 de muda (vanca)",quantidade:7,disponivel:7,categoria:"Ferramentas"},{id:20,nome:"Picareta (sacho)",quantidade:12,disponivel:9,categoria:"Ferramentas"},{id:21,nome:"Serrote de poda com gancho para cabo extens\xedvel",quantidade:5,disponivel:4,categoria:"Ferramentas"},{id:22,nome:"Soprador de folhas a gasolina",quantidade:2,disponivel:2,categoria:"Equipamentos"},{id:23,nome:"Soprador a bateria marca MAKITA",quantidade:10,disponivel:10,categoria:"Equipamentos"},{id:24,nome:"Sugador de folhas (com extens\xe3o)",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:25,nome:"Tesoura de poda grande",quantidade:7,disponivel:7,categoria:"Ferramentas"},{id:26,nome:"Tesoura de poda m\xe3o",quantidade:9,disponivel:8,categoria:"Ferramentas"},{id:27,nome:"Tesoura de poda com cabo extens\xedvel",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:28,nome:"Vassoura jardim (gari)",quantidade:9,disponivel:9,categoria:"Ferramentas"},{id:29,nome:"Podadora Makita pequena (a bateria)",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:30,nome:"Podadora Makita grande",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:31,nome:"Bolsas Makita",quantidade:17,disponivel:17,categoria:"Equipamentos"},{id:32,nome:"Maleta Makita de pl\xe1stico",quantidade:2,disponivel:2,categoria:"Equipamentos"},{id:33,nome:"Carregador a Toro",quantidade:3,disponivel:3,categoria:"Equipamentos"},{id:34,nome:"Baterias para m\xe1quina Toro",quantidade:6,disponivel:6,categoria:"Equipamentos"},{id:35,nome:"L\xe2mina de reserva m\xe1quina Toro",quantidade:3,disponivel:3,categoria:"Equipamentos"},{id:36,nome:"M\xe1quina Toro",quantidade:3,disponivel:3,categoria:"Equipamentos"},{id:37,nome:"Motosserra cabo extens\xedvel Stihl (a gasolina)",quantidade:1,disponivel:1,categoria:"Equipamentos"},{id:38,nome:"Fac\xe3o",quantidade:6,disponivel:5,categoria:"Ferramentas"},{id:39,nome:"Machado",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:40,nome:"Escada de alum\xednio",quantidade:3,disponivel:3,categoria:"Equipamentos"},{id:41,nome:"Garfos de jardim",quantidade:3,disponivel:3,categoria:"Ferramentas"},{id:42,nome:"Conjunto de jardim 3 pe\xe7as",quantidade:1,disponivel:1,categoria:"Ferramentas"},{id:43,nome:"Kit de 9 chaves de fenda",quantidade:1,disponivel:0,categoria:"Ferramentas"},{id:44,nome:"Picareta de constru\xe7\xe3o",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:45,nome:"Tesoura de papagaio com cabo extens\xedvel",quantidade:3,disponivel:3,categoria:"Ferramentas"},{id:46,nome:"Enxada",quantidade:12,disponivel:12,categoria:"Ferramentas"},{id:47,nome:"Garrafas de \xe1gua 5L",quantidade:5,disponivel:5,categoria:"Outros"},{id:48,nome:"Luvas de couro",quantidade:2,disponivel:2,categoria:"EPI"},{id:49,nome:"\xd3culos",quantidade:8,disponivel:8,categoria:"EPI"},{id:50,nome:"Abafadores",quantidade:4,disponivel:4,categoria:"EPI"},{id:51,nome:"Bateria Makita 5Ah (nova)",quantidade:110,disponivel:110,categoria:"Equipamentos"},{id:52,nome:"Carregador de bateria com 2 postos a 220V marca MAKITA (novo)",quantidade:20,disponivel:20,categoria:"Equipamentos"},{id:53,nome:"Ro\xe7adeira Makita 36V (nova)",quantidade:4,disponivel:4,categoria:"Equipamentos"},{id:54,nome:"Aparador de cerca viva MAKITA 18V",quantidade:4,disponivel:4,categoria:"Equipamentos"},{id:55,nome:"Carregador de bateria 110V e 220V com 1 ponto marca MAKITA",quantidade:4,disponivel:4,categoria:"Equipamentos"},{id:56,nome:"Garrafas de \xe1gua 12L",quantidade:5,disponivel:5,categoria:"Outros"},{id:57,nome:"Kit de limas agulha com 6 pe\xe7as",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:58,nome:"Lima de motosserra (nova)",quantidade:12,disponivel:12,categoria:"Ferramentas"},{id:59,nome:"kit de limas agulha com 6 pe\xe7as",quantidade:2,disponivel:2,categoria:"Ferramentas"},{id:63,nome:"Sacos",quantidade:70,disponivel:65,categoria:"Outros"},{id:64,nome:"Corda",quantidade:3,disponivel:3,categoria:"Outros"},{id:65,nome:"Tesoura de press\xe3o",quantidade:3,disponivel:3,categoria:"Ferramentas"},{id:66,nome:"Vassoura gari",quantidade:9,disponivel:9,categoria:"Ferramentas"},{id:67,nome:"Rodo",quantidade:5,disponivel:4,categoria:"Ferramentas"}],rg=e=>{let{ferramentasDisponiveis:t,onAdicionarFerramenta:n}=e;const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(!1),u=e=>e?t.filter(t=>t.nome.toLowerCase().includes(e.toLowerCase())).slice(0,8):[],d=()=>{const e=s||a;e&&(n(e),o(""),i(""),c(!1))};return(0,Td.jsxs)("div",{className:"flex flex-col gap-4 relative",children:[(0,Td.jsxs)("select",{value:s,onChange:e=>{o(e.target.value),i(e.target.value),c(!1)},className:"form-select min-w-48 mb-2",children:[(0,Td.jsx)("option",{value:"",children:"Selecione uma ferramenta..."}),t.map(e=>(0,Td.jsxs)("option",{value:e.nome,children:[e.nome," (",e.disponivel,")"]},e.id))]}),(0,Td.jsxs)("div",{className:"w-full relative flex items-center gap-2",children:[(0,Td.jsx)("input",{type:"text",placeholder:"Digite o nome da ferramenta...",value:a,onChange:e=>{i(e.target.value),o(""),c(e.target.value.length>0)},onFocus:()=>c(a.length>0),onBlur:()=>setTimeout(()=>c(!1),200),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),d())},className:"form-input w-full text-lg py-3"}),(0,Td.jsx)("button",{onClick:d,disabled:!a&&!s,className:"bg-blue-500 text-white px-3 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed",style:{minWidth:"2.5rem"},children:(0,Td.jsx)(Cp,{className:"w-5 h-5"})}),l&&(0,Td.jsxs)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto",children:[u(a).map(e=>(0,Td.jsxs)("button",{onClick:()=>{return t=e.nome,i(t),o(t),void c(!1);var t},className:"w-full text-left px-3 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[(0,Td.jsx)("div",{className:"font-medium text-sm",children:e.nome}),(0,Td.jsxs)("div",{className:"text-xs text-gray-500",children:[e.categoria," \u2022 Dispon\xedvel: ",e.disponivel]})]},e.id)),0===u(a).length&&a&&(0,Td.jsx)("div",{className:"px-3 py-2 text-gray-500 text-sm",children:"Nenhuma ferramenta encontrada"})]})]})]})},ag=e=>{let{inventario:t,adicionarEmprestimo:n,atualizarDisponibilidade:a}=e;const[i,s]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(Qu(ou(rp,"usuarios"),Yu("nivel","==",ev.FUNCIONARIO)),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));s(t)});return()=>e()},[]);const[o,l]=(0,r.useState)({colaborador:"",ferramentas:[],dataRetirada:jp(),horaRetirada:Ap()}),c=t.filter(e=>e.disponivel>0);return(0,Td.jsx)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:(0,Td.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Td.jsxs)("div",{className:"space-y-4",children:[(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Td.jsxs)("select",{value:o.colaborador,onChange:e=>l(u(u({},o),{},{colaborador:e.target.value})),className:"form-select w-full rounded-lg border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-500",required:!0,children:[(0,Td.jsx)("option",{value:"",children:"Selecione o funcion\xe1rio"}),i.map(e=>(0,Td.jsx)("option",{value:e.nome,children:e.nome},e.id))]}),(0,Td.jsx)("input",{type:"date",value:o.dataRetirada,onChange:e=>l(u(u({},o),{},{dataRetirada:e.target.value})),className:"form-input"})]}),(0,Td.jsx)("input",{type:"time",value:o.horaRetirada,onChange:e=>l(u(u({},o),{},{horaRetirada:e.target.value})),className:"form-input w-full"}),(0,Td.jsx)(rg,{ferramentasDisponiveis:c,onAdicionarFerramenta:e=>{if(!e||o.ferramentas.includes(e))return;const n=t.find(t=>t.nome.toLowerCase()===e.toLowerCase()&&t.disponivel>0);n&&l(e=>u(u({},e),{},{ferramentas:[...e.ferramentas,n.nome]}))}})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h3",{className:"font-medium text-gray-700 mb-2",children:"Ferramentas Selecionadas:"}),(0,Td.jsx)("div",{className:"border border-gray-200 rounded-lg p-3 min-h-32 max-h-40 overflow-y-auto",children:0===o.ferramentas.length?(0,Td.jsx)("p",{className:"text-gray-400 text-sm",children:"Nenhuma ferramenta selecionada"}):(0,Td.jsx)("div",{className:"space-y-2",children:o.ferramentas.map((e,t)=>(0,Td.jsxs)("div",{className:"flex justify-between items-center bg-gray-50 p-2 rounded",children:[(0,Td.jsx)("span",{className:"text-sm",children:e}),(0,Td.jsx)("button",{onClick:()=>(e=>{l(t=>u(u({},t),{},{ferramentas:t.ferramentas.filter(t=>t!==e)}))})(e),className:"text-red-500 hover:text-red-700 p-1",children:(0,Td.jsx)(_p,{className:"w-3 h-3"})})]},t))})}),(0,Td.jsxs)("button",{onClick:()=>{if(!o.colaborador)return void alert("Por favor, selecione um funcion\xe1rio");if(0===o.ferramentas.length)return void alert("Por favor, selecione pelo menos uma ferramenta");const e=i.find(e=>e.nome===o.colaborador);if(!e)return void alert("Funcion\xe1rio n\xe3o encontrado");const t=u(u({},o),{},{status:"emprestado",dataDevolucao:null,horaDevolucao:null,funcionarioId:e.id});n(t,a)&&l({colaborador:"",ferramentas:[],dataRetirada:jp(),horaRetirada:Ap()})},disabled:!o.colaborador||0===o.ferramentas.length,className:"mt-4 w-full btn-primary flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Registrar Empr\xe9stimo"]})]})]})})},ig=Nd("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),sg=e=>{let{emprestimos:t,devolverFerramentas:n,removerEmprestimo:a,atualizarDisponibilidade:i}=e;const[s,o]=(0,r.useState)(""),l=t.filter(e=>e.colaborador.toLowerCase().includes(s.toLowerCase())||e.ferramentas.some(e=>e.toLowerCase().includes(s.toLowerCase()))).sort((e,t)=>{const n=new Date(e.dataRetirada+"T"+(e.horaRetirada||"00:00"));return new Date(t.dataRetirada+"T"+(t.horaRetirada||"00:00"))-n});return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Hist\xf3rico de Empr\xe9stimos"}),(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)(wp,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",placeholder:"Buscar por colaborador ou ferramenta...",value:s,onChange:e=>o(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),(0,Td.jsx)("div",{className:"overflow-x-auto",children:(0,Td.jsxs)("table",{className:"w-full",children:[(0,Td.jsx)("thead",{children:(0,Td.jsxs)("tr",{className:"border-b",children:[(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"ID"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"Colaborador"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"Ferramentas"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"Retirada"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"Devolu\xe7\xe3o"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"Status"}),(0,Td.jsx)("th",{className:"text-left py-3 px-2",children:"A\xe7\xf5es"})]})}),(0,Td.jsx)("tbody",{children:l.sort((e,t)=>t.id-e.id).map(e=>(0,Td.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,Td.jsxs)("td",{className:"py-3 px-2 font-mono text-sm",children:["#",e.id]}),(0,Td.jsx)("td",{className:"py-3 px-2 font-medium",children:e.colaborador}),(0,Td.jsx)("td",{className:"py-3 px-2",children:(0,Td.jsx)("div",{className:"max-w-xs",children:e.ferramentas.length>2?(0,Td.jsxs)("div",{className:"text-sm",children:[(0,Td.jsx)("div",{children:e.ferramentas.slice(0,2).join(", ")}),(0,Td.jsxs)("div",{className:"text-gray-500",children:["+",e.ferramentas.length-2," outras"]})]}):(0,Td.jsx)("div",{className:"text-sm",children:e.ferramentas.join(", ")})})}),(0,Td.jsxs)("td",{className:"py-3 px-2 text-sm",children:[(0,Td.jsx)("div",{children:Ip(e.dataRetirada)}),(0,Td.jsx)("div",{className:"text-gray-500",children:e.horaRetirada})]}),(0,Td.jsx)("td",{className:"py-3 px-2 text-sm",children:e.dataDevolucao?(0,Td.jsxs)("div",{children:[(0,Td.jsx)("div",{children:Ip(e.dataDevolucao)}),(0,Td.jsx)("div",{className:"text-gray-500",children:e.horaDevolucao})]}):(0,Td.jsx)("span",{className:"text-gray-400",children:"-"})}),(0,Td.jsx)("td",{className:"py-3 px-2",children:(0,Td.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("emprestado"===e.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"emprestado"===e.status?(0,Td.jsxs)(Td.Fragment,{children:[(0,Td.jsx)(Tp,{className:"w-3 h-3 inline mr-1"}),"Emprestado"]}):(0,Td.jsxs)(Td.Fragment,{children:[(0,Td.jsx)(ig,{className:"w-3 h-3 inline mr-1"}),"Devolvido"]})})}),(0,Td.jsx)("td",{className:"py-3 px-2",children:(0,Td.jsxs)("div",{className:"flex gap-2",children:["emprestado"===e.status&&(0,Td.jsx)("button",{onClick:()=>{return t=e.id,void n(t,i);var t},className:"text-green-600 hover:text-green-800 p-1",title:"Marcar como devolvido",children:(0,Td.jsx)(ig,{className:"w-4 h-4"})}),(0,Td.jsx)("button",{onClick:()=>{return t=e.id,void a(t,i);var t},className:"text-red-600 hover:text-red-800 p-1",title:"Remover registro",children:(0,Td.jsx)(_p,{className:"w-4 h-4"})})]})})]},e.id))})]})})]})},og=e=>{let{emprestimos:t,inventario:n,adicionarEmprestimo:r,devolverFerramentas:a,removerEmprestimo:i,atualizarDisponibilidade:s}=e;const{usuario:o}=op(),l="funcionario"===(null===o||void 0===o?void 0:o.nivel);return(0,Td.jsxs)("div",{className:"space-y-6",children:[!l&&(0,Td.jsx)(ag,{inventario:n,adicionarEmprestimo:r,atualizarDisponibilidade:s,emprestimos:t}),(0,Td.jsx)(sg,{emprestimos:t,devolverFerramentas:a,removerEmprestimo:i,atualizarDisponibilidade:s,readonly:l})]})},lg=Nd("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),cg=e=>{let{funcionarios:t,adicionarFuncionario:n,removerFuncionario:a,atualizarFuncionario:i,readonly:s}=e;const[o,l]=(0,r.useState)({nome:"",cargo:"",telefone:""}),[c,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(null),[m,p]=(0,r.useState)({nome:"",cargo:"",telefone:""}),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(null),{usuario:x}=op(),w="funcionario"===(null===x||void 0===x?void 0:x.nivel);return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[!w&&!s&&(0,Td.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(!0),await n(o),l({nome:"",cargo:"",telefone:""}),d(!1)},className:"flex gap-2 mb-6",children:[(0,Td.jsx)("input",{type:"text",placeholder:"Nome",value:o.nome,onChange:e=>l(u(u({},o),{},{nome:e.target.value})),className:"form-input px-3 py-2 rounded border",required:!0}),(0,Td.jsx)("input",{type:"text",placeholder:"Cargo",value:o.cargo,onChange:e=>l(u(u({},o),{},{cargo:e.target.value})),className:"form-input px-3 py-2 rounded border",required:!0}),(0,Td.jsx)("input",{type:"text",placeholder:"Telefone",value:o.telefone,onChange:e=>{const t=e.target.value.replace(/[^0-9]/g,"");l(u(u({},o),{},{telefone:t}))},className:"form-input px-3 py-2 rounded border",required:!0,maxLength:15}),(0,Td.jsxs)("button",{type:"submit",className:"btn-primary flex items-center gap-2 px-4 py-2 rounded bg-green-600 text-white",disabled:c,children:[(0,Td.jsx)(bp,{className:"w-4 h-4"})," Adicionar"]})]}),(0,Td.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Td.jsx)("thead",{children:(0,Td.jsxs)("tr",{children:[(0,Td.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Nome"}),(0,Td.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Cargo"}),(0,Td.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Telefone"}),(0,Td.jsx)("th",{className:"px-4 py-2"})]})}),(0,Td.jsx)("tbody",{children:t.map(e=>(0,Td.jsxs)("tr",{className:"bg-white",children:[(0,Td.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.nome}),(0,Td.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.cargo}),(0,Td.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:e.telefone}),(0,Td.jsx)("td",{className:"px-4 py-2 flex gap-2",children:!w&&!s&&(0,Td.jsxs)(Td.Fragment,{children:[(0,Td.jsx)("button",{onClick:()=>(e=>{f(e),p({nome:e.nome,cargo:e.cargo,telefone:e.telefone})})(e),className:"text-blue-600 hover:text-blue-800",children:(0,Td.jsx)(lg,{className:"w-4 h-4"})}),(0,Td.jsx)("button",{onClick:()=>(b(e),void v(!0)),className:"text-red-600 hover:text-red-800",children:(0,Td.jsx)(_p,{className:"w-4 h-4"})})]})})]},e.id))})]}),!w&&h&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsxs)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 p-6",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Editar Funcion\xe1rio"}),(0,Td.jsxs)("div",{className:"space-y-4",children:[(0,Td.jsx)("input",{type:"text",placeholder:"Nome",value:m.nome,onChange:e=>p(u(u({},m),{},{nome:e.target.value})),className:"form-input w-full"}),(0,Td.jsx)("input",{type:"text",placeholder:"Cargo",value:m.cargo,onChange:e=>p(u(u({},m),{},{cargo:e.target.value})),className:"form-input w-full"}),(0,Td.jsx)("input",{type:"text",placeholder:"Telefone",value:m.telefone,onChange:e=>p(u(u({},m),{},{telefone:e.target.value.replace(/[^0-9]/g,"")})),className:"form-input w-full",maxLength:15})]}),(0,Td.jsxs)("div",{className:"flex justify-end gap-2 mt-6",children:[(0,Td.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 bg-gray-100 rounded-lg",children:"Cancelar"}),(0,Td.jsx)("button",{onClick:async()=>{d(!0),await i(h.id,m),f(null),d(!1)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg",disabled:c,children:"Salvar"})]})]})}),g&&y&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmar Exclus\xe3o"}),(0,Td.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:['Tem certeza que deseja excluir o funcion\xe1rio "',y.nome,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.']}),(0,Td.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Td.jsx)("button",{onClick:()=>{v(!1),b(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",disabled:c,children:"Cancelar"}),(0,Td.jsx)("button",{onClick:async()=>{try{d(!0),await a(y.id),v(!1),b(null)}catch(e){alert("Erro ao excluir funcion\xe1rio: "+e.message)}finally{d(!1)}},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700",disabled:c,children:c?"Excluindo...":"Excluir"})]})]})})]})},ug=Nd("user-cog",[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),dg=Nd("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),hg=Nd("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),fg=Nd("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),mg=Nd("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),pg=Nd("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),gg=()=>{const{usuarios:e,usuario:t,criarUsuario:n,atualizarUsuario:a,removerUsuario:i}=op(),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[v,y]=(0,r.useState)(""),[b,x]=(0,r.useState)(null),[w,_]=(0,r.useState)({nome:"",email:"",senha:"",nivel:ev.FUNCIONARIO,ativo:!0});if(!t)return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 text-center",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto mb-4"}),(0,Td.jsx)("p",{className:"text-gray-600",children:"Carregando dados do usu\xe1rio..."})]});const N=(null===t||void 0===t?void 0:t.nivel)===ev.FUNCIONARIO,E=()=>{_({nome:"",email:"",senha:"",nivel:ev.FUNCIONARIO,ativo:!0}),c(null),h(!1),g(""),y("")},S=()=>{o(!1),E()},k=(()=>{const e=[];return t.nivel===ev.ADMIN?e.push({valor:ev.FUNCIONARIO,label:tv[ev.FUNCIONARIO]},{valor:ev.SUPERVISOR,label:tv[ev.SUPERVISOR]},{valor:ev.GERENTE,label:tv[ev.GERENTE]},{valor:ev.ADMIN,label:tv[ev.ADMIN]}):t.nivel===ev.GERENTE&&e.push({valor:ev.FUNCIONARIO,label:tv[ev.FUNCIONARIO]},{valor:ev.SUPERVISOR,label:tv[ev.SUPERVISOR]}),e})(),T=e.filter(e=>t.nivel===ev.ADMIN||(t.nivel===ev.GERENTE&&e.nivel<ev.GERENTE||e.id===t.id));return(0,Td.jsxs)("div",{className:"space-y-6",children:[(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Td.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Td.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Td.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,Td.jsx)(ug,{className:"w-6 h-6 text-purple-600"})}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Gerenciamento de Usu\xe1rios"}),(0,Td.jsx)("p",{className:"text-gray-600",children:"Gerencie os usu\xe1rios do sistema de acordo com suas permiss\xf5es"})]})]}),k.length>0&&(0,Td.jsxs)("button",{onClick:()=>{N||(E(),o(!0))},className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Novo Usu\xe1rio"]})]}),p&&(0,Td.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg",children:p}),v&&(0,Td.jsx)("div",{className:"mt-4 bg-green-50 border border-green-200 text-green-600 px-4 py-3 rounded-lg",children:v})]}),(0,Td.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Td.jsx)("div",{className:"overflow-x-auto",children:(0,Td.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Td.jsx)("thead",{className:"bg-gray-50",children:(0,Td.jsxs)("tr",{children:[(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usu\xe1rio"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"N\xedvel de Acesso"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xdaltimo Login"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,Td.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>(0,Td.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"flex-shrink-0",children:(0,Td.jsx)("div",{className:"h-8 w-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,Td.jsx)(dg,{className:"w-4 h-4 text-purple-600"})})}),(0,Td.jsxs)("div",{className:"ml-3",children:[(0,Td.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.nome,e.id===t.id&&(0,Td.jsx)("span",{className:"ml-2 text-xs text-purple-600 font-medium",children:"(Voc\xea)"})]}),(0,Td.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)(hg,{className:"w-4 h-4 text-gray-400 mr-2"}),(0,Td.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.nivel===ev.ADMIN?"bg-red-100 text-red-800":e.nivel===ev.GERENTE?"bg-purple-100 text-purple-800":e.nivel===ev.SUPERVISOR?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:tv[e.nivel]})]})}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(e.ativo?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.ativo?"Ativo":"Inativo"})}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.ultimoLogin?new Date(e.ultimoLogin).toLocaleString("pt-BR"):"Nunca"}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2",children:(0,Td.jsxs)("span",{className:"flex gap-2",children:[nv.canEditUser(t.nivel,t.id,e.id,e.nivel)&&(0,Td.jsx)("button",{onClick:()=>(e=>{nv.canEditUser(t.nivel,t.id,e.id,e.nivel)?(_({nome:e.nome,email:e.email,senha:"",nivel:e.nivel,ativo:e.ativo}),c(e),o(!0)):g("Voc\xea n\xe3o tem permiss\xe3o para editar este usu\xe1rio.")})(e),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"Editar usu\xe1rio",children:(0,Td.jsx)(lg,{className:"w-4 h-4"})}),t.nivel===ev.ADMIN&&"admin"!==e.email&&e.id!==t.id&&(0,Td.jsx)("button",{onClick:()=>(e=>{nv.canEditUser(t.nivel,t.id,e.id,e.nivel)?x(e):g("Voc\xea n\xe3o tem permiss\xe3o para remover este usu\xe1rio.")})(e),className:"text-red-600 hover:text-red-800",title:"Remover usu\xe1rio",children:(0,Td.jsx)(_p,{className:"w-4 h-4"})})]})})]},e.id))})]})})}),s&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4 max-h-screen overflow-y-auto",children:(0,Td.jsxs)("div",{className:"p-6",children:[(0,Td.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l?"Editar Usu\xe1rio":"Novo Usu\xe1rio"}),(0,Td.jsx)("button",{onClick:S,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Td.jsx)(vp,{className:"w-6 h-6"})})]}),(0,Td.jsxs)("div",{className:"space-y-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nome Completo *"}),(0,Td.jsx)("input",{type:"text",value:w.nome,onChange:e=>_(u(u({},w),{},{nome:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Digite o nome completo",disabled:f})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email/Usu\xe1rio *"}),(0,Td.jsx)("input",{type:"text",value:w.email,onChange:e=>_(u(u({},w),{},{email:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Digite o email ou nome de usu\xe1rio",disabled:f})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Senha ",l?"(deixe vazio para manter a atual)":"*"]}),(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)("input",{type:d?"text":"password",value:w.senha,onChange:e=>_(u(u({},w),{},{senha:e.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:l?"Nova senha":"Digite a senha",disabled:f}),(0,Td.jsx)("button",{type:"button",onClick:()=>h(!d),className:"absolute right-3 top-2 text-gray-400 hover:text-gray-600",disabled:f,children:d?(0,Td.jsx)(fg,{className:"w-5 h-5"}):(0,Td.jsx)(mg,{className:"w-5 h-5"})})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xedvel de Acesso *"}),(0,Td.jsx)("select",{value:w.nivel,onChange:e=>_(u(u({},w),{},{nivel:parseInt(e.target.value)})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:f,children:k.map(e=>(0,Td.jsx)("option",{value:e.valor,children:e.label},e.valor))}),(0,Td.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[w.nivel===ev.FUNCIONARIO&&"Apenas visualizar informa\xe7\xf5es",w.nivel===ev.SUPERVISOR&&"Criar funcion\xe1rios + opera\xe7\xf5es",w.nivel===ev.GERENTE&&"Gerenciar funcion\xe1rios e usu\xe1rios",w.nivel===ev.ADMIN&&"Todas as permiss\xf5es"]})]}),(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("input",{type:"checkbox",id:"ativo",checked:w.ativo,onChange:e=>_(u(u({},w),{},{ativo:e.target.checked})),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded",disabled:f}),(0,Td.jsx)("label",{htmlFor:"ativo",className:"ml-2 text-sm text-gray-700",children:"Usu\xe1rio ativo"})]})]}),p&&(0,Td.jsx)("div",{className:"mt-4 bg-red-50 border border-red-200 text-red-600 px-3 py-2 rounded-lg text-sm",children:p}),v&&(0,Td.jsx)("div",{className:"mt-4 bg-green-50 border border-green-200 text-green-600 px-3 py-2 rounded-lg text-sm",children:v}),(0,Td.jsxs)("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[(0,Td.jsx)("button",{onClick:S,disabled:f,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,Td.jsx)("button",{onClick:async()=>{g(""),y(""),m(!0);const t=w.nome.trim()?w.email.trim()?l||w.senha?w.senha&&w.senha.length<4?"Senha deve ter pelo menos 4 caracteres":e.find(e=>e.email===w.email&&(!l||e.id!==l.id))?"Este email/usu\xe1rio j\xe1 est\xe1 em uso":null:"Senha \xe9 obrigat\xf3ria":"Email/usu\xe1rio \xe9 obrigat\xf3rio":"Nome \xe9 obrigat\xf3rio";if(t)return g(t),void m(!1);try{const e={nome:w.nome.trim(),email:w.email.trim(),nivel:w.nivel,ativo:w.ativo};let t;w.senha&&(e.senha=w.senha),l?(t=await a(l.id,e),y("Usu\xe1rio atualizado com sucesso!")):(t=await n(e),y("Usu\xe1rio criado com sucesso!")),t.success?setTimeout(()=>{S()},1500):g(t.message||"Erro ao salvar usu\xe1rio")}catch(r){g("Erro ao salvar usu\xe1rio: "+r.message)}finally{m(!1)}},disabled:f,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:f?(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):l?"Atualizar":"Criar"})]})]})})}),b&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsx)("div",{className:"bg-white rounded-lg max-w-md w-full mx-4",children:(0,Td.jsxs)("div",{className:"p-6",children:[(0,Td.jsx)("div",{className:"flex items-center mb-4",children:(0,Td.jsx)("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,Td.jsx)(pg,{className:"h-6 w-6 text-red-600"})})}),(0,Td.jsxs)("div",{className:"text-center",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Confirmar Remo\xe7\xe3o"}),(0,Td.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["Tem certeza que deseja remover o usu\xe1rio ",(0,Td.jsx)("strong",{children:b.nome}),"? Esta a\xe7\xe3o n\xe3o pode ser desfeita."]})]}),(0,Td.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,Td.jsx)("button",{onClick:()=>x(null),disabled:f,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),(0,Td.jsx)("button",{onClick:async()=>{if(b){m(!0);try{const e=await i(b.id);e.success?(y("Usu\xe1rio removido com sucesso!"),x(null),setTimeout(()=>y(""),3e3)):g(e.message||"Erro ao remover usu\xe1rio")}catch(e){g("Erro ao remover usu\xe1rio: "+e.message)}finally{m(!1)}}},disabled:f,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:f?(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Removendo..."]}):"Remover"})]})]})})})]})},vg=Nd("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]),yg=Nd("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),bg=Nd("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),xg=e=>{let{ferramentasDanificadas:t,inventario:n,adicionarFerramentaDanificada:a,atualizarFerramentaDanificada:i,removerFerramentaDanificada:s,readonly:o}=e;const{usuario:l}=(0,r.useContext)(sp),[c,d]=(null===l||void 0===l||l.nivel,(0,r.useState)({nomeItem:"",categoria:"",descricaoProblema:"",responsavel:"",dataOcorrencia:(new Date).toISOString().split("T")[0],custoReparo:"",statusReparo:"aguardando",observacoes:"",prioridade:"media"})),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)("todos"),[g,v]=(0,r.useState)(!1),y=t.filter(e=>{const t=e.nomeItem.toLowerCase().includes(h.toLowerCase())||e.descricaoProblema.toLowerCase().includes(h.toLowerCase())||e.responsavel.toLowerCase().includes(h.toLowerCase()),n="todos"===m||e.statusReparo===m;return t&&n}),b=e=>{switch(e){case"aguardando":return"bg-yellow-100 text-yellow-800";case"em_reparo":return"bg-blue-100 text-blue-800";case"reparado":return"bg-green-100 text-green-800";case"irreparavel":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{switch(e){case"aguardando":return"Aguardando Reparo";case"em_reparo":return"Em Reparo";case"reparado":return"Reparado";case"irreparavel":return"Irrepar\xe1vel";default:return e}},w=e=>{switch(e){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},_={total:t.length,aguardando:t.filter(e=>"aguardando"===e.statusReparo).length,emReparo:t.filter(e=>"em_reparo"===e.statusReparo).length,reparadas:t.filter(e=>"reparado"===e.statusReparo).length,irreparaveis:t.filter(e=>"irreparavel"===e.statusReparo).length};return(0,Td.jsxs)("div",{className:"space-y-6",children:[(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Td.jsx)("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:(0,Td.jsx)(pg,{className:"w-5 h-5 text-orange-600"})}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Ferramentas Danificadas"}),(0,Td.jsx)("p",{className:"text-sm text-gray-500",children:"Controle e acompanhamento de reparos"})]})]}),(0,Td.jsxs)("button",{onClick:()=>v(!0),className:"btn-primary flex items-center gap-2",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Registrar Dano"]})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,Td.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:_.total}),(0,Td.jsx)("div",{className:"text-sm text-gray-500",children:"Total"})]}),(0,Td.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:_.aguardando}),(0,Td.jsx)("div",{className:"text-sm text-yellow-600",children:"Aguardando"})]}),(0,Td.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:_.emReparo}),(0,Td.jsx)("div",{className:"text-sm text-blue-600",children:"Em Reparo"})]}),(0,Td.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-green-600",children:_.reparadas}),(0,Td.jsx)("div",{className:"text-sm text-green-600",children:"Reparadas"})]}),(0,Td.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-red-600",children:_.irreparaveis}),(0,Td.jsx)("div",{className:"text-sm text-red-600",children:"Irrepar\xe1veis"})]})]}),(0,Td.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Td.jsxs)("div",{className:"flex-1 relative",children:[(0,Td.jsx)(wp,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",placeholder:"Buscar por ferramenta, problema ou respons\xe1vel...",value:h,onChange:e=>f(e.target.value),className:"pl-10 form-input"})]}),(0,Td.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"form-select w-full md:w-48",children:[(0,Td.jsx)("option",{value:"todos",children:"Todos os Status"}),(0,Td.jsx)("option",{value:"aguardando",children:"Aguardando Reparo"}),(0,Td.jsx)("option",{value:"em_reparo",children:"Em Reparo"}),(0,Td.jsx)("option",{value:"reparado",children:"Reparado"}),(0,Td.jsx)("option",{value:"irreparavel",children:"Irrepar\xe1vel"})]})]})]}),(0,Td.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:y.map(e=>(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-orange-500",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Td.jsxs)("div",{className:"flex-1",children:[(0,Td.jsxs)("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-2",children:[(0,Td.jsx)(vg,{className:"w-5 h-5 text-orange-600"}),e.nomeItem]}),e.categoria&&(0,Td.jsx)("p",{className:"text-gray-500 text-sm",children:e.categoria})]}),(0,Td.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,Td.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(b(e.statusReparo)),children:x(e.statusReparo)}),(0,Td.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(w(e.prioridade)),children:["Prioridade ",e.prioridade.charAt(0).toUpperCase()+e.prioridade.slice(1)]}),(0,Td.jsxs)("select",{className:"form-select mt-2 text-xs",value:e.statusReparo,onChange:t=>i(e.id,{statusReparo:t.target.value}),children:[(0,Td.jsx)("option",{value:"aguardando",children:"Aguardando Reparo"}),(0,Td.jsx)("option",{value:"em_reparo",children:"Em Reparo"}),(0,Td.jsx)("option",{value:"reparado",children:"Reparado"}),(0,Td.jsx)("option",{value:"irreparavel",children:"Irrepar\xe1vel"})]})]})]}),(0,Td.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Td.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 font-medium text-red-800 mb-1",children:[(0,Td.jsx)(yg,{className:"w-4 h-4"}),"Descri\xe7\xe3o do Problema"]}),(0,Td.jsx)("p",{className:"text-red-700",children:e.descricaoProblema})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,Td.jsx)(dg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[(0,Td.jsx)("strong",{children:"Respons\xe1vel:"})," ",e.responsavel]})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,Td.jsx)(bg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[(0,Td.jsx)("strong",{children:"Data:"})," ",new Date(e.dataOcorrencia).toLocaleDateString("pt-BR")]})]})]}),e.custoReparo>0&&(0,Td.jsxs)("div",{className:"bg-blue-50 p-2 rounded",children:[(0,Td.jsx)("strong",{className:"text-blue-800",children:"Custo de Reparo:"}),(0,Td.jsxs)("span",{className:"text-blue-700 ml-1",children:["R$ ",e.custoReparo.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),e.observacoes&&(0,Td.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Td.jsx)("strong",{className:"text-gray-700",children:"Observa\xe7\xf5es:"}),(0,Td.jsx)("p",{className:"text-gray-600 mt-1",children:e.observacoes})]})]})]},e.id))}),0===y.length&&(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Td.jsx)(pg,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,Td.jsx)("p",{className:"text-gray-500 text-lg",children:h||"todos"!==m?"Nenhuma ferramenta danificada encontrada":"Nenhuma ferramenta danificada registrada"}),(0,Td.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:h||"todos"!==m?"Tente alterar os filtros de busca":'Clique em "Registrar Dano" para adicionar uma ocorr\xeancia'})]}),g&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Td.jsx)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,Td.jsxs)("div",{className:"p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Td.jsxs)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[(0,Td.jsx)(pg,{className:"w-5 h-5 text-orange-600"}),"Registrar Ferramenta Danificada"]}),(0,Td.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Td.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!c.nomeItem||!c.descricaoProblema)return void alert("Preencha pelo menos o nome da ferramenta e descri\xe7\xe3o do problema!");const t=u(u({},c),{},{custoReparo:c.custoReparo?parseFloat(c.custoReparo):0});await a(t)?(d({nomeItem:"",categoria:"",descricaoProblema:"",responsavel:"",dataOcorrencia:(new Date).toISOString().split("T")[0],custoReparo:"",statusReparo:"aguardando",observacoes:"",prioridade:"media"}),v(!1),alert("Ferramenta danificada registrada com sucesso!")):alert("Erro ao registrar ferramenta danificada. Tente novamente.")},className:"space-y-4",children:[(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Ferramenta *"}),(0,Td.jsxs)("select",{value:c.nomeItem,onChange:e=>d(u(u({},c),{},{nomeItem:e.target.value})),className:"form-select",required:!0,children:[(0,Td.jsx)("option",{value:"",children:"Selecione a ferramenta"}),n.map(e=>(0,Td.jsx)("option",{value:e.nome,children:e.nome},e.id))]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),(0,Td.jsx)("input",{type:"text",value:c.categoria,onChange:e=>d(u(u({},c),{},{categoria:e.target.value})),className:"form-input",placeholder:"Ex: Ferramenta El\xe9trica"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o do Problema *"}),(0,Td.jsx)("textarea",{value:c.descricaoProblema,onChange:e=>d(u(u({},c),{},{descricaoProblema:e.target.value})),className:"form-input h-24 resize-none",placeholder:"Descreva detalhadamente o problema encontrado na ferramenta...",required:!0})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Respons\xe1vel pelo Relato"}),(0,Td.jsxs)("select",{value:c.responsavel,onChange:e=>d(u(u({},c),{},{responsavel:e.target.value})),className:"form-select",required:!0,children:[(0,Td.jsx)("option",{value:"",children:"Selecione o respons\xe1vel"}),Array.isArray(window.funcionarios)&&window.funcionarios.length>0?window.funcionarios.map(e=>(0,Td.jsx)("option",{value:e.nome,children:e.nome},e.id)):null]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data da Ocorr\xeancia"}),(0,Td.jsx)("input",{type:"date",value:c.dataOcorrencia,onChange:e=>d(u(u({},c),{},{dataOcorrencia:e.target.value})),className:"form-input"})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridade"}),(0,Td.jsxs)("select",{value:c.prioridade,onChange:e=>d(u(u({},c),{},{prioridade:e.target.value})),className:"form-select",children:[(0,Td.jsx)("option",{value:"baixa",children:"Baixa"}),(0,Td.jsx)("option",{value:"media",children:"M\xe9dia"}),(0,Td.jsx)("option",{value:"alta",children:"Alta"})]})]})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status do Reparo"}),(0,Td.jsxs)("select",{value:c.statusReparo,onChange:e=>d(u(u({},c),{},{statusReparo:e.target.value})),className:"form-select",children:[(0,Td.jsx)("option",{value:"aguardando",children:"Aguardando Reparo"}),(0,Td.jsx)("option",{value:"em_reparo",children:"Em Reparo"}),(0,Td.jsx)("option",{value:"reparado",children:"Reparado"}),(0,Td.jsx)("option",{value:"irreparavel",children:"Irrepar\xe1vel"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custo Estimado de Reparo (R$)"}),(0,Td.jsx)("input",{type:"number",step:"0.01",min:"0",value:c.custoReparo,onChange:e=>d(u(u({},c),{},{custoReparo:e.target.value})),className:"form-input",placeholder:"0,00"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es Adicionais"}),(0,Td.jsx)("textarea",{value:c.observacoes,onChange:e=>d(u(u({},c),{},{observacoes:e.target.value})),className:"form-input h-20 resize-none",placeholder:"Informa\xe7\xf5es complementares sobre o dano ou reparo..."})]}),(0,Td.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,Td.jsx)("button",{type:"submit",className:"btn-primary flex-1",children:"Registrar Ferramenta Danificada"}),(0,Td.jsx)("button",{type:"button",onClick:()=>v(!1),className:"btn-secondary flex-1",children:"Cancelar"})]})]})]})})})]})},wg=Nd("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),_g=e=>{let{funcionarios:t,onSelecionarFuncionarios:n}=e;const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),u=(0,r.useRef)();(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[u]),(0,r.useEffect)(()=>()=>{c([]),n([])},[]);const d=(h=a,t.filter(e=>(!h||e.nome.toLowerCase().includes(h.toLowerCase()))&&!l.includes(e.id)).slice(0,15));var h;const f=t.filter(e=>l.includes(e.id));return(0,Td.jsxs)("div",{className:"flex flex-col gap-2",ref:u,children:[(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsxs)("button",{onClick:()=>o(!s),className:"w-full px-4 py-2 bg-white border border-gray-300 rounded-lg flex items-center justify-between hover:border-green-500 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)(wg,{className:"w-4 h-4 text-gray-400"}),(0,Td.jsx)("span",{className:"text-gray-700",children:a||"Selecionar funcion\xe1rios..."})]}),(0,Td.jsx)("svg",{className:"w-4 h-4 text-gray-400 transition-transform ".concat(s?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Td.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),s&&(0,Td.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-64 overflow-auto",children:[(0,Td.jsx)("div",{className:"sticky top-0 bg-white border-b border-gray-100",children:(0,Td.jsx)("div",{className:"flex items-center px-3 py-2",children:(0,Td.jsx)("input",{type:"text",value:a,onChange:e=>i(e.target.value),placeholder:"Digite para filtrar funcion\xe1rios...",className:"w-full px-2 py-1 text-sm border-none focus:ring-0 focus:outline-none",onClick:e=>e.stopPropagation()})})}),d.length>0?d.map(e=>(0,Td.jsxs)("button",{onClick:()=>(e=>{if(!n)return;const t=[...l,e.id];c(t),n(t),i(""),o(!1)})(e),className:"w-full px-4 py-2 text-left hover:bg-gray-50 flex items-center gap-2 transition-colors",children:[(0,Td.jsx)(wg,{className:"w-4 h-4 text-gray-400"}),(0,Td.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.nome}),(0,Td.jsx)("span",{className:"text-xs text-gray-500 ml-auto",children:e.cargo||"Funcion\xe1rio"})]},e.id)):0===t.length?(0,Td.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Nenhum funcion\xe1rio cadastrado"}):(0,Td.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500",children:"Nenhum funcion\xe1rio encontrado com esse filtro"})]})]}),(0,Td.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:f.map(e=>(0,Td.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-green-50 text-green-700 rounded-full border border-green-200",children:[(0,Td.jsx)(wg,{className:"w-4 h-4"}),(0,Td.jsx)("span",{className:"text-sm font-medium",children:e.nome}),(0,Td.jsx)("button",{onClick:()=>(e=>{if(!n)return;const t=l.filter(t=>t!==e);c(t),n(t)})(e.id),className:"p-0.5 hover:bg-green-100 rounded-full transition-colors",children:(0,Td.jsx)(vp,{className:"w-4 h-4"})})]},e.id))})]})},Ng=e=>{let{adicionarTarefa:t,funcionarios:n=[]}=e;const[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)({titulo:"",descricao:"",prazo:"",prioridade:"normal",responsaveis:[]});return(0,Td.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,Td.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Nova Tarefa"}),(0,Td.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s.titulo&&s.descricao)try{if(0===a.length)throw new Error("Selecione pelo menos um respons\xe1vel pela tarefa");await t(u(u({},s),{},{responsaveis:a}))&&(o({titulo:"",descricao:"",prazo:"",prioridade:"normal",responsaveis:[]}),i([]))}catch(n){console.error("Erro ao criar tarefa:",n)}},className:"space-y-4",children:[(0,Td.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"T\xedtulo"}),(0,Td.jsx)("input",{type:"text",value:s.titulo,onChange:e=>o(t=>u(u({},t),{},{titulo:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prazo"}),(0,Td.jsx)("input",{type:"datetime-local",value:s.prazo,onChange:e=>o(t=>u(u({},t),{},{prazo:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o"}),(0,Td.jsx)("textarea",{value:s.descricao,onChange:e=>o(t=>u(u({},t),{},{descricao:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",rows:3,required:!0})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade"}),(0,Td.jsxs)("select",{value:s.prioridade,onChange:e=>o(t=>u(u({},t),{},{prioridade:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"baixa",children:"Baixa"}),(0,Td.jsx)("option",{value:"normal",children:"Normal"}),(0,Td.jsx)("option",{value:"alta",children:"Alta"}),(0,Td.jsx)("option",{value:"urgente",children:"Urgente"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respons\xe1veis"}),(0,Td.jsx)(_g,{funcionarios:n,onSelecionarFuncionarios:e=>{i(e),o(t=>u(u({},t),{},{responsaveis:e}))}})]})]}),(0,Td.jsx)("div",{className:"flex justify-end",children:(0,Td.jsxs)("button",{type:"submit",className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Criar Tarefa"]})})]})]})},Eg=Nd("calendar-clock",[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]),Sg=Nd("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),kg=e=>{let{tarefas:t,atualizarTarefa:n,removerTarefa:r,readonly:a=!1}=e;const i=e=>{const t={baixa:"bg-blue-100 text-blue-800",normal:"bg-gray-100 text-gray-800",alta:"bg-orange-100 text-orange-800",urgente:"bg-red-100 text-red-800"};return t[e]||t.normal},s=e=>{const t={pendente:"bg-yellow-100 text-yellow-800","em-andamento":"bg-blue-100 text-blue-800",concluida:"bg-green-100 text-green-800",cancelada:"bg-gray-100 text-gray-800"};return t[e]||t.pendente};return(0,Td.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,Td.jsxs)("div",{className:"p-6",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Lista de Tarefas"}),(0,Td.jsxs)("div",{className:"space-y-4",children:[t.map(e=>(0,Td.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,Td.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,Td.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Td.jsx)("h4",{className:"text-lg font-medium text-gray-900 truncate",children:e.titulo}),(0,Td.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(i(e.prioridade)),children:e.prioridade.charAt(0).toUpperCase()+e.prioridade.slice(1)}),(0,Td.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(s(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,Td.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:e.descricao}),(0,Td.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-500",children:[e.prazo&&(0,Td.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Td.jsx)(Eg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:["Prazo: ",Ip(e.prazo)]})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Td.jsx)(wg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[e.responsaveis.length," respons\xe1vel(is)"]})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Td.jsx)(Tp,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:["Criado em: ",Ip(e.dataCriacao)]})]})]})]}),!a&&"concluida"!==e.status&&"cancelada"!==e.status&&(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)("button",{onClick:()=>n(e.id,"concluida"),className:"p-2 text-green-600 hover:text-green-700 transition-colors",title:"Marcar como conclu\xedda",children:(0,Td.jsx)(Sg,{className:"w-5 h-5"})}),(0,Td.jsx)("button",{onClick:()=>r(e.id),className:"p-2 text-red-600 hover:text-red-700 transition-colors",title:"Cancelar tarefa",children:(0,Td.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Td.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})},e.id)),0===t.length&&(0,Td.jsx)("div",{className:"text-center py-8 text-gray-500",children:"Nenhuma tarefa encontrada"})]})]})})},Tg=()=>{const{usuario:e}=op(),{funcionarios:t}=(()=>{const e=(0,r.useContext)(ap);if(!e)throw new Error("useFuncionarios deve ser usado dentro de um FuncionariosProvider");return e})(),{tarefas:n,loading:a,adicionarTarefa:i,atualizarTarefa:s,removerTarefa:o}=(()=>{const e=(0,r.useContext)(cp);if(!e)throw new Error("useTarefas deve ser usado dentro de um TarefasProvider");return e})();return a?(0,Td.jsx)("div",{children:"Carregando..."}):(0,Td.jsxs)("div",{className:"space-y-6",children:[(null===e||void 0===e?void 0:e.nivel)>=lp&&(0,Td.jsx)(Ng,{adicionarTarefa:i,funcionarios:t}),(0,Td.jsx)(kg,{tarefas:n,atualizarTarefa:s,removerTarefa:o,readonly:(null===e||void 0===e?void 0:e.nivel)<lp})]})},Cg=Nd("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),Ig=Nd("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),jg=()=>{const{usuario:e}=op(),[t,n]=(0,r.useState)([]),[a,i]=(0,r.useState)({assunto:"",descricao:""}),[s,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(null===e||void 0===e||!e.id)return;const t=md(1===e.nivel?Qu(ou(rp,"chamados"),Yu("usuarioId","==",e.id)):Qu(ou(rp,"chamados")),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));n(t),o(!1)});return()=>t()},[e]);const l=async(n,r)=>{if(r.trim())try{const a=lu(rp,"chamados",n);await dd(a,{respostas:[...t.find(e=>e.id===n).respostas,{texto:r,usuarioId:e.id,nomeUsuario:e.nome,data:(new Date).toISOString()}]})}catch(a){console.error("Erro ao responder chamado:",a)}};return s?(0,Td.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Td.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,Td.jsxs)("div",{className:"container mx-auto p-6",children:[(0,Td.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Suporte"}),1===(null===e||void 0===e?void 0:e.nivel)&&(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,Td.jsx)("h2",{className:"text-lg font-semibold text-gray-700 mb-4",children:"Novo Chamado"}),(0,Td.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),a.assunto&&a.descricao)try{await fd(ou(rp,"chamados"),u(u({},a),{},{usuarioId:e.id,nomeUsuario:e.nome,status:"aberto",dataCriacao:(new Date).toISOString(),respostas:[]})),i({assunto:"",descricao:""})}catch(n){console.error("Erro ao criar chamado:",n)}},className:"space-y-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Assunto"}),(0,Td.jsx)("input",{type:"text",value:a.assunto,onChange:e=>i(u(u({},a),{},{assunto:e.target.value})),className:"w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-green-500",required:!0})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descri\xe7\xe3o"}),(0,Td.jsx)("textarea",{value:a.descricao,onChange:e=>i(u(u({},a),{},{descricao:e.target.value})),className:"w-full rounded-lg border-gray-300 focus:ring-2 focus:ring-green-500",rows:4,required:!0})]}),(0,Td.jsxs)("button",{type:"submit",className:"w-full py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",children:[(0,Td.jsx)(Cg,{className:"w-4 h-4"}),"Enviar Chamado"]})]})]}),(0,Td.jsx)("div",{className:"space-y-4",children:t.map(t=>{var n;return(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:t.assunto}),(0,Td.jsxs)("p",{className:"text-sm text-gray-600",children:["Aberto por ",t.nomeUsuario," em ",Ip(t.dataCriacao)]})]}),(0,Td.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("aberto"===t.status?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:"aberto"===t.status?(0,Td.jsxs)(Td.Fragment,{children:[(0,Td.jsx)(Tp,{className:"w-4 h-4 inline mr-1"}),"Aberto"]}):(0,Td.jsxs)(Td.Fragment,{children:[(0,Td.jsx)(ig,{className:"w-4 h-4 inline mr-1"}),"Resolvido"]})})]}),(0,Td.jsx)("p",{className:"text-gray-700 mb-4",children:t.descricao}),(null===(n=t.respostas)||void 0===n?void 0:n.length)>0&&(0,Td.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,Td.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Respostas:"}),(0,Td.jsx)("div",{className:"space-y-3",children:t.respostas.map((e,t)=>(0,Td.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-700",children:e.nomeUsuario}),(0,Td.jsx)("span",{className:"text-xs text-gray-500",children:Ip(e.data)})]}),(0,Td.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.texto})]},t))})]}),(null===e||void 0===e?void 0:e.nivel)>=2&&"aberto"===t.status&&(0,Td.jsx)("div",{className:"mt-4 pt-4 border-t",children:(0,Td.jsxs)("div",{className:"flex gap-2",children:[(0,Td.jsx)("input",{type:"text",placeholder:"Digite sua resposta...",className:"flex-1 rounded-lg border-gray-300 focus:ring-2 focus:ring-green-500",onKeyPress:e=>{"Enter"===e.key&&(l(t.id,e.target.value),e.target.value="")}}),(0,Td.jsx)("button",{onClick:()=>{const e=document.querySelector('input[data-chamado-id="'.concat(t.id,'"]'));e&&(l(t.id,e.value),e.value="")},className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:(0,Td.jsx)(Ig,{className:"w-4 h-4"})})]})})]},t.id)})})]})},Ag=Nd("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Rg=Nd("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Dg=e=>{let{ferramentasPerdidas:t,inventario:n,adicionarFerramentaPerdida:a,atualizarFerramentaPerdida:i,removerFerramentaPerdida:s,readonly:o}=e;const{usuario:l}=op(),c="funcionario"===(null===l||void 0===l?void 0:l.nivel),[d,h]=(0,r.useState)({nomeItem:"",categoria:"",descricaoPerda:"",responsavel:"",localUltimaVez:"",dataPerdida:(new Date).toISOString().split("T")[0],valorEstimado:"",statusBusca:"buscando",observacoes:"",prioridade:"media"}),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)("todos"),[v,y]=(0,r.useState)(!1),b=t.filter(e=>{const t=e.nomeItem.toLowerCase().includes(f.toLowerCase())||e.descricaoPerda.toLowerCase().includes(f.toLowerCase())||e.responsavel.toLowerCase().includes(f.toLowerCase())||e.localUltimaVez.toLowerCase().includes(f.toLowerCase()),n="todos"===p||e.statusBusca===p;return t&&n}),x=e=>{switch(e){case"buscando":return"bg-yellow-100 text-yellow-800";case"encontrada":return"bg-green-100 text-green-800";case"perdida_definitiva":return"bg-red-100 text-red-800";case"substituida":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},w=e=>{switch(e){case"buscando":return"Buscando";case"encontrada":return"Encontrada";case"perdida_definitiva":return"Perda Definitiva";case"substituida":return"Substitu\xedda";default:return e}},_=e=>{switch(e){case"baixa":return"bg-green-100 text-green-800";case"media":return"bg-yellow-100 text-yellow-800";case"alta":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=(()=>{const e=t.length,n=t.filter(e=>"buscando"===e.statusBusca).length,r=t.filter(e=>"encontrada"===e.statusBusca).length,a=t.filter(e=>"perdida_definitiva"===e.statusBusca).length,i=t.filter(e=>"substituida"===e.statusBusca).length,s=t.filter(e=>"perdida_definitiva"===e.statusBusca).reduce((e,t)=>e+(t.valorEstimado||0),0);return{total:e,buscando:n,encontradas:r,perdidasDefinitivas:a,substituidas:i,valorTotalPerdido:s}})();return(0,Td.jsxs)("div",{className:"space-y-6",children:[(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[(0,Td.jsx)(kd,{className:"w-6 h-6 text-red-600"}),"Ferramentas Perdidas"]}),(0,Td.jsx)("p",{className:"text-gray-600 mt-1",children:"Controle e rastreamento de ferramentas perdidas"})]}),!c&&!o&&(0,Td.jsxs)("button",{onClick:()=>y(!0),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Registrar Perda"]})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:[(0,Td.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:N.total}),(0,Td.jsx)("div",{className:"text-sm text-gray-500",children:"Total"})]}),(0,Td.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:N.buscando}),(0,Td.jsx)("div",{className:"text-sm text-yellow-600",children:"Buscando"})]}),(0,Td.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-green-600",children:N.encontradas}),(0,Td.jsx)("div",{className:"text-sm text-green-600",children:"Encontradas"})]}),(0,Td.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-red-600",children:N.perdidasDefinitivas}),(0,Td.jsx)("div",{className:"text-sm text-red-600",children:"Perdidas"})]}),(0,Td.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,Td.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:N.substituidas}),(0,Td.jsx)("div",{className:"text-sm text-blue-600",children:"Substitu\xeddas"})]}),(0,Td.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg text-center",children:[(0,Td.jsxs)("div",{className:"text-lg font-bold text-orange-600",children:["R$ ",N.valorTotalPerdido.toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,Td.jsx)("div",{className:"text-sm text-orange-600",children:"Valor Perdido"})]})]}),(0,Td.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,Td.jsxs)("div",{className:"flex-1 relative",children:[(0,Td.jsx)(wp,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",placeholder:"Buscar por ferramenta, descri\xe7\xe3o, respons\xe1vel ou local...",value:f,onChange:e=>m(e.target.value),className:"pl-10 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,Td.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full md:w-48 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"todos",children:"Todos os Status"}),(0,Td.jsx)("option",{value:"buscando",children:"Buscando"}),(0,Td.jsx)("option",{value:"encontrada",children:"Encontrada"}),(0,Td.jsx)("option",{value:"perdida_definitiva",children:"Perda Definitiva"}),(0,Td.jsx)("option",{value:"substituida",children:"Substitu\xedda"})]})]})]}),(0,Td.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:b.map(e=>(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 border-l-4 border-red-500",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Td.jsxs)("div",{className:"flex-1",children:[(0,Td.jsxs)("h3",{className:"font-bold text-gray-800 text-lg flex items-center gap-2",children:[(0,Td.jsx)(kd,{className:"w-5 h-5 text-red-600"}),e.nomeItem]}),e.categoria&&(0,Td.jsx)("p",{className:"text-gray-500 text-sm",children:e.categoria})]}),(0,Td.jsxs)("div",{className:"flex flex-col gap-2 items-end",children:[(0,Td.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(x(e.statusBusca)),children:w(e.statusBusca)}),(0,Td.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(_(e.prioridade)),children:["Prioridade ",e.prioridade.charAt(0).toUpperCase()+e.prioridade.slice(1)]}),!o&&(0,Td.jsxs)("select",{className:"form-select mt-2 text-xs",value:e.statusBusca,onChange:t=>i(e.id,{statusBusca:t.target.value}),children:[(0,Td.jsx)("option",{value:"buscando",children:"Buscando"}),(0,Td.jsx)("option",{value:"encontrada",children:"Encontrada"}),(0,Td.jsx)("option",{value:"perdida_definitiva",children:"Perda Definitiva"}),(0,Td.jsx)("option",{value:"substituida",children:"Substitu\xedda"})]})]})]}),(0,Td.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,Td.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 font-medium text-red-800 mb-1",children:[(0,Td.jsx)(yg,{className:"w-4 h-4"}),"Descri\xe7\xe3o da Perda"]}),(0,Td.jsx)("p",{className:"text-red-700",children:e.descricaoPerda})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,Td.jsx)(dg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[(0,Td.jsx)("strong",{children:"Respons\xe1vel:"})," ",e.responsavel]})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,Td.jsx)(bg,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[(0,Td.jsx)("strong",{children:"Data da Perda:"})," ",new Date(e.dataPerdida).toLocaleDateString("pt-BR")]})]}),e.localUltimaVez&&(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-gray-600",children:[(0,Td.jsx)(Ag,{className:"w-4 h-4"}),(0,Td.jsxs)("span",{children:[(0,Td.jsx)("strong",{children:"\xdaltimo local visto:"})," ",e.localUltimaVez]})]})]}),e.valorEstimado>0&&(0,Td.jsxs)("div",{className:"bg-orange-50 p-2 rounded flex items-center gap-2",children:[(0,Td.jsx)(Rg,{className:"w-4 h-4 text-orange-600"}),(0,Td.jsxs)("span",{className:"text-orange-800",children:[(0,Td.jsx)("strong",{children:"Valor Estimado:"}),(0,Td.jsxs)("span",{className:"ml-1",children:["R$ ",e.valorEstimado.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),e.observacoes&&(0,Td.jsxs)("div",{className:"bg-gray-50 p-2 rounded",children:[(0,Td.jsx)("strong",{className:"text-gray-700",children:"Observa\xe7\xf5es:"}),(0,Td.jsx)("p",{className:"text-gray-600 mt-1",children:e.observacoes})]}),(0,Td.jsxs)("div",{className:"text-xs text-gray-400 border-t pt-2",children:["Perdida h\xe1 ",Math.floor((new Date-new Date(e.dataPerdida))/864e5)," dias"]})]})]},e.id))}),0===b.length&&(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,Td.jsx)(wp,{className:"w-16 h-16 mx-auto text-gray-300 mb-4"}),(0,Td.jsx)("p",{className:"text-gray-500 text-lg",children:f||"todos"!==p?"Nenhuma ferramenta perdida encontrada":"Nenhuma ferramenta perdida registrada"}),(0,Td.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:f||"todos"!==p?"Tente alterar os filtros de busca":'Clique em "Registrar Perda" para adicionar uma ocorr\xeancia'})]}),v&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Td.jsx)("div",{className:"bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:(0,Td.jsxs)("div",{className:"p-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Td.jsxs)("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[(0,Td.jsx)(wp,{className:"w-5 h-5 text-red-600"}),"Registrar Ferramenta Perdida"]}),(0,Td.jsx)("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,Td.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!d.nomeItem||!d.descricaoPerda)return void alert("Preencha pelo menos o nome da ferramenta e descri\xe7\xe3o da perda!");const t=u(u({},d),{},{valorEstimado:d.valorEstimado?parseFloat(d.valorEstimado):0});await a(t)?(h({nomeItem:"",categoria:"",descricaoPerda:"",responsavel:"",localUltimaVez:"",dataPerdida:(new Date).toISOString().split("T")[0],valorEstimado:"",statusBusca:"buscando",observacoes:"",prioridade:"media"}),y(!1),alert("Ferramenta perdida registrada com sucesso!")):alert("Erro ao registrar ferramenta perdida. Tente novamente.")},className:"space-y-4",children:[(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome da Ferramenta *"}),(0,Td.jsx)("input",{type:"text",value:d.nomeItem,onChange:e=>h(u(u({},d),{},{nomeItem:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Martelo Tramontina 25mm",list:"inventario-list",required:!0}),(0,Td.jsx)("datalist",{id:"inventario-list",children:n.map(e=>(0,Td.jsx)("option",{value:e.nome},e.id))})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),(0,Td.jsx)("input",{type:"text",value:d.categoria,onChange:e=>h(u(u({},d),{},{categoria:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Ferramenta Manual"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\xdaltimo Local Visto"}),(0,Td.jsx)("input",{type:"text",value:d.localUltimaVez,onChange:e=>h(u(u({},d),{},{localUltimaVez:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Ex: Obra da Rua A, Almoxarifado, Canteiro 3..."})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor Estimado (R$)"}),(0,Td.jsx)("input",{type:"number",step:"0.01",min:"0",value:d.valorEstimado,onChange:e=>h(u(u({},d),{},{valorEstimado:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0,00"})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status da Busca"}),(0,Td.jsxs)("select",{value:d.statusBusca,onChange:e=>h(u(u({},d),{},{statusBusca:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"buscando",children:"Buscando"}),(0,Td.jsx)("option",{value:"encontrada",children:"Encontrada"}),(0,Td.jsx)("option",{value:"perdida_definitiva",children:"Perda Definitiva"}),(0,Td.jsx)("option",{value:"substituida",children:"Substitu\xedda"})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridade"}),(0,Td.jsxs)("select",{value:d.prioridade,onChange:e=>h(u(u({},d),{},{prioridade:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"baixa",children:"Baixa"}),(0,Td.jsx)("option",{value:"media",children:"M\xe9dia"}),(0,Td.jsx)("option",{value:"alta",children:"Alta"})]})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observa\xe7\xf5es e A\xe7\xf5es Tomadas"}),(0,Td.jsx)("textarea",{value:d.observacoes,onChange:e=>h(u(u({},d),{},{observacoes:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent h-20 resize-none",placeholder:"Ex: J\xe1 foi feita busca no almoxarifado, verificado com outros funcion\xe1rios..."})]}),(0,Td.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 text-blue-800 mb-2",children:[(0,Td.jsx)(kd,{className:"w-4 h-4"}),(0,Td.jsx)("span",{className:"font-medium",children:"Dicas para recupera\xe7\xe3o:"})]}),(0,Td.jsxs)("ul",{className:"text-sm text-blue-700 space-y-1",children:[(0,Td.jsx)("li",{children:"\u2022 Verifique os locais de trabalho recentes"}),(0,Td.jsx)("li",{children:"\u2022 Consulte outros funcion\xe1rios da equipe"}),(0,Td.jsx)("li",{children:"\u2022 Confira ve\xedculos e equipamentos utilizados"}),(0,Td.jsx)("li",{children:"\u2022 Examine \xe1reas de armazenamento tempor\xe1rio"})]})]}),(0,Td.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,Td.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Registrar Ferramenta Perdida"}),(0,Td.jsx)("button",{type:"button",onClick:()=>y(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-700 py-2 px-4 rounded-lg transition-colors",children:"Cancelar"})]})]})]})})})]})},Pg=Nd("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Og="solicitado",Lg="aprovado",Mg="pedido_enviado",Fg="recebido",Ug={solicitado:"Solicitado",aprovado:"Aprovado",pedido_enviado:"Pedido Enviado",recebido:"Recebido",cancelado:"Cancelado"},Vg={solicitado:"bg-blue-100 text-blue-800",aprovado:"bg-green-100 text-green-800",pedido_enviado:"bg-yellow-100 text-yellow-800",recebido:"bg-purple-100 text-purple-800",cancelado:"bg-red-100 text-red-800"},zg="media",qg={baixa:"Baixa",media:"M\xe9dia",alta:"Alta",urgente:"Urgente"},Bg={baixa:"bg-gray-100 text-gray-800",media:"bg-blue-100 text-blue-800",alta:"bg-orange-100 text-orange-800",urgente:"bg-red-100 text-red-800"},Hg=e=>{let{compras:t,inventario:n,funcionarios:a,adicionarCompra:i,removerCompra:s,atualizarCompra:o,readonly:l=!1}=e;const[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)("todos"),[m,p]=(0,r.useState)("todas"),[g,v]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)(null),[_,N]=(0,r.useState)(null),[E,S]=(0,r.useState)({descricao:"",quantidade:1,valorUnitario:"",fornecedor:"",prioridade:zg,solicitante:"",observacoes:"",status:Og}),k=t.filter(e=>{var t,n,r;const a=""===c||(null===(t=e.descricao)||void 0===t?void 0:t.toLowerCase().includes(c.toLowerCase()))||(null===(n=e.fornecedor)||void 0===n?void 0:n.toLowerCase().includes(c.toLowerCase()))||(null===(r=e.solicitante)||void 0===r?void 0:r.toLowerCase().includes(c.toLowerCase())),i="todos"===h||e.status===h,s="todas"===m||e.prioridade===m;return a&&i&&s}),T={total:t.length,solicitado:t.filter(e=>e.status===Og).length,aprovado:t.filter(e=>e.status===Lg).length,enviado:t.filter(e=>e.status===Mg).length,recebido:t.filter(e=>e.status===Fg).length,valorTotal:t.reduce((e,t)=>e+(t.valorTotal||0),0)};return(0,Td.jsxs)("div",{className:"space-y-6",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gest\xe3o de Compras"}),(0,Td.jsx)("p",{className:"text-gray-600",children:"Gerenciar solicita\xe7\xf5es e pedidos de compra"})]}),!l&&(0,Td.jsxs)("button",{onClick:()=>{N(null),S({descricao:"",quantidade:1,valorUnitario:"",fornecedor:"",prioridade:zg,solicitante:"",observacoes:"",status:Og}),v(!0)},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[(0,Td.jsx)(bp,{className:"w-4 h-4"}),"Nova Solicita\xe7\xe3o"]})]}),(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,Td.jsx)("div",{className:"bg-white p-4 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)(Pg,{className:"w-8 h-8 text-purple-600"}),(0,Td.jsxs)("div",{className:"ml-3",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total"}),(0,Td.jsx)("p",{className:"text-xl font-bold text-gray-900",children:T.total})]})]})}),(0,Td.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-blue-600",children:"Solicitado"}),(0,Td.jsx)("p",{className:"text-xl font-bold text-blue-900",children:T.solicitado})]}),(0,Td.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-green-600",children:"Aprovado"}),(0,Td.jsx)("p",{className:"text-xl font-bold text-green-900",children:T.aprovado})]}),(0,Td.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-yellow-600",children:"Enviado"}),(0,Td.jsx)("p",{className:"text-xl font-bold text-yellow-900",children:T.enviado})]}),(0,Td.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-purple-600",children:"Recebido"}),(0,Td.jsx)("p",{className:"text-xl font-bold text-purple-900",children:T.recebido})]}),(0,Td.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Valor Total"}),(0,Td.jsxs)("p",{className:"text-lg font-bold text-gray-900",children:["R$ ",T.valorTotal.toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})]}),(0,Td.jsx)("div",{className:"bg-white p-4 rounded-lg shadow space-y-4",children:(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)(wp,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",placeholder:"Pesquisar compras...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,Td.jsxs)("select",{value:h,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"todos",children:"Todos os status"}),Object.entries(Ug).map(e=>{let[t,n]=e;return(0,Td.jsx)("option",{value:t,children:n},t)})]}),(0,Td.jsxs)("select",{value:m,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,Td.jsx)("option",{value:"todas",children:"Todas as prioridades"}),Object.entries(qg).map(e=>{let[t,n]=e;return(0,Td.jsx)("option",{value:t,children:n},t)})]}),(0,Td.jsxs)("div",{className:"text-sm text-gray-600 flex items-center",children:["Mostrando ",k.length," de ",t.length," compras"]})]})}),(0,Td.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:0===k.length?(0,Td.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,Td.jsx)(Pg,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),(0,Td.jsx)("p",{children:"Nenhuma compra encontrada."})]}):(0,Td.jsx)("div",{className:"overflow-x-auto",children:(0,Td.jsxs)("table",{className:"w-full",children:[(0,Td.jsx)("thead",{className:"bg-gray-50",children:(0,Td.jsxs)("tr",{children:[(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantidade"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Fornecedor"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prioridade"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),(0,Td.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A\xe7\xf5es"})]})}),(0,Td.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(e=>{var t,n;return(0,Td.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsxs)("div",{children:[(0,Td.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.descricao}),e.solicitante&&(0,Td.jsxs)("div",{className:"text-sm text-gray-500",children:["Solicitante: ",e.solicitante]})]})}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.quantidade}),(0,Td.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Td.jsxs)("div",{className:"text-sm text-gray-900",children:["R$ ",(e.valorUnitario||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),(0,Td.jsxs)("div",{className:"text-sm text-gray-500",children:["Total: R$ ",(e.valorTotal||0).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.fornecedor||"N\xe3o informado"}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsx)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{const n={status:t,dataAtualizacao:new Date};t===Lg?n.dataAprovacao=new Date:t===Mg?n.dataPedido=new Date:t===Fg&&(n.dataRecebimento=new Date),await o(e,n)}catch(n){alert("Erro ao atualizar status: "+n.message)}})(e.id,t.target.value),disabled:l,className:"text-xs font-medium px-2.5 py-0.5 rounded-full border-0 ".concat(Vg[e.status]," ").concat(l?"cursor-not-allowed":"cursor-pointer"),children:Object.entries(Ug).map(e=>{let[t,n]=e;return(0,Td.jsx)("option",{value:t,children:n},t)})})}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Td.jsx)("span",{className:"inline-flex text-xs font-medium px-2.5 py-0.5 rounded-full ".concat(Bg[e.prioridade]),children:qg[e.prioridade]})}),(0,Td.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[(0,Td.jsxs)("div",{children:["Sol: ",null!==(t=e.dataSolicitacao)&&void 0!==t&&t.toDate?e.dataSolicitacao.toDate().toLocaleDateString("pt-BR"):e.dataSolicitacao]}),e.dataRecebimento&&(0,Td.jsxs)("div",{children:["Rec: ",null!==(n=e.dataRecebimento)&&void 0!==n&&n.toDate?e.dataRecebimento.toDate().toLocaleDateString("pt-BR"):e.dataRecebimento]})]}),(0,Td.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:!l&&(0,Td.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Td.jsx)("button",{onClick:()=>(e=>{N(e),S(u({},e)),v(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",title:"Editar",children:(0,Td.jsx)(lg,{className:"w-4 h-4"})}),(0,Td.jsx)("button",{onClick:()=>(e=>{w(e),b(!0)})(e),className:"text-red-600 hover:text-red-900",title:"Excluir",children:(0,Td.jsx)(_p,{className:"w-4 h-4"})})]})})]},e.id)})})]})})}),g&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:_?"Editar Compra":"Nova Solicita\xe7\xe3o de Compra"}),(0,Td.jsx)("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,Td.jsx)(vp,{className:"w-6 h-6"})})]}),(0,Td.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=u(u({},E),{},{quantidade:Number(E.quantidade),valorUnitario:parseFloat(E.valorUnitario||0),valorTotal:Number(E.quantidade)*parseFloat(E.valorUnitario||0),dataSolicitacao:_?_.dataSolicitacao:new Date,dataAtualizacao:new Date});_?await o(_.id,e):await i(e),v(!1),N(null)}catch(t){alert("Erro ao salvar compra: "+t.message)}},className:"space-y-4",children:[(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Td.jsxs)("div",{className:"md:col-span-2",children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descri\xe7\xe3o do Item *"}),(0,Td.jsx)("input",{type:"text",value:E.descricao,onChange:e=>S(u(u({},E),{},{descricao:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Furadeira el\xe9trica 1/2",required:!0})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantidade *"}),(0,Td.jsx)("input",{type:"number",min:"1",value:E.quantidade,onChange:e=>S(u(u({},E),{},{quantidade:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Valor Unit\xe1rio (R$)"}),(0,Td.jsx)("input",{type:"number",step:"0.01",min:"0",value:E.valorUnitario,onChange:e=>S(u(u({},E),{},{valorUnitario:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"0.00"})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fornecedor"}),(0,Td.jsx)("input",{type:"text",value:E.fornecedor,onChange:e=>S(u(u({},E),{},{fornecedor:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nome do fornecedor"})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridade *"}),(0,Td.jsx)("select",{value:E.prioridade,onChange:e=>S(u(u({},E),{},{prioridade:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:Object.entries(qg).map(e=>{let[t,n]=e;return(0,Td.jsx)("option",{value:t,children:n},t)})})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Solicitante"}),(0,Td.jsx)("input",{type:"text",value:E.solicitante,onChange:e=>S(u(u({},E),{},{solicitante:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Nome do solicitante"})]}),_&&(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,Td.jsx)("select",{value:E.status,onChange:e=>S(u(u({},E),{},{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:Object.entries(Ug).map(e=>{let[t,n]=e;return(0,Td.jsx)("option",{value:t,children:n},t)})})]}),(0,Td.jsxs)("div",{className:"md:col-span-2",children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observa\xe7\xf5es"}),(0,Td.jsx)("textarea",{value:E.observacoes,onChange:e=>S(u(u({},E),{},{observacoes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Observa\xe7\xf5es adicionais..."})]})]}),E.quantidade&&E.valorUnitario&&(0,Td.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg",children:(0,Td.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Td.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Valor Total:"}),(0,Td.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["R$ ",(Number(E.quantidade)*parseFloat(E.valorUnitario)).toLocaleString("pt-BR",{minimumFractionDigits:2})]})]})}),(0,Td.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,Td.jsx)("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,Td.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-lg hover:bg-purple-700",children:_?"Atualizar":"Solicitar"})]})]})]})}),y&&x&&(0,Td.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Td.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,Td.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Confirmar Exclus\xe3o"}),(0,Td.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:['Tem certeza que deseja excluir a compra "',x.descricao,'"? Esta a\xe7\xe3o n\xe3o pode ser desfeita.']}),(0,Td.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Td.jsx)("button",{onClick:()=>{b(!1),w(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancelar"}),(0,Td.jsx)("button",{onClick:async()=>{try{await s(x.id),b(!1),w(null)}catch(e){alert("Erro ao excluir compra: "+e.message)}},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700",children:"Excluir"})]})]})})]})},Wg=()=>{const[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=md(Qu(ou(rp,"emprestimos"),function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Hu("orderBy",e);return $u._create(n,t)}("dataUltimaTransferencia","desc")),e=>{const n=[];e.docs.forEach(e=>{var t;const r=e.data();(null===(t=r.historicoTransferencias)||void 0===t?void 0:t.length)>0&&r.historicoTransferencias.forEach(t=>{n.push(u(u({id:e.id,emprestimoId:e.id},t),{},{ferramentas:r.ferramentas}))})}),t(n),a(!1)});return()=>e()},[]),n?(0,Td.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,Td.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(0,Td.jsxs)("div",{className:"container mx-auto p-6",children:[(0,Td.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Hist\xf3rico de Transfer\xeancias"}),0===e.length?(0,Td.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[(0,Td.jsx)(kp,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,Td.jsx)("p",{className:"text-gray-500",children:"Nenhuma transfer\xeancia registrada."})]}):(0,Td.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>(0,Td.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:[(0,Td.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,Td.jsx)("span",{className:"text-gray-600",children:"De:"}),(0,Td.jsx)("span",{className:"font-medium text-gray-900",children:e.de}),(0,Td.jsx)(Cp,{className:"w-4 h-4 text-gray-400"}),(0,Td.jsx)("span",{className:"text-gray-600",children:"Para:"}),(0,Td.jsx)("span",{className:"font-medium text-gray-900",children:e.para})]}),(0,Td.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,Td.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Td.jsx)(bg,{className:"w-4 h-4"}),Ip(e.data)]}),(0,Td.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Td.jsx)(Tp,{className:"w-4 h-4"}),new Date(e.data).toLocaleTimeString()]})]})]}),(0,Td.jsxs)("div",{className:"text-sm text-gray-500",children:["ID do Empr\xe9stimo: #",e.emprestimoId.slice(-4)]})]}),(0,Td.jsxs)("div",{className:"mt-4",children:[(0,Td.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Ferramentas:"}),(0,Td.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.ferramentas.map((e,t)=>(0,Td.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 p-2 rounded-md",children:[(0,Td.jsx)(kp,{className:"w-4 h-4 text-gray-400"}),(0,Td.jsxs)("span",{className:"text-sm text-gray-800",children:["string"===typeof e?e:e.nome,"string"!==typeof e&&e.quantidade>1&&" (".concat(e.quantidade,")")]}),"string"!==typeof e&&e.codigo&&(0,Td.jsxs)("span",{className:"text-xs text-gray-500",children:["C\xf3digo: ",e.codigo]})]},t))})]})]},"".concat(e.emprestimoId,"-").concat(t)))})]})},Kg=Nd("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]),Gg=Nd("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Qg=Nd("clipboard-list",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Xg=Nd("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Yg=Nd("clipboard-check",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),Jg=["id"],$g=["id"],Zg={setCookie:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;try{const r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);const a=r.toUTCString(),i="object"===typeof t?JSON.stringify(t):t;return document.cookie="".concat(e,"=").concat(encodeURIComponent(i),";expires=").concat(a,";path=/;SameSite=Strict"),console.log("Cookie ".concat(e," definido com sucesso")),!0}catch(r){return console.error("Erro ao definir cookie:",r),!1}},getCookie:e=>{try{const n=e+"=",r=document.cookie.split(";");for(let e=0;e<r.length;e++){let a=r[e];for(;" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(n)){const e=decodeURIComponent(a.substring(n.length,a.length));try{return JSON.parse(e)}catch(t){return e}}}return null}catch(n){return console.error("Erro ao obter cookie:",n),null}},removeCookie:e=>{try{return document.cookie="".concat(e,"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;path=/;SameSite=Strict"),console.log("Cookie ".concat(e," removido com sucesso")),!0}catch(t){return console.error("Erro ao remover cookie:",t),!1}},areCookiesEnabled:()=>{try{const e="almoxarifado_test";Zg.setCookie(e,"test",1);const t="test"===Zg.getCookie(e);return Zg.removeCookie(e),t}catch(e){return!1}}},ev={FUNCIONARIO:1,SUPERVISOR:2,GERENTE:3,ADMIN:4},tv={1:"Funcion\xe1rio",2:"Supervisor/Encarregado",3:"Gerente",4:"Administrador"},nv={canView:(e,t)=>e>=ev.FUNCIONARIO,canManageOperational:e=>e>ev.FUNCIONARIO,canManageEmployees:e=>e>ev.FUNCIONARIO,canManageUsers:e=>e>ev.FUNCIONARIO&&e>=ev.GERENTE,canCreateUserLevel:(e,t)=>e!==ev.FUNCIONARIO&&(e===ev.ADMIN||e===ev.GERENTE&&t<=ev.SUPERVISOR),canEditUser:(e,t,n,r)=>e!==ev.FUNCIONARIO&&(t===n||(e===ev.ADMIN||e===ev.GERENTE&&r<ev.GERENTE)),canManagePurchases:e=>e>ev.FUNCIONARIO},rv=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[i,s]=(0,r.useState)([]),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)("connecting"),[h,f]=(0,r.useState)(!0),m="almoxarifado_usuario",p="almoxarifado_lembrar",g="almoxarifado_expira";(0,r.useEffect)(()=>{(async()=>{try{d("connecting");const e=Zg.areCookiesEnabled();f(e),console.log("Cookies habilitados:",e),await v(),await x(),d("connected"),l(!1)}catch(e){console.error("Erro ao conectar com Firebase:",e),d("error"),await v(),await _(),l(!1)}})()},[]),(0,r.useEffect)(()=>{let e=null;return"connected"===c&&(()=>{try{e=md(ou(rp,"usuarios"),async e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));s(t),0===t.length&&await w()},e=>{console.error("Erro no listener de usu\xe1rios:",e),d("error")})}catch(t){console.error("Erro ao configurar listener:",t),d("error")}})(),()=>{e&&e()}},[c]);const v=async()=>{try{if(!h&&!Zg.areCookiesEnabled())return void console.log("Cookies n\xe3o habilitados, n\xe3o \xe9 poss\xedvel verificar usu\xe1rio salvo");const e=Zg.getCookie(m),t=Zg.getCookie(p),n=Zg.getCookie(g);if(console.log("Verificando cookies:",{usuario:!!e,lembrar:t,expira:n}),e){if(n&&new Date>new Date(n))return console.log("Login expirado, limpando cookies"),void y();e&&"object"===typeof e&&e.id&&e.email?(a(e),console.log("\u2705 Usu\xe1rio restaurado dos cookies:",e.nome)):(console.log("\u274c Dados do usu\xe1rio nos cookies inv\xe1lidos, limpando"),y())}else console.log("Nenhum usu\xe1rio salvo encontrado nos cookies")}catch(e){console.error("Erro ao verificar usu\xe1rio salvo nos cookies:",e),y()}},y=()=>{try{Zg.removeCookie(m),Zg.removeCookie(p),Zg.removeCookie(g),console.log("\u2705 Dados de login removidos dos cookies")}catch(e){console.error("Erro ao limpar dados de login:",e)}},b=(e,t)=>{try{if(!h)return console.warn("Cookies n\xe3o habilitados, n\xe3o \xe9 poss\xedvel salvar login"),!1;if(t){const t={id:e.id,nome:e.nome,email:e.email,nivel:e.nivel,ativo:e.ativo,ultimoLogin:e.ultimoLogin,dataCriacao:e.dataCriacao},n=Zg.setCookie(m,t,30),r=Zg.setCookie(p,"true",30),a=new Date;a.setDate(a.getDate()+30);const i=Zg.setCookie(g,a.toISOString(),30);return n&&r&&i?(console.log("\u2705 Dados de login salvos nos cookies com sucesso"),!0):(console.error("\u274c Falha ao salvar alguns dados nos cookies"),y(),!1)}return y(),!0}catch(n){return console.error("Erro ao salvar dados de login:",n),!1}},x=async()=>{try{const e=(await ud(ou(rp,"usuarios"))).docs.map(e=>u({id:e.id},e.data()));s(e),0===e.length&&await w()}catch(e){throw console.error("Erro ao carregar usu\xe1rios:",e),e}},w=async()=>{const e={nome:"Administrador",email:"admin",senha:"admin@362*",nivel:ev.ADMIN,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null};try{await fd(ou(rp,"usuarios"),e),console.log("Usu\xe1rio admin criado no Firebase")}catch(t){console.error("Erro ao criar usu\xe1rio admin:",t)}},_=async()=>{const e=[{id:"1",nome:"Administrador",email:"admin",senha:"admin@362*",nivel:ev.ADMIN,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null},{id:"2",nome:"Jo\xe3o Silva",email:"joao",senha:"123456",nivel:ev.GERENTE,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null},{id:"3",nome:"Maria Santos",email:"maria",senha:"123456",nivel:ev.SUPERVISOR,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null},{id:"4",nome:"Pedro Lima",email:"pedro",senha:"123456",nivel:ev.FUNCIONARIO,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null}];s(e),console.log("Usu\xe1rios locais carregados como fallback")},N={usuario:n,usuarios:i,isLoading:o,firebaseStatus:c,cookiesEnabled:h,login:async function(e,t){try{const r=i.find(n=>n.email===e&&n.senha===t&&n.ativo);if(r){const e=u(u({},r),{},{ultimoLogin:(new Date).toISOString()});try{await dd(lu(rp,"usuarios",r.id),{ultimoLogin:e.ultimoLogin})}catch(n){console.warn("Erro ao atualizar \xfaltimo login no Firebase:",n)}return b(e,!0),a(e),{success:!0}}return{success:!1,message:"Email ou senha incorretos"}}catch(r){return console.error("Erro no login:",r),{success:!1,message:"Erro interno do sistema"}}},logout:()=>{y(),a(null)},criarUsuario:async e=>{try{if(!nv.canCreateUserLevel(n.nivel,e.nivel))return{success:!1,message:"Sem permiss\xe3o para criar usu\xe1rio deste n\xedvel"};const t=u(u({},e),{},{ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null}),r=await fd(ou(rp,"usuarios"),t);return{success:!0,usuario:u({id:r.id},t)}}catch(t){return console.error("Erro ao criar usu\xe1rio:",t),{success:!1,message:"Erro ao criar usu\xe1rio"}}},atualizarUsuario:async(e,t)=>{try{const r=i.find(t=>t.id===e);if(!nv.canEditUser(n.nivel,n.id,e,null===r||void 0===r?void 0:r.nivel))return{success:!1,message:"Sem permiss\xe3o para editar este usu\xe1rio"};if(await dd(lu(rp,"usuarios",e),t),n&&n.id===e){const e=u(u({},n),t);a(e),"true"===Zg.getCookie(p)&&b(e,!0)}return{success:!0}}catch(r){return console.error("Erro ao atualizar usu\xe1rio:",r),{success:!1,message:"Erro ao atualizar usu\xe1rio"}}},removerUsuario:async e=>{const t=i.find(t=>t.id===e);if("admin"===(null===t||void 0===t?void 0:t.email))return{success:!1,message:"N\xe3o \xe9 poss\xedvel remover o administrador principal"};if(!nv.canEditUser(n.nivel,n.id,e,null===t||void 0===t?void 0:t.nivel))return{success:!1,message:"Sem permiss\xe3o para remover este usu\xe1rio"};try{return await hd(lu(rp,"usuarios",e)),{success:!0}}catch(r){return console.error("Erro ao remover usu\xe1rio:",r),{success:!1,message:"Erro ao remover usu\xe1rio"}}},temPermissao:e=>n&&n.nivel>=e,NIVEIS_PERMISSAO:ev};return(0,Td.jsx)(sp.Provider,{value:N,children:t})},av=()=>{const[e,t]=(0,r.useState)({email:"",senha:"",lembrar:!1}),[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),{login:c,cookiesEnabled:d}=op();(0,r.useEffect)(()=>{d||console.warn('Cookies n\xe3o habilitados - fun\xe7\xe3o "Lembrar de mim" n\xe3o funcionar\xe1')},[d]);const h=async t=>{if(null===t||void 0===t||t.preventDefault(),a(""),l(!0),!e.email||!e.senha)return a("Por favor, preencha todos os campos"),void l(!1);try{const t=await c(e.email,e.senha,e.lembrar);t.success?console.log("\u2705 Login realizado com sucesso"):a(t.message)}catch(n){console.error("Erro no login:",n),a("Erro ao fazer login. Tente novamente.")}finally{l(!1)}},f=e=>{"Enter"===e.key&&h()};return(0,Td.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:(0,Td.jsxs)("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8",children:[(0,Td.jsxs)("div",{className:"text-center mb-8",children:[(0,Td.jsx)("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,Td.jsx)(Kg,{className:"w-8 h-8 text-green-600"})}),(0,Td.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Almoxarifado Jardim"}),(0,Td.jsx)("p",{className:"text-gray-600 mb-4",children:"Sistema de Gest\xe3o"})]}),(0,Td.jsxs)("form",{onSubmit:h,className:"space-y-6",children:[(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email/Usu\xe1rio"}),(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)(dg,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:"text",value:e.email,onChange:n=>t(u(u({},e),{},{email:n.target.value})),onKeyPress:f,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Digite seu usu\xe1rio",required:!0,disabled:o})]})]}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Senha"}),(0,Td.jsxs)("div",{className:"relative",children:[(0,Td.jsx)(Gg,{className:"w-4 h-4 absolute left-3 top-3 text-gray-400"}),(0,Td.jsx)("input",{type:i?"text":"password",value:e.senha,onChange:n=>t(u(u({},e),{},{senha:n.target.value})),onKeyPress:f,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"Digite sua senha",required:!0,disabled:o}),(0,Td.jsx)("button",{type:"button",onClick:()=>s(!i),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",disabled:o,children:i?(0,Td.jsx)(fg,{className:"w-5 h-5"}):(0,Td.jsx)(mg,{className:"w-5 h-5"})})]})]}),!d&&(0,Td.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-700 px-4 py-3 rounded-lg text-sm",children:(0,Td.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Td.jsx)(pg,{className:"w-4 h-4"}),(0,Td.jsx)("span",{children:'Cookies desabilitados. A fun\xe7\xe3o "Lembrar de mim" n\xe3o funcionar\xe1.'})]})}),n&&(0,Td.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm",children:n}),(0,Td.jsx)("button",{type:"submit",disabled:o,className:"w-full font-medium py-3 px-4 rounded-lg transition-colors duration-200 ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"," text-white"),children:o?(0,Td.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Entrando..."]}):"Entrar no Sistema"})]}),(0,Td.jsx)("div",{className:"mt-6 text-center text-xs text-gray-500",children:(0,Td.jsx)("p",{children:"Sistema protegido por autentica\xe7\xe3o"})})]})})},iv=e=>{let{stats:t,firebaseStatus:n}=e;const{inventario:r,emprestimos:a,funcionarios:i,ferramentasDanificadas:s,ferramentasPerdidas:o,compras:l}=t;return(0,Td.jsx)("div",{className:"space-y-6",children:(0,Td.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-blue-100 rounded",children:(0,Td.jsx)(Kg,{className:"w-6 h-6 text-blue-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Invent\xe1rio"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===r||void 0===r?void 0:r.length)||0})]})]})}),(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-green-100 rounded",children:(0,Td.jsx)(Qg,{className:"w-6 h-6 text-green-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Empr\xe9stimos Ativos"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===a||void 0===a?void 0:a.filter(e=>"devolvido"!==e.status).length)||0})]})]})}),(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-yellow-100 rounded",children:(0,Td.jsx)(wg,{className:"w-6 h-6 text-yellow-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Funcion\xe1rios"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===i||void 0===i?void 0:i.length)||0})]})]})}),(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-red-100 rounded",children:(0,Td.jsx)(pg,{className:"w-6 h-6 text-red-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Danificadas"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===s||void 0===s?void 0:s.length)||0})]})]})}),(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-red-100 rounded",children:(0,Td.jsx)(kd,{className:"w-6 h-6 text-red-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Perdidas"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===o||void 0===o?void 0:o.length)||0})]})]})}),(0,Td.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)("div",{className:"p-2 bg-purple-100 rounded",children:(0,Td.jsx)(Pg,{className:"w-6 h-6 text-purple-600"})}),(0,Td.jsxs)("div",{className:"ml-4",children:[(0,Td.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Compras"}),(0,Td.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===l||void 0===l?void 0:l.length)||0})]})]})})]})})},sv=()=>(0,Td.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center",children:(0,Td.jsxs)("div",{className:"text-center",children:[(0,Td.jsx)("div",{className:"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4",children:(0,Td.jsx)(Kg,{className:"w-8 h-8 text-green-600 animate-pulse"})}),(0,Td.jsx)("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Almoxarifado Jardim"}),(0,Td.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-4",children:[(0,Td.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"}),(0,Td.jsx)("p",{className:"text-gray-600",children:"Conectando ao Firebase..."})]}),(0,Td.jsx)("div",{className:"w-64 bg-gray-200 rounded-full h-2",children:(0,Td.jsx)("div",{className:"bg-green-600 h-2 rounded-full animate-pulse",style:{width:"70%"}})}),(0,Td.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Inicializando m\xf3dulos de seguran\xe7a..."})]})}),ov=e=>{let{message:t="Voc\xea n\xe3o tem permiss\xe3o para realizar esta a\xe7\xe3o."}=e;return(0,Td.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[(0,Td.jsx)("div",{className:"flex items-center justify-center mb-2",children:(0,Td.jsx)(hg,{className:"w-8 h-8 text-red-600"})}),(0,Td.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-1",children:"Acesso Negado"}),(0,Td.jsx)("p",{className:"text-red-600",children:t})]})},lv=()=>{var e;const{usuario:t,logout:n,firebaseStatus:a}=op(),s=(()=>{const[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})(),[o,l]=(0,r.useState)("dashboard"),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(null===t||void 0===t?void 0:t.nivel)===ev.FUNCIONARIO?l("meu-inventario"):l("dashboard")},[null===t||void 0===t?void 0:t.nivel]);const[h,f]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(ou(rp,"inventario"),async e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));if(f(n),0===n.length&&nv.canManageOperational(null===t||void 0===t?void 0:t.nivel)){console.log("Populando invent\xe1rio inicial...");for(const e of ng){const{id:t}=e,n=i(e,Jg);await fd(ou(rp,"inventario"),n)}}},e=>{console.error("Erro no listener do invent\xe1rio:",e)});return()=>e()},[t]);const[m,p]=(0,r.useState)([]),[g,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{v(!1);let e=()=>{};return(()=>{try{e=md(ou(rp,"emprestimos"),e=>{try{const t=e.docs.map(e=>u({id:e.id},e.data()));console.log("Empr\xe9stimos carregados:",{quantidade:t.length,primeiro:t[0],ultimo:t[t.length-1]}),p(t),v(!0)}catch(t){console.error("Erro ao processar dados dos empr\xe9stimos:",t),p([]),v(!0)}},e=>{console.error("Erro no listener dos empr\xe9stimos:",e),p([]),v(!0)})}catch(t){console.error("Erro ao configurar listener dos empr\xe9stimos:",t),p([]),v(!0)}})(),()=>e()},[]);const y=async(e,n)=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar empr\xe9stimos");try{return await dd(lu(rp,"emprestimos",e),n)}catch(r){throw console.error("Erro ao atualizar empr\xe9stimo:",r),r}},[b,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(ou(rp,"funcionarios"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));x(t)},e=>{console.error("Erro no listener dos funcion\xe1rios:",e)});return()=>e()},[]);const[w,_]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(ou(rp,"ferramentas_danificadas"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));_(t)},e=>{console.error("Erro no listener das ferramentas danificadas:",e)});return()=>e()},[]);const[N,E]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(ou(rp,"ferramentas_perdidas"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));E(t)},e=>{console.error("Erro no listener das ferramentas perdidas:",e)});return()=>e()},[]);const[S,k]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=md(ou(rp,"compras"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));k(t)},e=>{console.error("Erro no listener das compras:",e)});return()=>e()},[]);if(!t)return(0,Td.jsx)(sv,{});const T={inventario:h,emprestimos:m,funcionarios:b,ferramentasDanificadas:w,ferramentasPerdidas:N,compras:S},C=[{id:"dashboard",nome:"Dashboard",icone:Xg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"meu-inventario",nome:"Meu Invent\xe1rio",icone:kp,permissao:()=>!0},{id:"tarefas",nome:"Tarefas",icone:Yg,permissao:()=>!0},{id:"suporte",nome:"Suporte",icone:Ig,permissao:()=>!0},{id:"inventario",nome:"Invent\xe1rio",icone:Kg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"emprestimos",nome:"Empr\xe9stimos",icone:Qg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"funcionarios",nome:"Funcion\xe1rios",icone:wg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"compras",nome:"Compras",icone:Pg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"danificadas",nome:"Ferramentas Danificadas",icone:pg,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"perdidas",nome:"Ferramentas Perdidas",icone:kd,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>ev.FUNCIONARIO},{id:"historico-transferencias",nome:"Hist\xf3rico de Transfer\xeancias",icone:Cp,permissao:()=>(null===t||void 0===t?void 0:t.nivel)>=ev.SUPERVISOR}].filter(e=>e.permissao()),I=[ev.ADMIN,ev.SUPERVISOR,ev.GERENTE].includes(null===t||void 0===t?void 0:t.nivel);return(0,Td.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s&&(0,Td.jsx)("header",{className:"bg-white border-b fixed top-0 left-0 right-0 z-20",children:(0,Td.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)(Kg,{className:"w-6 h-6 text-green-600 mr-2"}),(0,Td.jsx)("h1",{className:"text-base font-bold text-gray-900",children:"Almoxarifado"})]}),(0,Td.jsx)("button",{onClick:()=>{d(!c)},className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:c?(0,Td.jsx)(vp,{className:"w-6 h-6 text-gray-600"}):(0,Td.jsx)(yp,{className:"w-6 h-6 text-gray-600"})})]})}),(0,Td.jsxs)("nav",{className:"".concat(s?"fixed inset-0 z-10 transform transition-transform duration-300 ease-in-out ".concat(c?"translate-x-0":"-translate-x-full"):"w-64 fixed"," bg-white border-r min-h-screen"),children:[!s&&(0,Td.jsx)("div",{className:"p-4 border-b",children:(0,Td.jsxs)("div",{className:"flex items-center",children:[(0,Td.jsx)(Kg,{className:"w-8 h-8 text-green-600 mr-3"}),(0,Td.jsxs)("div",{children:[(0,Td.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Almoxarifado Jardim"}),(0,Td.jsx)("p",{className:"text-xs text-gray-500",children:"Sistema de Gest\xe3o"})]})]})}),(0,Td.jsx)("div",{className:"py-4 px-2 ".concat(s?"mt-4":""),children:(0,Td.jsxs)("div",{className:"space-y-1",children:[C.filter(e=>e.permissao()).map(e=>{const t=e.icone;return(0,Td.jsxs)("button",{onClick:()=>{l(e.id),s&&d(!1)},className:"w-full flex items-center space-x-2 px-3 ".concat(s?"py-3":"py-2"," rounded-lg font-medium text-sm transition-colors ").concat(o===e.id?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,Td.jsx)(t,{className:"".concat(s?"w-5 h-5":"w-4 h-4"," flex-shrink-0 ").concat(o===e.id?"text-gray-900":"text-gray-500")}),(0,Td.jsx)("span",{children:e.nome})]},e.id)}),I&&(0,Td.jsxs)("button",{onClick:()=>{l("usuarios"),s&&d(!1)},className:"w-full flex items-center space-x-2 px-3 ".concat(s?"py-3":"py-2"," rounded-lg font-medium text-sm transition-colors ").concat("usuarios"===o?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,Td.jsx)(ug,{className:"".concat(s?"w-5 h-5":"w-4 h-4"," flex-shrink-0 ").concat("usuarios"===o?"text-gray-900":"text-gray-500")}),(0,Td.jsx)("span",{children:"Usu\xe1rios do Sistema"})]})]})}),(0,Td.jsxs)("div",{className:"".concat(s?"fixed":"absolute"," bottom-0 left-0 right-0 p-4 border-t bg-white"),children:[(0,Td.jsx)("div",{className:"flex items-center space-x-3 mb-3",children:(0,Td.jsxs)("div",{className:"flex-1",children:[(0,Td.jsx)("p",{className:"".concat(s?"text-base":"text-sm"," font-medium text-gray-800"),children:t.nome}),(0,Td.jsx)("p",{className:"text-xs text-gray-600",children:tv[t.nivel]})]})}),(0,Td.jsxs)("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 px-3 ".concat(s?"py-3 text-base":"py-2 text-sm"," rounded-lg transition-colors text-red-600 hover:bg-red-50"),children:[(0,Td.jsx)(Gg,{className:"".concat(s?"w-5 h-5":"w-4 h-4")}),(0,Td.jsx)("span",{children:"Sair"})]})]})]}),(0,Td.jsx)("main",{className:"".concat(s?"pt-16":"pl-64"," w-full min-h-screen bg-gray-50"),children:(0,Td.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,Td.jsxs)("div",{className:"py-6",children:[(0,Td.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,Td.jsx)("h1",{className:"".concat(s?"text-xl":"text-2xl"," font-semibold text-gray-900"),children:(null===(e=C.find(e=>e.id===o))||void 0===e?void 0:e.nome)||"Dashboard"})}),"dashboard"===o&&(0,Td.jsx)(iv,{stats:T}),"meu-inventario"===o&&(0,Td.jsx)(tg,{emprestimos:g?m:null}),"tarefas"===o&&(0,Td.jsx)(ip,{children:(0,Td.jsx)(up,{children:(0,Td.jsx)(Tg,{})})}),"suporte"===o&&(0,Td.jsx)(jg,{}),"inventario"===o&&(0,Td.jsx)(Sp,{inventario:h,emprestimos:m,adicionarItem:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar itens");try{const t=u(u({},e),{},{quantidade:Number(e.quantidade),disponivel:Number(e.quantidade)});return await fd(ou(rp,"inventario"),t)}catch(n){throw console.error("Erro ao adicionar item:",n),n}},removerItem:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover itens");try{return await hd(lu(rp,"inventario",e))}catch(n){throw console.error("Erro ao remover item:",n),n}},atualizarItem:async(e,n)=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar itens");try{return await dd(lu(rp,"inventario",e),n)}catch(r){throw console.error("Erro ao atualizar item:",r),r}},reimportarInventario:async()=>{(await md(ou(rp,"inventario"),async e=>{for(const t of e.docs)await hd(lu(rp,"inventario",t.id));for(const t of ng){const{id:e}=t,n=i(t,$g);await fd(ou(rp,"inventario"),n)}}))()},corrigirInventario:async()=>{const e=await ud(ou(rp,"inventario"));for(const t of e.docs){const e=t.data();void 0!==e.quantidade&&await dd(lu(rp,"inventario",t.id),{disponivel:e.quantidade})}alert('Invent\xe1rio corrigido: campo "disponivel" atualizado!')}}),"emprestimos"===o&&(nv.canView(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(og,{emprestimos:m,inventario:h,funcionarios:b,adicionarEmprestimo:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar empr\xe9stimos");try{const t=await fd(ou(rp,"emprestimos"),e);if(e.ferramentas&&Array.isArray(e.ferramentas))for(const n of e.ferramentas){const e=h.find(e=>e.nome===n);e&&e.disponivel>0&&await dd(lu(rp,"inventario",e.id),{disponivel:e.disponivel-1})}return t}catch(n){throw console.error("Erro ao adicionar empr\xe9stimo:",n),n}},removerEmprestimo:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover empr\xe9stimos");try{return await hd(lu(rp,"emprestimos",e))}catch(n){throw console.error("Erro ao remover empr\xe9stimo:",n),n}},atualizarEmprestimo:y,devolverFerramentas:async(e,t)=>{try{const n=(new Date).toISOString().split("T")[0],r=(new Date).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});await y(e,{status:"devolvido",dataDevolucao:n,horaDevolucao:r}),"function"===typeof t&&await t(e)}catch(n){console.error("Erro ao devolver ferramentas:",n),alert("Erro ao marcar como devolvido. Tente novamente.")}},readonly:!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel)}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar os empr\xe9stimos."})),"funcionarios"===o&&(nv.canView(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(cg,{funcionarios:b,adicionarFuncionario:async e=>{if(!nv.canManageEmployees(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar funcion\xe1rios");try{const t=await fd(ou(rp,"funcionarios"),e),n={nome:e.nome,email:e.nome.toLowerCase().replace(/\s+/g,"."),senha:"1234",nivel:ev.FUNCIONARIO,ativo:!0,dataCriacao:(new Date).toISOString(),ultimoLogin:null,funcionarioId:t.id};return await fd(ou(rp,"usuarios"),n),t}catch(n){throw console.error("Erro ao adicionar funcion\xe1rio:",n),n}},removerFuncionario:async e=>{if(!nv.canManageEmployees(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover funcion\xe1rios");try{return await hd(lu(rp,"funcionarios",e))}catch(n){throw console.error("Erro ao remover funcion\xe1rio:",n),n}},atualizarFuncionario:async(e,n)=>{if(!nv.canManageEmployees(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar funcion\xe1rios");try{return await dd(lu(rp,"funcionarios",e),n)}catch(r){throw console.error("Erro ao atualizar funcion\xe1rio:",r),r}},readonly:!nv.canManageEmployees(null===t||void 0===t?void 0:t.nivel)}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar os funcion\xe1rios."})),"compras"===o&&(nv.canView(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(Hg,{compras:S,inventario:h,funcionarios:b,adicionarCompra:async e=>{if(!nv.canManagePurchases(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar compras");try{return await fd(ou(rp,"compras"),e)}catch(n){throw console.error("Erro ao adicionar compra:",n),n}},removerCompra:async e=>{if(!nv.canManagePurchases(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover compras");try{return await hd(lu(rp,"compras",e))}catch(n){throw console.error("Erro ao remover compra:",n),n}},atualizarCompra:async(e,n)=>{if(!nv.canManagePurchases(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar compras");try{return await dd(lu(rp,"compras",e),n)}catch(r){throw console.error("Erro ao atualizar compra:",r),r}},readonly:!nv.canManagePurchases(null===t||void 0===t?void 0:t.nivel)}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar as compras."})),"danificadas"===o&&(nv.canView(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(xg,{ferramentasDanificadas:w,inventario:h,adicionarFerramentaDanificada:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar ferramentas danificadas");try{return await fd(ou(rp,"ferramentas_danificadas"),e)}catch(n){throw console.error("Erro ao adicionar ferramenta danificada:",n),n}},removerFerramentaDanificada:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover ferramentas danificadas");try{return await hd(lu(rp,"ferramentas_danificadas",e))}catch(n){throw console.error("Erro ao remover ferramenta danificada:",n),n}},atualizarFerramentaDanificada:async(e,n)=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar ferramentas danificadas");try{return await dd(lu(rp,"ferramentas_danificadas",e),n)}catch(r){throw console.error("Erro ao atualizar ferramenta danificada:",r),r}}}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar as ferramentas danificadas."})),"perdidas"===o&&(nv.canView(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(Dg,{ferramentasPerdidas:N,inventario:h,adicionarFerramentaPerdida:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para adicionar ferramentas perdidas");try{return await fd(ou(rp,"ferramentas_perdidas"),e)}catch(n){throw console.error("Erro ao adicionar ferramenta perdida:",n),n}},removerFerramentaPerdida:async e=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para remover ferramentas perdidas");try{return await hd(lu(rp,"ferramentas_perdidas",e))}catch(n){throw console.error("Erro ao remover ferramenta perdida:",n),n}},atualizarFerramentaPerdida:async(e,n)=>{if(!nv.canManageOperational(null===t||void 0===t?void 0:t.nivel))throw new Error("Sem permiss\xe3o para atualizar ferramentas perdidas");try{return await dd(lu(rp,"ferramentas_perdidas",e),n)}catch(r){throw console.error("Erro ao atualizar ferramenta perdida:",r),r}}}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar as ferramentas perdidas."})),"usuarios"===o&&(nv.canManageUsers(null===t||void 0===t?void 0:t.nivel)?(0,Td.jsx)(gg,{}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para gerenciar usu\xe1rios do sistema."})),"historico-transferencias"===o&&((null===t||void 0===t?void 0:t.nivel)>=ev.SUPERVISOR?(0,Td.jsx)(Wg,{}):(0,Td.jsx)(ov,{message:"Voc\xea n\xe3o tem permiss\xe3o para visualizar o hist\xf3rico de transfer\xeancias."}))]})})})]})},cv=()=>{const{usuario:e,isLoading:t}=op();return t?(0,Td.jsx)(sv,{}):e?(0,Td.jsx)(lv,{}):(0,Td.jsx)(av,{})},uv=()=>(gp(),(0,Td.jsx)(rv,{children:(0,Td.jsxs)(Ad,{children:[(0,Td.jsx)(cv,{}),(0,Td.jsx)(mp,{})]})}));a.createRoot(document.getElementById("root")).render((0,Td.jsx)(r.StrictMode,{children:(0,Td.jsx)(uv,{})})),hp({onUpdate:e=>{window.confirm("Nova vers\xe3o dispon\xedvel! Deseja atualizar agora?")&&(e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())},onSuccess:()=>{console.log("Service Worker registrado com sucesso! O app agora funciona offline.")}})})();
//# sourceMappingURL=main.0526a10e.js.map