{"ast":null,"code":"import _objectSpread from\"C:/Users/vinic/OneDrive/Documentos/Almo/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{Plus,Trash2}from'lucide-react';import{obterDataAtual,obterHoraAtual}from'../../utils/dateUtils';import FerramentasSelector from'./FerramentasSelector';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NovoEmprestimo=_ref=>{let{inventario,adicionarEmprestimo,atualizarDisponibilidade}=_ref;const[novoEmprestimo,setNovoEmprestimo]=useState({colaborador:'',ferramentas:[],dataRetirada:obterDataAtual(),horaRetirada:obterHoraAtual()});const adicionarFerramenta=ferramenta=>{if(!ferramenta||novoEmprestimo.ferramentas.includes(ferramenta))return;// Verificar se a ferramenta existe no inventário\nconst itemInventario=inventario.find(item=>item.nome.toLowerCase()===ferramenta.toLowerCase()&&item.disponivel>0);if(!itemInventario)return;setNovoEmprestimo(prev=>_objectSpread(_objectSpread({},prev),{},{ferramentas:[...prev.ferramentas,itemInventario.nome]}));};const removerFerramenta=ferramenta=>{setNovoEmprestimo(prev=>_objectSpread(_objectSpread({},prev),{},{ferramentas:prev.ferramentas.filter(f=>f!==ferramenta)}));};const handleSubmit=()=>{if(!novoEmprestimo.colaborador||novoEmprestimo.ferramentas.length===0)return;const emprestimoAdicionado=adicionarEmprestimo(novoEmprestimo,atualizarDisponibilidade);if(emprestimoAdicionado){setNovoEmprestimo({colaborador:'',ferramentas:[],dataRetirada:obterDataAtual(),horaRetirada:obterHoraAtual()});}};const ferramentasDisponiveis=inventario.filter(item=>item.disponivel>0);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-lg p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800 mb-4\",children:\"Novo Empr\\xE9stimo\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 lg:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Nome do colaborador\",value:novoEmprestimo.colaborador,onChange:e=>setNovoEmprestimo(_objectSpread(_objectSpread({},novoEmprestimo),{},{colaborador:e.target.value})),className:\"form-input\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:novoEmprestimo.dataRetirada,onChange:e=>setNovoEmprestimo(_objectSpread(_objectSpread({},novoEmprestimo),{},{dataRetirada:e.target.value})),className:\"form-input\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"time\",value:novoEmprestimo.horaRetirada,onChange:e=>setNovoEmprestimo(_objectSpread(_objectSpread({},novoEmprestimo),{},{horaRetirada:e.target.value})),className:\"form-input w-full\"}),/*#__PURE__*/_jsx(FerramentasSelector,{ferramentasDisponiveis:ferramentasDisponiveis,onAdicionarFerramenta:adicionarFerramenta})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-700 mb-2\",children:\"Ferramentas Selecionadas:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border border-gray-200 rounded-lg p-3 min-h-32 max-h-40 overflow-y-auto\",children:novoEmprestimo.ferramentas.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-400 text-sm\",children:\"Nenhuma ferramenta selecionada\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-2\",children:novoEmprestimo.ferramentas.map((ferramenta,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center bg-gray-50 p-2 rounded\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:ferramenta}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>removerFerramenta(ferramenta),className:\"text-red-500 hover:text-red-700 p-1\",children:/*#__PURE__*/_jsx(Trash2,{className:\"w-3 h-3\"})})]},index))})}),/*#__PURE__*/_jsxs(\"button\",{onClick:handleSubmit,disabled:!novoEmprestimo.colaborador||novoEmprestimo.ferramentas.length===0,className:\"mt-4 w-full btn-primary flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed\",children:[/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"}),\"Registrar Empr\\xE9stimo\"]})]})]})]});};export default NovoEmprestimo;","map":{"version":3,"names":["React","useState","Plus","Trash2","obterDataAtual","obterHoraAtual","FerramentasSelector","jsx","_jsx","jsxs","_jsxs","NovoEmprestimo","_ref","inventario","adicionarEmprestimo","atualizarDisponibilidade","novoEmprestimo","setNovoEmprestimo","colaborador","ferramentas","dataRetirada","horaRetirada","adicionarFerramenta","ferramenta","includes","itemInventario","find","item","nome","toLowerCase","disponivel","prev","_objectSpread","removerFerramenta","filter","f","handleSubmit","length","emprestimoAdicionado","ferramentasDisponiveis","className","children","type","placeholder","value","onChange","e","target","onAdicionarFerramenta","map","index","onClick","disabled"],"sources":["C:/Users/vinic/OneDrive/Documentos/Almo/src/components/Emprestimos/NovoEmprestimo.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus, Trash2 } from 'lucide-react';\r\nimport { obterDataAtual, obterHoraAtual } from '../../utils/dateUtils';\r\nimport FerramentasSelector from './FerramentasSelector';\r\n\r\nconst NovoEmprestimo = ({ inventario, adicionarEmprestimo, atualizarDisponibilidade }) => {\r\n  const [novoEmprestimo, setNovoEmprestimo] = useState({\r\n    colaborador: '',\r\n    ferramentas: [],\r\n    dataRetirada: obterDataAtual(),\r\n    horaRetirada: obterHoraAtual()\r\n  });\r\n\r\n  const adicionarFerramenta = (ferramenta) => {\r\n    if (!ferramenta || novoEmprestimo.ferramentas.includes(ferramenta)) return;\r\n\r\n    // Verificar se a ferramenta existe no inventário\r\n    const itemInventario = inventario.find(item => \r\n      item.nome.toLowerCase() === ferramenta.toLowerCase() && item.disponivel > 0\r\n    );\r\n    \r\n    if (!itemInventario) return;\r\n\r\n    setNovoEmprestimo(prev => ({\r\n      ...prev,\r\n      ferramentas: [...prev.ferramentas, itemInventario.nome]\r\n    }));\r\n  };\r\n\r\n  const removerFerramenta = (ferramenta) => {\r\n    setNovoEmprestimo(prev => ({\r\n      ...prev,\r\n      ferramentas: prev.ferramentas.filter(f => f !== ferramenta)\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    if (!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0) return;\r\n\r\n    const emprestimoAdicionado = adicionarEmprestimo(novoEmprestimo, atualizarDisponibilidade);\r\n    \r\n    if (emprestimoAdicionado) {\r\n      setNovoEmprestimo({\r\n        colaborador: '',\r\n        ferramentas: [],\r\n        dataRetirada: obterDataAtual(),\r\n        horaRetirada: obterHoraAtual()\r\n      });\r\n    }\r\n  };\r\n\r\n  const ferramentasDisponiveis = inventario.filter(item => item.disponivel > 0);\r\n\r\n  return (\r\n    <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n      <h2 className=\"text-xl font-bold text-gray-800 mb-4\">Novo Empréstimo</h2>\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n        <div className=\"space-y-4\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Nome do colaborador\"\r\n              value={novoEmprestimo.colaborador}\r\n              onChange={(e) => setNovoEmprestimo({...novoEmprestimo, colaborador: e.target.value})}\r\n              className=\"form-input\"\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              value={novoEmprestimo.dataRetirada}\r\n              onChange={(e) => setNovoEmprestimo({...novoEmprestimo, dataRetirada: e.target.value})}\r\n              className=\"form-input\"\r\n            />\r\n          </div>\r\n          <input\r\n            type=\"time\"\r\n            value={novoEmprestimo.horaRetirada}\r\n            onChange={(e) => setNovoEmprestimo({...novoEmprestimo, horaRetirada: e.target.value})}\r\n            className=\"form-input w-full\"\r\n          />\r\n\r\n          <FerramentasSelector \r\n            ferramentasDisponiveis={ferramentasDisponiveis}\r\n            onAdicionarFerramenta={adicionarFerramenta}\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <h3 className=\"font-medium text-gray-700 mb-2\">Ferramentas Selecionadas:</h3>\r\n          <div className=\"border border-gray-200 rounded-lg p-3 min-h-32 max-h-40 overflow-y-auto\">\r\n            {novoEmprestimo.ferramentas.length === 0 ? (\r\n              <p className=\"text-gray-400 text-sm\">Nenhuma ferramenta selecionada</p>\r\n            ) : (\r\n              <div className=\"space-y-2\">\r\n                {novoEmprestimo.ferramentas.map((ferramenta, index) => (\r\n                  <div key={index} className=\"flex justify-between items-center bg-gray-50 p-2 rounded\">\r\n                    <span className=\"text-sm\">{ferramenta}</span>\r\n                    <button\r\n                      onClick={() => removerFerramenta(ferramenta)}\r\n                      className=\"text-red-500 hover:text-red-700 p-1\"\r\n                    >\r\n                      <Trash2 className=\"w-3 h-3\" />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          \r\n          <button\r\n            onClick={handleSubmit}\r\n            disabled={!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0}\r\n            className=\"mt-4 w-full btn-primary flex items-center justify-center gap-2 disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n          >\r\n            <Plus className=\"w-4 h-4\" />\r\n            Registrar Empréstimo\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NovoEmprestimo;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}