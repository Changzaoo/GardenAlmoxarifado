{"ast":null,"code":"import React,{useState}from'react';import{Plus}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const FerramentaSelector=_ref=>{let{ferramentasDisponiveis,onAdicionarFerramenta}=_ref;const[buscaFerramenta,setBuscaFerramenta]=useState('');const[ferramentaSelecionada,setFerramentaSelecionada]=useState('');const[sugestoesVisiveis,setSugestoesVisiveis]=useState(false);const filtrarFerramentas=texto=>{if(!texto)return[];return ferramentasDisponiveis.filter(item=>item.nome.toLowerCase().includes(texto.toLowerCase())).slice(0,8);};const selecionarFerramenta=ferramenta=>{setBuscaFerramenta(ferramenta);setFerramentaSelecionada(ferramenta);setSugestoesVisiveis(false);};const adicionarFerramenta=()=>{const ferramenta=ferramentaSelecionada||buscaFerramenta;if(ferramenta){onAdicionarFerramenta(ferramenta);setFerramentaSelecionada('');setBuscaFerramenta('');setSugestoesVisiveis(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 relative\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Digite o nome da ferramenta...\",value:buscaFerramenta,onChange:e=>{setBuscaFerramenta(e.target.value);setFerramentaSelecionada('');setSugestoesVisiveis(e.target.value.length>0);},onFocus:()=>setSugestoesVisiveis(buscaFerramenta.length>0),onBlur:()=>setTimeout(()=>setSugestoesVisiveis(false),200),onKeyDown:e=>{if(e.key==='Enter'){e.preventDefault();adicionarFerramenta();}},className:\"form-input\"}),sugestoesVisiveis&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto\",children:[filtrarFerramentas(buscaFerramenta).map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>selecionarFerramenta(item.nome),className:\"w-full text-left px-3 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium text-sm\",children:item.nome}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[item.categoria,\" \\u2022 Dispon\\xEDvel: \",item.disponivel]})]},item.id)),filtrarFerramentas(buscaFerramenta).length===0&&buscaFerramenta&&/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 text-gray-500 text-sm\",children:\"Nenhuma ferramenta encontrada\"})]})]}),/*#__PURE__*/_jsxs(\"select\",{value:ferramentaSelecionada,onChange:e=>{setFerramentaSelecionada(e.target.value);setBuscaFerramenta(e.target.value);setSugestoesVisiveis(false);},className:\"form-select min-w-48\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Ou selecione...\"}),ferramentasDisponiveis.map(item=>/*#__PURE__*/_jsxs(\"option\",{value:item.nome,children:[item.nome.length>30?\"\".concat(item.nome.substring(0,30),\"...\"):item.nome,\" (\",item.disponivel,\")\"]},item.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:adicionarFerramenta,disabled:!buscaFerramenta&&!ferramentaSelecionada,className:\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed\",children:/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4\"})})]});};export default FerramentaSelector;","map":{"version":3,"names":["React","useState","Plus","jsx","_jsx","jsxs","_jsxs","FerramentaSelector","_ref","ferramentasDisponiveis","onAdicionarFerramenta","buscaFerramenta","setBuscaFerramenta","ferramentaSelecionada","setFerramentaSelecionada","sugestoesVisiveis","setSugestoesVisiveis","filtrarFerramentas","texto","filter","item","nome","toLowerCase","includes","slice","selecionarFerramenta","ferramenta","adicionarFerramenta","className","children","type","placeholder","value","onChange","e","target","length","onFocus","onBlur","setTimeout","onKeyDown","key","preventDefault","map","onClick","categoria","disponivel","id","concat","substring","disabled"],"sources":["C:/Users/vinic/OneDrive/Documentos/Almo/src/components/Emprestimos/FerramentaSelector.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Plus } from 'lucide-react';\r\n\r\nconst FerramentaSelector = ({ ferramentasDisponiveis, onAdicionarFerramenta }) => {\r\n  const [buscaFerramenta, setBuscaFerramenta] = useState('');\r\n  const [ferramentaSelecionada, setFerramentaSelecionada] = useState('');\r\n  const [sugestoesVisiveis, setSugestoesVisiveis] = useState(false);\r\n\r\n  const filtrarFerramentas = (texto) => {\r\n    if (!texto) return [];\r\n    return ferramentasDisponiveis\r\n      .filter(item => \r\n        item.nome.toLowerCase().includes(texto.toLowerCase())\r\n      )\r\n      .slice(0, 8);\r\n  };\r\n\r\n  const selecionarFerramenta = (ferramenta) => {\r\n    setBuscaFerramenta(ferramenta);\r\n    setFerramentaSelecionada(ferramenta);\r\n    setSugestoesVisiveis(false);\r\n  };\r\n\r\n  const adicionarFerramenta = () => {\r\n    const ferramenta = ferramentaSelecionada || buscaFerramenta;\r\n    if (ferramenta) {\r\n      onAdicionarFerramenta(ferramenta);\r\n      setFerramentaSelecionada('');\r\n      setBuscaFerramenta('');\r\n      setSugestoesVisiveis(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex gap-2 relative\">\r\n      {/* Campo de busca com autocompletar */}\r\n      <div className=\"flex-1 relative\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Digite o nome da ferramenta...\"\r\n          value={buscaFerramenta}\r\n          onChange={(e) => {\r\n            setBuscaFerramenta(e.target.value);\r\n            setFerramentaSelecionada('');\r\n            setSugestoesVisiveis(e.target.value.length > 0);\r\n          }}\r\n          onFocus={() => setSugestoesVisiveis(buscaFerramenta.length > 0)}\r\n          onBlur={() => setTimeout(() => setSugestoesVisiveis(false), 200)}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter') {\r\n              e.preventDefault();\r\n              adicionarFerramenta();\r\n            }\r\n          }}\r\n          className=\"form-input\"\r\n        />\r\n        \r\n        {/* Dropdown de sugestões */}\r\n        {sugestoesVisiveis && (\r\n          <div className=\"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 max-h-48 overflow-y-auto\">\r\n            {filtrarFerramentas(buscaFerramenta).map(item => (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => selecionarFerramenta(item.nome)}\r\n                className=\"w-full text-left px-3 py-2 hover:bg-gray-50 border-b border-gray-100 last:border-b-0\"\r\n              >\r\n                <div className=\"font-medium text-sm\">{item.nome}</div>\r\n                <div className=\"text-xs text-gray-500\">\r\n                  {item.categoria} • Disponível: {item.disponivel}\r\n                </div>\r\n              </button>\r\n            ))}\r\n            {filtrarFerramentas(buscaFerramenta).length === 0 && buscaFerramenta && (\r\n              <div className=\"px-3 py-2 text-gray-500 text-sm\">\r\n                Nenhuma ferramenta encontrada\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Select tradicional como alternativa */}\r\n      <select\r\n        value={ferramentaSelecionada}\r\n        onChange={(e) => {\r\n          setFerramentaSelecionada(e.target.value);\r\n          setBuscaFerramenta(e.target.value);\r\n          setSugestoesVisiveis(false);\r\n        }}\r\n        className=\"form-select min-w-48\"\r\n      >\r\n        <option value=\"\">Ou selecione...</option>\r\n        {ferramentasDisponiveis.map(item => (\r\n          <option key={item.id} value={item.nome}>\r\n            {item.nome.length > 30 ? `${item.nome.substring(0, 30)}...` : item.nome} ({item.disponivel})\r\n          </option>\r\n        ))}\r\n      </select>\r\n\r\n      <button\r\n        onClick={adicionarFerramenta}\r\n        disabled={!buscaFerramenta && !ferramentaSelecionada}\r\n        className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors disabled:bg-gray-300 disabled:cursor-not-allowed\"\r\n      >\r\n        <Plus className=\"w-4 h-4\" />\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FerramentaSelector;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}