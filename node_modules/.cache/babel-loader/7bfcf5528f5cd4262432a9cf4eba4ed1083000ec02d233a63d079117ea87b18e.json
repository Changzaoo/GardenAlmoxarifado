{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { historicoInicial } from '../data/historicoInicial';\nexport const useEmprestimos = () => {\n  _s();\n  const [emprestimos, setEmprestimos] = useState(historicoInicial);\n  const adicionarEmprestimo = (novoEmprestimo, atualizarInventario) => {\n    if (!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0) return;\n    const novoId = Math.max(...emprestimos.map(e => e.id), 0) + 1;\n    const emprestimo = {\n      id: novoId,\n      colaborador: novoEmprestimo.colaborador,\n      ferramentas: [...novoEmprestimo.ferramentas],\n      dataRetirada: novoEmprestimo.dataRetirada,\n      horaRetirada: novoEmprestimo.horaRetirada,\n      dataDevolucao: null,\n      horaDevolucao: null,\n      status: 'emprestado',\n      responsavel: 'vinicius'\n    };\n    setEmprestimos(prev => [...prev, emprestimo]);\n\n    // Atualizar disponibilidade no invent치rio\n    atualizarInventario(novoEmprestimo.ferramentas, 'remover');\n    return emprestimo;\n  };\n  const devolverFerramentas = (id, atualizarInventario) => {\n    const emprestimo = emprestimos.find(e => e.id === id);\n    if (!emprestimo) return;\n    const agora = new Date();\n    setEmprestimos(prev => prev.map(emp => emp.id === id ? {\n      ...emp,\n      dataDevolucao: agora.toISOString().split('T')[0],\n      horaDevolucao: agora.toTimeString().slice(0, 5),\n      status: 'devolvido'\n    } : emp));\n\n    // Atualizar disponibilidade no invent치rio\n    atualizarInventario(emprestimo.ferramentas, 'adicionar');\n  };\n  const removerEmprestimo = (id, atualizarInventario) => {\n    const emprestimo = emprestimos.find(e => e.id === id);\n    if (!emprestimo) return;\n\n    // Se estava emprestado, devolver para o estoque\n    if (emprestimo.status === 'emprestado') {\n      atualizarInventario(emprestimo.ferramentas, 'adicionar');\n    }\n    setEmprestimos(prev => prev.filter(emp => emp.id !== id));\n  };\n  return {\n    emprestimos,\n    adicionarEmprestimo,\n    devolverFerramentas,\n    removerEmprestimo,\n    setEmprestimos\n  };\n};\n_s(useEmprestimos, \"eXgt35hZQD6K0yRPjFm1p8q9sIs=\");","map":{"version":3,"names":["useState","historicoInicial","useEmprestimos","_s","emprestimos","setEmprestimos","adicionarEmprestimo","novoEmprestimo","atualizarInventario","colaborador","ferramentas","length","novoId","Math","max","map","e","id","emprestimo","dataRetirada","horaRetirada","dataDevolucao","horaDevolucao","status","responsavel","prev","devolverFerramentas","find","agora","Date","emp","toISOString","split","toTimeString","slice","removerEmprestimo","filter"],"sources":["C:/Users/vinic/OneDrive/Documentos/Almo/src/hooks/useEmprestimos.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { historicoInicial } from '../data/historicoInicial';\r\n\r\nexport const useEmprestimos = () => {\r\n  const [emprestimos, setEmprestimos] = useState(historicoInicial);\r\n\r\n  const adicionarEmprestimo = (novoEmprestimo, atualizarInventario) => {\r\n    if (!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0) return;\r\n\r\n    const novoId = Math.max(...emprestimos.map(e => e.id), 0) + 1;\r\n    const emprestimo = {\r\n      id: novoId,\r\n      colaborador: novoEmprestimo.colaborador,\r\n      ferramentas: [...novoEmprestimo.ferramentas],\r\n      dataRetirada: novoEmprestimo.dataRetirada,\r\n      horaRetirada: novoEmprestimo.horaRetirada,\r\n      dataDevolucao: null,\r\n      horaDevolucao: null,\r\n      status: 'emprestado',\r\n      responsavel: 'vinicius'\r\n    };\r\n\r\n    setEmprestimos(prev => [...prev, emprestimo]);\r\n    \r\n    // Atualizar disponibilidade no invent치rio\r\n    atualizarInventario(novoEmprestimo.ferramentas, 'remover');\r\n    \r\n    return emprestimo;\r\n  };\r\n\r\n  const devolverFerramentas = (id, atualizarInventario) => {\r\n    const emprestimo = emprestimos.find(e => e.id === id);\r\n    if (!emprestimo) return;\r\n    \r\n    const agora = new Date();\r\n    \r\n    setEmprestimos(prev => prev.map(emp => \r\n      emp.id === id \r\n        ? { \r\n            ...emp, \r\n            dataDevolucao: agora.toISOString().split('T')[0], \r\n            horaDevolucao: agora.toTimeString().slice(0, 5),\r\n            status: 'devolvido' \r\n          }\r\n        : emp\r\n    ));\r\n\r\n    // Atualizar disponibilidade no invent치rio\r\n    atualizarInventario(emprestimo.ferramentas, 'adicionar');\r\n  };\r\n\r\n  const removerEmprestimo = (id, atualizarInventario) => {\r\n    const emprestimo = emprestimos.find(e => e.id === id);\r\n    if (!emprestimo) return;\r\n    \r\n    // Se estava emprestado, devolver para o estoque\r\n    if (emprestimo.status === 'emprestado') {\r\n      atualizarInventario(emprestimo.ferramentas, 'adicionar');\r\n    }\r\n    \r\n    setEmprestimos(prev => prev.filter(emp => emp.id !== id));\r\n  };\r\n\r\n  return {\r\n    emprestimos,\r\n    adicionarEmprestimo,\r\n    devolverFerramentas,\r\n    removerEmprestimo,\r\n    setEmprestimos\r\n  };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,gBAAgB,QAAQ,0BAA0B;AAE3D,OAAO,MAAMC,cAAc,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClC,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGL,QAAQ,CAACC,gBAAgB,CAAC;EAEhE,MAAMK,mBAAmB,GAAGA,CAACC,cAAc,EAAEC,mBAAmB,KAAK;IACnE,IAAI,CAACD,cAAc,CAACE,WAAW,IAAIF,cAAc,CAACG,WAAW,CAACC,MAAM,KAAK,CAAC,EAAE;IAE5E,MAAMC,MAAM,GAAGC,IAAI,CAACC,GAAG,CAAC,GAAGV,WAAW,CAACW,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC;IAC7D,MAAMC,UAAU,GAAG;MACjBD,EAAE,EAAEL,MAAM;MACVH,WAAW,EAAEF,cAAc,CAACE,WAAW;MACvCC,WAAW,EAAE,CAAC,GAAGH,cAAc,CAACG,WAAW,CAAC;MAC5CS,YAAY,EAAEZ,cAAc,CAACY,YAAY;MACzCC,YAAY,EAAEb,cAAc,CAACa,YAAY;MACzCC,aAAa,EAAE,IAAI;MACnBC,aAAa,EAAE,IAAI;MACnBC,MAAM,EAAE,YAAY;MACpBC,WAAW,EAAE;IACf,CAAC;IAEDnB,cAAc,CAACoB,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEP,UAAU,CAAC,CAAC;;IAE7C;IACAV,mBAAmB,CAACD,cAAc,CAACG,WAAW,EAAE,SAAS,CAAC;IAE1D,OAAOQ,UAAU;EACnB,CAAC;EAED,MAAMQ,mBAAmB,GAAGA,CAACT,EAAE,EAAET,mBAAmB,KAAK;IACvD,MAAMU,UAAU,GAAGd,WAAW,CAACuB,IAAI,CAACX,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC;IACrD,IAAI,CAACC,UAAU,EAAE;IAEjB,MAAMU,KAAK,GAAG,IAAIC,IAAI,CAAC,CAAC;IAExBxB,cAAc,CAACoB,IAAI,IAAIA,IAAI,CAACV,GAAG,CAACe,GAAG,IACjCA,GAAG,CAACb,EAAE,KAAKA,EAAE,GACT;MACE,GAAGa,GAAG;MACNT,aAAa,EAAEO,KAAK,CAACG,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MAChDV,aAAa,EAAEM,KAAK,CAACK,YAAY,CAAC,CAAC,CAACC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC;MAC/CX,MAAM,EAAE;IACV,CAAC,GACDO,GACN,CAAC,CAAC;;IAEF;IACAtB,mBAAmB,CAACU,UAAU,CAACR,WAAW,EAAE,WAAW,CAAC;EAC1D,CAAC;EAED,MAAMyB,iBAAiB,GAAGA,CAAClB,EAAE,EAAET,mBAAmB,KAAK;IACrD,MAAMU,UAAU,GAAGd,WAAW,CAACuB,IAAI,CAACX,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKA,EAAE,CAAC;IACrD,IAAI,CAACC,UAAU,EAAE;;IAEjB;IACA,IAAIA,UAAU,CAACK,MAAM,KAAK,YAAY,EAAE;MACtCf,mBAAmB,CAACU,UAAU,CAACR,WAAW,EAAE,WAAW,CAAC;IAC1D;IAEAL,cAAc,CAACoB,IAAI,IAAIA,IAAI,CAACW,MAAM,CAACN,GAAG,IAAIA,GAAG,CAACb,EAAE,KAAKA,EAAE,CAAC,CAAC;EAC3D,CAAC;EAED,OAAO;IACLb,WAAW;IACXE,mBAAmB;IACnBoB,mBAAmB;IACnBS,iBAAiB;IACjB9B;EACF,CAAC;AACH,CAAC;AAACF,EAAA,CAnEWD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}