{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from 'react';\nimport { historicoInicial } from '../../data/historicoInicial';\nexport const useEmprestimos = () => {\n  _s();\n  const [emprestimos, setEmprestimos] = useState(Array.isArray(historicoInicial) ? historicoInicial : []);\n  const adicionarEmprestimo = (novoEmprestimo, atualizarInventario) => {\n    if (!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0) return;\n    const lista = Array.isArray(emprestimos) ? emprestimos : [];\n    const novoId = Math.max(...lista.map(e => e.id), 0) + 1;\n    const emprestimo = {\n      id: novoId,\n      colaborador: novoEmprestimo.colaborador,\n      ferramentas: [...novoEmprestimo.ferramentas],\n      dataRetirada: novoEmprestimo.dataRetirada,\n      horaRetirada: novoEmprestimo.horaRetirada,\n      dataDevolucao: null,\n      horaDevolucao: null,\n      status: 'emprestado',\n      responsavel: 'vinicius'\n    };\n    setEmprestimos(prev => [...prev, emprestimo]);\n\n    // Atualizar disponibilidade no invent치rio\n    atualizarInventario(novoEmprestimo.ferramentas, 'remover');\n    return emprestimo;\n  };\n  const devolverFerramentas = (id, atualizarInventario) => {\n    const emprestimo = emprestimos.find(e => e.id === id);\n    if (!emprestimo) return;\n    const agora = new Date();\n    setEmprestimos(prev => prev.map(emp => emp.id === id ? {\n      ...emp,\n      dataDevolucao: agora.toISOString().split('T')[0],\n      horaDevolucao: agora.toTimeString().slice(0, 5),\n      status: 'devolvido'\n    } : emp));\n\n    // Atualizar disponibilidade no invent치rio\n    atualizarInventario(emprestimo.ferramentas, 'adicionar');\n  };\n  const removerEmprestimo = (id, atualizarInventario) => {\n    const emprestimo = emprestimos.find(e => e.id === id);\n    if (!emprestimo) return;\n\n    // Se estava emprestado, devolver para o estoque\n    if (emprestimo.status === 'emprestado') {\n      atualizarInventario(emprestimo.ferramentas, 'adicionar');\n    }\n    setEmprestimos(prev => prev.filter(emp => emp.id !== id));\n  };\n  return {\n    emprestimos,\n    adicionarEmprestimo,\n    devolverFerramentas,\n    removerEmprestimo,\n    setEmprestimos\n  };\n};\n_s(useEmprestimos, \"+umPcBozimRhvxlUk6KF1EOLbHM=\");","map":{"version":3,"names":["useState","historicoInicial","useEmprestimos","_s","emprestimos","setEmprestimos","Array","isArray","adicionarEmprestimo","novoEmprestimo","atualizarInventario","colaborador","ferramentas","length","lista","novoId","Math","max","map","e","id","emprestimo","dataRetirada","horaRetirada","dataDevolucao","horaDevolucao","status","responsavel","prev","devolverFerramentas","find","agora","Date","emp","toISOString","split","toTimeString","slice","removerEmprestimo","filter"],"sources":["C:/Users/vinic/OneDrive/Documentos/Almo/src/components/hooks/useEmprestimos.js"],"sourcesContent":["import { useState } from 'react';\r\nimport { historicoInicial } from '../../data/historicoInicial';\r\n\r\nexport const useEmprestimos = () => {\r\n  const [emprestimos, setEmprestimos] = useState(Array.isArray(historicoInicial) ? historicoInicial : []);\r\n\r\n  const adicionarEmprestimo = (novoEmprestimo, atualizarInventario) => {\r\n  if (!novoEmprestimo.colaborador || novoEmprestimo.ferramentas.length === 0) return;\r\n\r\n  const lista = Array.isArray(emprestimos) ? emprestimos : [];\r\n  const novoId = Math.max(...lista.map(e => e.id), 0) + 1;\r\n    const emprestimo = {\r\n      id: novoId,\r\n      colaborador: novoEmprestimo.colaborador,\r\n      ferramentas: [...novoEmprestimo.ferramentas],\r\n      dataRetirada: novoEmprestimo.dataRetirada,\r\n      horaRetirada: novoEmprestimo.horaRetirada,\r\n      dataDevolucao: null,\r\n      horaDevolucao: null,\r\n      status: 'emprestado',\r\n      responsavel: 'vinicius'\r\n    };\r\n\r\n    setEmprestimos(prev => [...prev, emprestimo]);\r\n    \r\n    // Atualizar disponibilidade no invent치rio\r\n    atualizarInventario(novoEmprestimo.ferramentas, 'remover');\r\n    \r\n    return emprestimo;\r\n  };\r\n\r\n  const devolverFerramentas = (id, atualizarInventario) => {\r\n    const emprestimo = emprestimos.find(e => e.id === id);\r\n    if (!emprestimo) return;\r\n    \r\n    const agora = new Date();\r\n    \r\n    setEmprestimos(prev => prev.map(emp => \r\n      emp.id === id \r\n        ? { \r\n            ...emp, \r\n            dataDevolucao: agora.toISOString().split('T')[0], \r\n            horaDevolucao: agora.toTimeString().slice(0, 5),\r\n            status: 'devolvido' \r\n          }\r\n        : emp\r\n    ));\r\n\r\n    // Atualizar disponibilidade no invent치rio\r\n    atualizarInventario(emprestimo.ferramentas, 'adicionar');\r\n  };\r\n\r\n  const removerEmprestimo = (id, atualizarInventario) => {\r\n    const emprestimo = emprestimos.find(e => e.id === id);\r\n    if (!emprestimo) return;\r\n    \r\n    // Se estava emprestado, devolver para o estoque\r\n    if (emprestimo.status === 'emprestado') {\r\n      atualizarInventario(emprestimo.ferramentas, 'adicionar');\r\n    }\r\n    \r\n    setEmprestimos(prev => prev.filter(emp => emp.id !== id));\r\n  };\r\n\r\n  return {\r\n    emprestimos,\r\n    adicionarEmprestimo,\r\n    devolverFerramentas,\r\n    removerEmprestimo,\r\n    setEmprestimos\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}